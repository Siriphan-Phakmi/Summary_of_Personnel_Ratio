# คู่มือการแก้ไขปัญหาเบื้องต้น

## ปัญหาที่พบบ่อย

### 1. ปัญหาการเข้าสู่ระบบ (Login Issues)

#### อาการ: ล็อกอินไม่สำเร็จ แม้ใช้ชื่อผู้ใช้และรหัสผ่านถูกต้อง
**สาเหตุที่เป็นไปได้**:
- ข้อมูลใน localStorage/sessionStorage ไม่สมบูรณ์
- การเชื่อมต่อกับ Firebase Authentication ล้มเหลว
- Session อาจหมดอายุ

**การแก้ไข**:
1. ล้างข้อมูลเบราวเซอร์ (Clear browser cache/cookies)
```js
// สคริปต์สำหรับล้างข้อมูลการเข้าสู่ระบบ
localStorage.removeItem('user');
localStorage.removeItem('sessionToken');
// หรือ
sessionStorage.removeItem('user');
```
2. รีโหลดเพจ และลองเข้าสู่ระบบใหม่
3. ตรวจสอบการเชื่อมต่ออินเทอร์เน็ต
4. ตรวจสอบในส่วนผู้ใช้ Firebase Authentication

### 2. ปัญหา Modal ค้าง ไม่สามารถปิดได้

#### อาการ: Modal ค้าง กดปุ่มปิดไม่ได้
**สาเหตุที่เป็นไปได้**:
- ความขัดแย้งใน state
- การทำงานผิดพลาดของ event handlers
- React Hydration Errors

**การแก้ไข**:
1. ใช้ emergency-close.js (มีอยู่ใน public folder)
   - ไปที่ Console ของเบราวเซอร์ (กด F12)
   - คัดลอกและวางโค้ดจากไฟล์ emergency-close.js
2. รีเฟรชเพจในกรณีที่จำเป็น

### 3. ปัญหาการแสดงข้อมูล Ward Form

#### อาการ: ข้อมูลใน Ward Form ไม่แสดง หรือแสดงไม่ถูกต้อง
**สาเหตุที่เป็นไปได้**:
- การโหลดข้อมูลล้มเหลว
- ข้อมูลใน Firestore ไม่สมบูรณ์
- ปัญหาสิทธิ์การเข้าถึง

**การแก้ไข**:
1. ตรวจสอบความถูกต้องของวันที่และกะการทำงานที่เลือก
2. ตรวจสอบบันทึก error ใน Console
3. รีเฟรชเพจและลองใหม่
4. ออกจากระบบและเข้าสู่ระบบใหม่

## ข้อความข้อผิดพลาดที่พบบ่อย

### "เกิดข้อผิดพลาดในการเข้าสู่ระบบ"
- ตรวจสอบชื่อผู้ใช้และรหัสผ่าน
- ตรวจสอบการเชื่อมต่ออินเทอร์เน็ต
- อาจเกิดจากปัญหาการเชื่อมต่อกับ Firebase

### "บัญชีของคุณถูกใช้งานที่อื่น"
- มีคนล็อกอินด้วยบัญชีเดียวกันจากอุปกรณ์อื่น
- ล็อกอินใหม่เพื่อยกเลิกเซสชันเก่า

### "ไม่พบข้อมูลสำหรับวันที่และกะที่เลือก"
- ยังไม่เคยบันทึกข้อมูลสำหรับวันและกะที่เลือก
- ลองเลือกวันที่หรือกะการทำงานอื่น

## การติดตั้งใหม่ในกรณีมีปัญหา

หากพบปัญหาร้ายแรงกับการติดตั้ง ให้ทำตามขั้นตอนดังนี้:

1. ล้างข้อมูลการติดตั้งทั้งหมด
```bash
# ใช้ cleanup script
./cleanup.bat

# หรือทำตามขั้นตอนนี้
npm cache clean --force
rm -rf node_modules
rm package-lock.json
npm install
```

2. ตรวจสอบเวอร์ชันของ Node.js และ npm
```bash
node -v  # ควรเป็นเวอร์ชัน 18.x ขึ้นไป
npm -v   # ควรเป็นเวอร์ชัน 9.x ขึ้นไป
```

3. ตรวจสอบไฟล์ .env.local
```
# ตรวจสอบว่ามีค่า Firebase config ครบถ้วน
NEXT_PUBLIC_FIREBASE_API_KEY=...
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=...
# ... etc
```

## การรายงานปัญหา

หากไม่สามารถแก้ไขปัญหาได้ด้วยวิธีข้างต้น โปรดรายงานปัญหาโดย:
1. ถ่ายภาพหน้าจอของข้อผิดพลาด
2. บันทึกข้อความข้อผิดพลาดจาก Console
3. ระบุขั้นตอนที่ทำก่อนเกิดข้อผิดพลาด
4. ส่งรายงานไปที่ [admin@example.com] หรือสร้าง Issue ใน GitHub repository 