"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_app_context_AuthContext_js-_app-pages-browser_app_utils_alertService_js"],{

/***/ "(app-pages-browser)/./app/context/AuthContext.js":
/*!************************************!*\
  !*** ./app/context/AuthContext.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/firebase */ \"(app-pages-browser)/./app/lib/firebase.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _lib_dataAccess__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/dataAccess */ \"(app-pages-browser)/./app/lib/dataAccess.js\");\n/* harmony import */ var _utils_sessionRecording__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/sessionRecording */ \"(app-pages-browser)/./app/utils/sessionRecording.js\");\n/* __next_internal_client_entry_do_not_use__ useAuth,AuthProvider auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n// ระยะเวลาที่ session token หมดอายุ (20 นาที)\nconst SESSION_EXPIRY_TIME = 20 * 60 * 1000; // 20 นาที ในมิลลิวินาที\n// สร้าง session token แบบสุ่ม\nconst generateSessionToken = ()=>{\n    return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15) + Date.now().toString(36);\n};\n// Initialize with default values including the function signatures\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    user: null,\n    loading: true,\n    isAuthenticated: false,\n    login: async (username, password)=>{},\n    logout: ()=>{}\n});\nconst useAuth = ()=>{\n    _s();\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nfunction AuthProvider(param) {\n    let { children } = param;\n    _s1();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [authError, setAuthError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            // Check if user is stored in sessionStorage\n            const checkSessionStorage = {\n                \"AuthProvider.useEffect.checkSessionStorage\": ()=>{\n                    console.log('Checking sessionStorage for user data');\n                    try {\n                        // ตรวจสอบว่า sessionStorage พร้อมใช้งานหรือไม่\n                        if ( false || !window.sessionStorage) {\n                            console.log('sessionStorage is not available');\n                            setLoading(false);\n                            return;\n                        }\n                        const storedUser = sessionStorage.getItem('user');\n                        console.log('User data in sessionStorage:', storedUser ? 'Found' : 'Not found');\n                        if (storedUser) {\n                            try {\n                                const userData = JSON.parse(storedUser);\n                                console.log('Successfully parsed user data');\n                                setUser(userData);\n                                // ตรวจสอบความถูกต้องของ session\n                                validateUserSession(userData);\n                            } catch (parseError) {\n                                console.error('Error parsing user data from sessionStorage:', parseError);\n                                // ล้างข้อมูลที่อาจเสียหาย\n                                sessionStorage.removeItem('user');\n                            }\n                        }\n                    } catch (error) {\n                        console.error('Error checking sessionStorage:', error);\n                        setAuthError(error.message || 'เกิดข้อผิดพลาดในการตรวจสอบข้อมูลผู้ใช้');\n                    } finally{\n                        setLoading(false);\n                    }\n                }\n            }[\"AuthProvider.useEffect.checkSessionStorage\"];\n            // หน่วงเวลาเล็กน้อยเพื่อให้แน่ใจว่า client side hydration เสร็จสมบูรณ์\n            const timer = setTimeout({\n                \"AuthProvider.useEffect.timer\": ()=>{\n                    checkSessionStorage();\n                }\n            }[\"AuthProvider.useEffect.timer\"], 100);\n            return ({\n                \"AuthProvider.useEffect\": ()=>clearTimeout(timer)\n            })[\"AuthProvider.useEffect\"];\n        }\n    }[\"AuthProvider.useEffect\"], []);\n    // ติดตามการเปลี่ยนแปลงของ session\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            // ตั้ง listener เพื่อติดตามการเปลี่ยนแปลงของ session\n            let unsubscribe = {\n                \"AuthProvider.useEffect.unsubscribe\": ()=>{}\n            }[\"AuthProvider.useEffect.unsubscribe\"];\n            if (user && user.uid && user.sessionId) {\n                // ติดตามการเปลี่ยนแปลงของเอกสาร session ปัจจุบัน\n                unsubscribe = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.onSnapshot)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, 'userSessions', user.sessionId), {\n                    \"AuthProvider.useEffect\": (snapshot)=>{\n                        if (snapshot.exists()) {\n                            const sessionData = snapshot.data();\n                            // ถ้า session ไม่ active แล้ว ให้ logout อัตโนมัติ\n                            if (!sessionData.active) {\n                                console.log('Session expired or invalidated, logging out...');\n                                logout(false); // ไม่ต้องเรียก invalidateSession เพราะ session ถูกยกเลิกไปแล้ว\n                            }\n                        } else {\n                            // ไม่พบ session ให้ logout\n                            console.log('Session not found, logging out...');\n                            logout(false);\n                        }\n                    }\n                }[\"AuthProvider.useEffect\"], {\n                    \"AuthProvider.useEffect\": (error)=>{\n                        console.error('Error listening to session changes:', error);\n                    }\n                }[\"AuthProvider.useEffect\"]);\n            }\n            // Clean up listener เมื่อ component unmount หรือ user เปลี่ยน\n            return ({\n                \"AuthProvider.useEffect\": ()=>{\n                    if (unsubscribe) {\n                        unsubscribe();\n                    }\n                }\n            })[\"AuthProvider.useEffect\"];\n        }\n    }[\"AuthProvider.useEffect\"], [\n        user === null || user === void 0 ? void 0 : user.uid,\n        user === null || user === void 0 ? void 0 : user.sessionId\n    ]);\n    // ฟังก์ชันตรวจสอบความถูกต้องของ session\n    const validateUserSession = async (user)=>{\n        if (!user || !user.uid || !user.sessionId) {\n            setUser(null);\n            sessionStorage.removeItem('user');\n            return;\n        }\n        try {\n            const isValid = await (0,_lib_dataAccess__WEBPACK_IMPORTED_MODULE_4__.validateSession)(user.uid, user.sessionId);\n            if (!isValid) {\n                // ถ้า session ไม่ถูกต้อง ให้ logout\n                console.log('Invalid session, logging out...');\n                logout(false);\n            }\n        } catch (error) {\n            console.error('Error validating session:', error);\n        }\n    };\n    // เริ่มการตรวจสอบ session อย่างสม่ำเสมอ\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            let sessionCheckInterval;\n            // ฟังก์ชันตรวจสอบ session สำหรับผู้ใช้ที่ login แล้ว\n            const checkCurrentSession = {\n                \"AuthProvider.useEffect.checkCurrentSession\": async ()=>{\n                    if (!user || !user.uid) return;\n                    try {\n                        // ตรวจสอบ session ปัจจุบันจาก Firestore\n                        const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, 'users', user.uid);\n                        const userDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.getDoc)(userRef);\n                        if (!userDoc.exists()) return;\n                        const userData = userDoc.data();\n                        const currentSessionToken = sessionStorage.getItem('sessionToken');\n                        // ถ้า session token ไม่ตรงกัน แสดงว่ามีคนอื่น login เข้ามาใหม่\n                        if (userData.sessionToken && userData.sessionToken !== currentSessionToken) {\n                            console.log('Another session detected, logging out');\n                            logout();\n                            alert('บัญชีของคุณถูกใช้งานที่อื่น คุณถูกออกจากระบบโดยอัตโนมัติ');\n                            return;\n                        }\n                        // ตรวจสอบว่า session หมดอายุหรือไม่\n                        if (userData.lastActivity) {\n                            const lastActivity = userData.lastActivity.toDate ? userData.lastActivity.toDate() : new Date(userData.lastActivity);\n                            const now = new Date();\n                            const timeDiff = now.getTime() - lastActivity.getTime();\n                            if (timeDiff > SESSION_EXPIRY_TIME) {\n                                console.log('Session expired, logging out');\n                                logout();\n                                alert('เซสชันของคุณหมดอายุ กรุณาเข้าสู่ระบบใหม่');\n                                return;\n                            }\n                            // อัปเดตเวลากิจกรรมล่าสุด\n                            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.updateDoc)(userRef, {\n                                lastActivity: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.serverTimestamp)()\n                            });\n                        }\n                    } catch (error) {\n                        console.error('Error checking session:', error);\n                    }\n                }\n            }[\"AuthProvider.useEffect.checkCurrentSession\"];\n            if (user && !loading) {\n                // ตรวจสอบทันทีหลัง login\n                checkCurrentSession();\n                // ตั้งเวลาตรวจสอบทุก 1 นาที\n                sessionCheckInterval = setInterval(checkCurrentSession, 60000);\n            }\n            return ({\n                \"AuthProvider.useEffect\": ()=>{\n                    if (sessionCheckInterval) {\n                        clearInterval(sessionCheckInterval);\n                    }\n                }\n            })[\"AuthProvider.useEffect\"];\n        }\n    }[\"AuthProvider.useEffect\"], [\n        user,\n        loading\n    ]);\n    // Login function\n    const login = async (username, password)=>{\n        console.log('Login function called with username:', username);\n        try {\n            const result = await (0,_lib_dataAccess__WEBPACK_IMPORTED_MODULE_4__.loginUser)(username, password);\n            if (result && result.success) {\n                // สร้าง session token ใหม่\n                const sessionToken = generateSessionToken();\n                // บันทึก token ลง sessionStorage\n                sessionStorage.setItem('sessionToken', sessionToken);\n                sessionStorage.setItem('user', JSON.stringify(result.user));\n                setUser(result.user);\n                // บันทึก session token และเวลาลงใน Firestore\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, 'users', result.user.uid);\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.updateDoc)(userRef, {\n                    sessionToken: sessionToken,\n                    lastActivity: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.serverTimestamp)(),\n                    lastLogin: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.serverTimestamp)()\n                });\n                // Wrap logging in try-catch\n                try {\n                    (0,_utils_sessionRecording__WEBPACK_IMPORTED_MODULE_5__.logEvent)('user_login', {\n                        userId: result.user.uid,\n                        username: username,\n                        sessionId: result.user.sessionId,\n                        role: result.user.role,\n                        name: result.user.displayName,\n                        timestamp: new Date().toISOString(),\n                        action: 'Login success'\n                    });\n                } catch (logError) {\n                    console.warn('Login logging failed:', logError);\n                }\n                return result;\n            }\n            return result;\n        } catch (error) {\n            console.error('Login error:', error);\n            return {\n                success: false,\n                error: error.message || 'เกิดข้อผิดพลาดในการเข้าสู่ระบบ'\n            };\n        }\n    };\n    // Logout function\n    const logout = function() {\n        let invalidateCurrentSession = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;\n        try {\n            const userId = user === null || user === void 0 ? void 0 : user.uid;\n            const sessionId = user === null || user === void 0 ? void 0 : user.sessionId;\n            // ถ้ามี user และ uid ให้ลบ session token ออกจาก Firestore\n            if (userId) {\n                const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, 'users', userId);\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.updateDoc)(userRef, {\n                    sessionToken: null,\n                    lastActivity: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_3__.serverTimestamp)()\n                }).catch((err)=>console.error('Error clearing session:', err));\n            }\n            // ถ้าต้องการยกเลิก session ปัจจุบัน\n            if (invalidateCurrentSession && sessionId) {\n                (0,_lib_dataAccess__WEBPACK_IMPORTED_MODULE_4__.invalidateSession)(sessionId).catch((error)=>{\n                    console.error('Error invalidating session:', error);\n                });\n            }\n            // ลบข้อมูลออกจาก sessionStorage\n            sessionStorage.removeItem('sessionToken');\n            sessionStorage.removeItem('user');\n            setUser(null);\n            // บันทึกการออกจากระบบ\n            (0,_utils_sessionRecording__WEBPACK_IMPORTED_MODULE_5__.logEvent)('user_logout', {\n                userId,\n                username: user === null || user === void 0 ? void 0 : user.username,\n                sessionId,\n                role: user === null || user === void 0 ? void 0 : user.role,\n                name: user === null || user === void 0 ? void 0 : user.displayName,\n                timestamp: new Date().toISOString(),\n                action: 'Logout success'\n            });\n            return true;\n        } catch (error) {\n            console.error('Logout error:', error);\n            return false;\n        }\n    };\n    // Check if user is authenticated\n    const isAuthenticated = user !== null;\n    // Make sure login is included in the context value\n    const value = {\n        user,\n        loading,\n        isAuthenticated: !!user,\n        login,\n        logout\n    };\n    console.log('AuthContext value:', {\n        user: !!value.user,\n        loading: value.loading,\n        isAuthenticated: value.isAuthenticated,\n        hasLogin: typeof value.login === 'function',\n        hasLogout: typeof value.logout === 'function'\n    });\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\context\\\\AuthContext.js\",\n        lineNumber: 316,\n        columnNumber: 5\n    }, this);\n}\n_s1(AuthProvider, \"76MNfp0tazfQpgpif3PspRKGE6w=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9jb250ZXh0L0F1dGhDb250ZXh0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQ3VFO0FBQzVCO0FBQ2dGO0FBQ3pDO0FBQzdCO0FBRXJELDhDQUE4QztBQUM5QyxNQUFNbUIsc0JBQXNCLEtBQUssS0FBSyxNQUFNLHdCQUF3QjtBQUVwRSw4QkFBOEI7QUFDOUIsTUFBTUMsdUJBQXVCO0lBQzNCLE9BQU9DLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLFNBQVMsQ0FBQyxHQUFHLE1BQ3hDSCxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxTQUFTLENBQUMsR0FBRyxNQUN4Q0MsS0FBS0MsR0FBRyxHQUFHSCxRQUFRLENBQUM7QUFDN0I7QUFFQSxtRUFBbUU7QUFDbkUsTUFBTUksNEJBQWMzQixvREFBYUEsQ0FBQztJQUNoQzRCLE1BQU07SUFDTkMsU0FBUztJQUNUQyxpQkFBaUI7SUFDakJDLE9BQU8sT0FBT0MsVUFBVUMsWUFBYztJQUN0Q0MsUUFBUSxLQUFPO0FBQ2pCO0FBRU8sTUFBTUMsVUFBVTs7SUFBTWxDLE9BQUFBLGlEQUFVQSxDQUFDMEI7QUFBVyxFQUFFO0dBQXhDUTtBQUVOLFNBQVNDLGFBQWEsS0FBWTtRQUFaLEVBQUVDLFFBQVEsRUFBRSxHQUFaOztJQUMzQixNQUFNLENBQUNULE1BQU1VLFFBQVEsR0FBR3BDLCtDQUFRQSxDQUFDO0lBQ2pDLE1BQU0sQ0FBQzJCLFNBQVNVLFdBQVcsR0FBR3JDLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ3NDLFdBQVdDLGFBQWEsR0FBR3ZDLCtDQUFRQSxDQUFDO0lBRTNDQyxnREFBU0E7a0NBQUM7WUFDUiw0Q0FBNEM7WUFDNUMsTUFBTXVDOzhEQUFzQjtvQkFDMUJDLFFBQVFDLEdBQUcsQ0FBQztvQkFDWixJQUFJO3dCQUNGLCtDQUErQzt3QkFDL0MsSUFBSSxNQUE2QixJQUFJLENBQUNDLE9BQU9DLGNBQWMsRUFBRTs0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QkFDdkJDLFdBQVcsSUFBSWxFLE9BQU9tRSxXQUFXO2dCQUNqQ0MsUUFBUTtZQUNWO1lBRUEsT0FBTztRQUNULEVBQUUsT0FBT3ZDLE9BQU87WUFDZFgsUUFBUVcsS0FBSyxDQUFDLGlCQUFpQkE7WUFDL0IsT0FBTztRQUNUO0lBQ0Y7SUFFQSxpQ0FBaUM7SUFDakMsTUFBTXhCLGtCQUFrQkYsU0FBUztJQUVqQyxtREFBbUQ7SUFDbkQsTUFBTXVFLFFBQVE7UUFDWnZFO1FBQ0FDO1FBQ0FDLGlCQUFpQixDQUFDLENBQUNGO1FBQ25CRztRQUNBRztJQUNGO0lBRUFTLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0I7UUFDaENoQixNQUFNLENBQUMsQ0FBQ3VFLE1BQU12RSxJQUFJO1FBQ2xCQyxTQUFTc0UsTUFBTXRFLE9BQU87UUFDdEJDLGlCQUFpQnFFLE1BQU1yRSxlQUFlO1FBQ3RDc0UsVUFBVSxPQUFPRCxNQUFNcEUsS0FBSyxLQUFLO1FBQ2pDc0UsV0FBVyxPQUFPRixNQUFNakUsTUFBTSxLQUFLO0lBQ3JDO0lBRUEscUJBQ0UsOERBQUNQLFlBQVkyRSxRQUFRO1FBQUNILE9BQU9BO2tCQUMxQjlEOzs7Ozs7QUFHUDtJQW5TZ0JEO0tBQUFBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEJfU0lSXFxPbmVEcml2ZVxc4LmA4LiU4Liq4LiB4LmM4LiX4LmH4Lit4LibXFxBY3RpdmUgMTQtMy0yMDI1XFxTdW1tYXJ5X29mX1BlcnNvbm5lbF9SYXRpb1xcYXBwXFxjb250ZXh0XFxBdXRoQ29udGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGF1dGgsIGRiIH0gZnJvbSAnLi4vbGliL2ZpcmViYXNlJztcclxuaW1wb3J0IHsgZG9jLCBnZXREb2MsIHNldERvYywgdXBkYXRlRG9jLCBzZXJ2ZXJUaW1lc3RhbXAsIG9uU25hcHNob3QsIGNvbGxlY3Rpb24sIHF1ZXJ5LCB3aGVyZSB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XHJcbmltcG9ydCB7IGxvZ2luVXNlciwgdmFsaWRhdGVTZXNzaW9uLCBpbnZhbGlkYXRlU2Vzc2lvbiB9IGZyb20gJy4uL2xpYi9kYXRhQWNjZXNzJztcclxuaW1wb3J0IHsgbG9nRXZlbnQgfSBmcm9tICcuLi91dGlscy9zZXNzaW9uUmVjb3JkaW5nJztcclxuXHJcbi8vIOC4o+C4sOC4ouC4sOC5gOC4p+C4peC4suC4l+C4teC5iCBzZXNzaW9uIHRva2VuIOC4q+C4oeC4lOC4reC4suC4ouC4uCAoMjAg4LiZ4Liy4LiX4Li1KVxyXG5jb25zdCBTRVNTSU9OX0VYUElSWV9USU1FID0gMjAgKiA2MCAqIDEwMDA7IC8vIDIwIOC4meC4suC4l+C4tSDguYPguJnguKHguLTguKXguKXguLTguKfguLTguJnguLLguJfguLVcclxuXHJcbi8vIOC4quC4o+C5ieC4suC4hyBzZXNzaW9uIHRva2VuIOC5geC4muC4muC4quC4uOC5iOC4oVxyXG5jb25zdCBnZW5lcmF0ZVNlc3Npb25Ub2tlbiA9ICgpID0+IHtcclxuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KSArIFxyXG4gICAgICAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpICsgXHJcbiAgICAgICAgIERhdGUubm93KCkudG9TdHJpbmcoMzYpO1xyXG59O1xyXG5cclxuLy8gSW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgdmFsdWVzIGluY2x1ZGluZyB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlc1xyXG5jb25zdCBBdXRoQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoe1xyXG4gIHVzZXI6IG51bGwsXHJcbiAgbG9hZGluZzogdHJ1ZSxcclxuICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxyXG4gIGxvZ2luOiBhc3luYyAodXNlcm5hbWUsIHBhc3N3b3JkKSA9PiB7fSxcclxuICBsb2dvdXQ6ICgpID0+IHt9LFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VBdXRoID0gKCkgPT4gdXNlQ29udGV4dChBdXRoQ29udGV4dCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQXV0aFByb3ZpZGVyKHsgY2hpbGRyZW4gfSkge1xyXG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIGNvbnN0IFthdXRoRXJyb3IsIHNldEF1dGhFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgc3RvcmVkIGluIHNlc3Npb25TdG9yYWdlXHJcbiAgICBjb25zdCBjaGVja1Nlc3Npb25TdG9yYWdlID0gKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgc2Vzc2lvblN0b3JhZ2UgZm9yIHVzZXIgZGF0YScpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIOC4leC4o+C4p+C4iOC4quC4reC4muC4p+C5iOC4siBzZXNzaW9uU3RvcmFnZSDguJ7guKPguYnguK3guKHguYPguIrguYnguIfguLLguJnguKvguKPguLfguK3guYTguKHguYhcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5zZXNzaW9uU3RvcmFnZSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ3Nlc3Npb25TdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUnKTtcclxuICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdG9yZWRVc2VyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGRhdGEgaW4gc2Vzc2lvblN0b3JhZ2U6Jywgc3RvcmVkVXNlciA/ICdGb3VuZCcgOiAnTm90IGZvdW5kJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHN0b3JlZFVzZXIpIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0gSlNPTi5wYXJzZShzdG9yZWRVc2VyKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBwYXJzZWQgdXNlciBkYXRhJyk7XHJcbiAgICAgICAgICAgIHNldFVzZXIodXNlckRhdGEpO1xyXG5cclxuICAgICAgICAgICAgLy8g4LiV4Lij4Lin4LiI4Liq4Lit4Lia4LiE4Lin4Liy4Lih4LiW4Li54LiB4LiV4LmJ4Lit4LiH4LiC4Lit4LiHIHNlc3Npb25cclxuICAgICAgICAgICAgdmFsaWRhdGVVc2VyU2Vzc2lvbih1c2VyRGF0YSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdXNlciBkYXRhIGZyb20gc2Vzc2lvblN0b3JhZ2U6JywgcGFyc2VFcnJvcik7XHJcbiAgICAgICAgICAgIC8vIOC4peC5ieC4suC4h+C4guC5ieC4reC4oeC4ueC4peC4l+C4teC5iOC4reC4suC4iOC5gOC4quC4teC4ouC4q+C4suC4olxyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHNlc3Npb25TdG9yYWdlOicsIGVycm9yKTtcclxuICAgICAgICBzZXRBdXRoRXJyb3IoZXJyb3IubWVzc2FnZSB8fCAn4LmA4LiB4Li04LiU4LiC4LmJ4Lit4Lic4Li04LiU4Lie4Lil4Liy4LiU4LmD4LiZ4LiB4Liy4Lij4LiV4Lij4Lin4LiI4Liq4Lit4Lia4LiC4LmJ4Lit4Lih4Li54Lil4Lic4Li54LmJ4LmD4LiK4LmJJyk7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIOC4q+C4meC5iOC4p+C4h+C5gOC4p+C4peC4suC5gOC4peC5h+C4geC4meC5ieC4reC4ouC5gOC4nuC4t+C5iOC4reC5g+C4q+C5ieC5geC4meC5iOC5g+C4iOC4p+C5iOC4siBjbGllbnQgc2lkZSBoeWRyYXRpb24g4LmA4Liq4Lij4LmH4LiI4Liq4Lih4Lia4Li54Lij4LiT4LmMXHJcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBjaGVja1Nlc3Npb25TdG9yYWdlKCk7XHJcbiAgICB9LCAxMDApO1xyXG4gICAgXHJcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIOC4leC4tOC4lOC4leC4suC4oeC4geC4suC4o+C5gOC4m+C4peC4teC5iOC4ouC4meC5geC4m+C4peC4h+C4guC4reC4hyBzZXNzaW9uXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIOC4leC4seC5ieC4hyBsaXN0ZW5lciDguYDguJ7guLfguYjguK3guJXguLTguJTguJXguLLguKHguIHguLLguKPguYDguJvguKXguLXguYjguKLguJnguYHguJvguKXguIfguILguK3guIcgc2Vzc2lvblxyXG4gICAgbGV0IHVuc3Vic2NyaWJlID0gKCkgPT4ge307XHJcbiAgICBcclxuICAgIGlmICh1c2VyICYmIHVzZXIudWlkICYmIHVzZXIuc2Vzc2lvbklkKSB7XHJcbiAgICAgIC8vIOC4leC4tOC4lOC4leC4suC4oeC4geC4suC4o+C5gOC4m+C4peC4teC5iOC4ouC4meC5geC4m+C4peC4h+C4guC4reC4h+C5gOC4reC4geC4quC4suC4oyBzZXNzaW9uIOC4m+C4seC4iOC4iOC4uOC4muC4seC4mVxyXG4gICAgICB1bnN1YnNjcmliZSA9IG9uU25hcHNob3QoXHJcbiAgICAgICAgZG9jKGRiLCAndXNlclNlc3Npb25zJywgdXNlci5zZXNzaW9uSWQpLFxyXG4gICAgICAgIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gc25hcHNob3QuZGF0YSgpO1xyXG4gICAgICAgICAgICAvLyDguJbguYnguLIgc2Vzc2lvbiDguYTguKHguYggYWN0aXZlIOC5geC4peC5ieC4pyDguYPguKvguYkgbG9nb3V0IOC4reC4seC4leC5guC4meC4oeC4seC4leC4tFxyXG4gICAgICAgICAgICBpZiAoIXNlc3Npb25EYXRhLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIGV4cGlyZWQgb3IgaW52YWxpZGF0ZWQsIGxvZ2dpbmcgb3V0Li4uJyk7XHJcbiAgICAgICAgICAgICAgbG9nb3V0KGZhbHNlKTsgLy8g4LmE4Lih4LmI4LiV4LmJ4Lit4LiH4LmA4Lij4Li14Lii4LiBIGludmFsaWRhdGVTZXNzaW9uIOC5gOC4nuC4o+C4suC4sCBzZXNzaW9uIOC4luC4ueC4geC4ouC4geC5gOC4peC4tOC4geC5hOC4m+C5geC4peC5ieC4p1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDguYTguKHguYjguJ7guJogc2Vzc2lvbiDguYPguKvguYkgbG9nb3V0XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIG5vdCBmb3VuZCwgbG9nZ2luZyBvdXQuLi4nKTtcclxuICAgICAgICAgICAgbG9nb3V0KGZhbHNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbGlzdGVuaW5nIHRvIHNlc3Npb24gY2hhbmdlczonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDbGVhbiB1cCBsaXN0ZW5lciDguYDguKHguLfguYjguK0gY29tcG9uZW50IHVubW91bnQg4Lir4Lij4Li34LitIHVzZXIg4LmA4Lib4Lil4Li14LmI4Lii4LiZXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAodW5zdWJzY3JpYmUpIHtcclxuICAgICAgICB1bnN1YnNjcmliZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0sIFt1c2VyPy51aWQsIHVzZXI/LnNlc3Npb25JZF0pO1xyXG5cclxuICAvLyDguJ/guLHguIfguIHguYzguIrguLHguJnguJXguKPguKfguIjguKrguK3guJrguITguKfguLLguKHguJbguLnguIHguJXguYnguK3guIfguILguK3guIcgc2Vzc2lvblxyXG4gIGNvbnN0IHZhbGlkYXRlVXNlclNlc3Npb24gPSBhc3luYyAodXNlcikgPT4ge1xyXG4gICAgaWYgKCF1c2VyIHx8ICF1c2VyLnVpZCB8fCAhdXNlci5zZXNzaW9uSWQpIHtcclxuICAgICAgc2V0VXNlcihudWxsKTtcclxuICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB2YWxpZGF0ZVNlc3Npb24odXNlci51aWQsIHVzZXIuc2Vzc2lvbklkKTtcclxuICAgICAgaWYgKCFpc1ZhbGlkKSB7XHJcbiAgICAgICAgLy8g4LiW4LmJ4LiyIHNlc3Npb24g4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiHIOC5g+C4q+C5iSBsb2dvdXRcclxuICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBzZXNzaW9uLCBsb2dnaW5nIG91dC4uLicpO1xyXG4gICAgICAgIGxvZ291dChmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZhbGlkYXRpbmcgc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g4LmA4Lij4Li04LmI4Lih4LiB4Liy4Lij4LiV4Lij4Lin4LiI4Liq4Lit4LiaIHNlc3Npb24g4Lit4Lii4LmI4Liy4LiH4Liq4Lih4LmI4Liz4LmA4Liq4Lih4LitXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBzZXNzaW9uQ2hlY2tJbnRlcnZhbDtcclxuICAgIFxyXG4gICAgLy8g4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4LiV4Lij4Lin4LiI4Liq4Lit4LiaIHNlc3Npb24g4Liq4Liz4Lir4Lij4Lix4Lia4Lic4Li54LmJ4LmD4LiK4LmJ4LiX4Li14LmIIGxvZ2luIOC5geC4peC5ieC4p1xyXG4gICAgY29uc3QgY2hlY2tDdXJyZW50U2Vzc2lvbiA9IGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLnVpZCkgcmV0dXJuO1xyXG4gICAgICBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyDguJXguKPguKfguIjguKrguK3guJogc2Vzc2lvbiDguJvguLHguIjguIjguLjguJrguLHguJnguIjguLLguIEgRmlyZXN0b3JlXHJcbiAgICAgICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlci51aWQpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJEb2MgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF1c2VyRG9jLmV4aXN0cygpKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSB1c2VyRG9jLmRhdGEoKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50U2Vzc2lvblRva2VuID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvblRva2VuJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g4LiW4LmJ4LiyIHNlc3Npb24gdG9rZW4g4LmE4Lih4LmI4LiV4Lij4LiH4LiB4Lix4LiZIOC5geC4quC4lOC4h+C4p+C5iOC4suC4oeC4teC4hOC4meC4reC4t+C5iOC4mSBsb2dpbiDguYDguILguYnguLLguKHguLLguYPguKvguKHguYhcclxuICAgICAgICBpZiAodXNlckRhdGEuc2Vzc2lvblRva2VuICYmIFxyXG4gICAgICAgICAgICB1c2VyRGF0YS5zZXNzaW9uVG9rZW4gIT09IGN1cnJlbnRTZXNzaW9uVG9rZW4pIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdBbm90aGVyIHNlc3Npb24gZGV0ZWN0ZWQsIGxvZ2dpbmcgb3V0Jyk7XHJcbiAgICAgICAgICBsb2dvdXQoKTtcclxuICAgICAgICAgIGFsZXJ0KCfguJrguLHguI3guIrguLXguILguK3guIfguITguLjguJPguJbguLnguIHguYPguIrguYnguIfguLLguJnguJfguLXguYjguK3guLfguYjguJkg4LiE4Li44LiT4LiW4Li54LiB4Lit4Lit4LiB4LiI4Liy4LiB4Lij4Liw4Lia4Lia4LmC4LiU4Lii4Lit4Lix4LiV4LmC4LiZ4Lih4Lix4LiV4Li0Jyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOC4leC4o+C4p+C4iOC4quC4reC4muC4p+C5iOC4siBzZXNzaW9uIOC4q+C4oeC4lOC4reC4suC4ouC4uOC4q+C4o+C4t+C4reC5hOC4oeC5iFxyXG4gICAgICAgIGlmICh1c2VyRGF0YS5sYXN0QWN0aXZpdHkpIHtcclxuICAgICAgICAgIGNvbnN0IGxhc3RBY3Rpdml0eSA9IHVzZXJEYXRhLmxhc3RBY3Rpdml0eS50b0RhdGUgPyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJEYXRhLmxhc3RBY3Rpdml0eS50b0RhdGUoKSA6IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUodXNlckRhdGEubGFzdEFjdGl2aXR5KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgIGNvbnN0IHRpbWVEaWZmID0gbm93LmdldFRpbWUoKSAtIGxhc3RBY3Rpdml0eS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmICh0aW1lRGlmZiA+IFNFU1NJT05fRVhQSVJZX1RJTUUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gZXhwaXJlZCwgbG9nZ2luZyBvdXQnKTtcclxuICAgICAgICAgICAgbG9nb3V0KCk7XHJcbiAgICAgICAgICAgIGFsZXJ0KCfguYDguIvguKrguIrguLHguJnguILguK3guIfguITguLjguJPguKvguKHguJTguK3guLLguKLguLgg4LiB4Lij4Li44LiT4Liy4LmA4LiC4LmJ4Liy4Liq4Li54LmI4Lij4Liw4Lia4Lia4LmD4Lir4Lih4LmIJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g4Lit4Lix4Lib4LmA4LiU4LiV4LmA4Lin4Lil4Liy4LiB4Li04LiI4LiB4Lij4Lij4Lih4Lil4LmI4Liy4Liq4Li44LiUXHJcbiAgICAgICAgICBhd2FpdCB1cGRhdGVEb2ModXNlclJlZiwge1xyXG4gICAgICAgICAgICBsYXN0QWN0aXZpdHk6IHNlcnZlclRpbWVzdGFtcCgpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmICh1c2VyICYmICFsb2FkaW5nKSB7XHJcbiAgICAgIC8vIOC4leC4o+C4p+C4iOC4quC4reC4muC4l+C4seC4meC4l+C4teC4q+C4peC4seC4hyBsb2dpblxyXG4gICAgICBjaGVja0N1cnJlbnRTZXNzaW9uKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDguJXguLHguYnguIfguYDguKfguKXguLLguJXguKPguKfguIjguKrguK3guJrguJfguLjguIEgMSDguJnguLLguJfguLVcclxuICAgICAgc2Vzc2lvbkNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVja0N1cnJlbnRTZXNzaW9uLCA2MDAwMCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmIChzZXNzaW9uQ2hlY2tJbnRlcnZhbCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2Vzc2lvbkNoZWNrSW50ZXJ2YWwpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0sIFt1c2VyLCBsb2FkaW5nXSk7XHJcblxyXG4gIC8vIExvZ2luIGZ1bmN0aW9uXHJcbiAgY29uc3QgbG9naW4gPSBhc3luYyAodXNlcm5hbWUsIHBhc3N3b3JkKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnTG9naW4gZnVuY3Rpb24gY2FsbGVkIHdpdGggdXNlcm5hbWU6JywgdXNlcm5hbWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbG9naW5Vc2VyKHVzZXJuYW1lLCBwYXNzd29yZCk7XHJcbiAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAvLyDguKrguKPguYnguLLguIcgc2Vzc2lvbiB0b2tlbiDguYPguKvguKHguYhcclxuICAgICAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBnZW5lcmF0ZVNlc3Npb25Ub2tlbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOC4muC4seC4meC4l+C4tuC4gSB0b2tlbiDguKXguIcgc2Vzc2lvblN0b3JhZ2VcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzZXNzaW9uVG9rZW4nLCBzZXNzaW9uVG9rZW4pO1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXN1bHQudXNlcikpO1xyXG4gICAgICAgIHNldFVzZXIocmVzdWx0LnVzZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOC4muC4seC4meC4l+C4tuC4gSBzZXNzaW9uIHRva2VuIOC5geC4peC4sOC5gOC4p+C4peC4suC4peC4h+C5g+C4mSBGaXJlc3RvcmVcclxuICAgICAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCByZXN1bHQudXNlci51aWQpO1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyUmVmLCB7XHJcbiAgICAgICAgICBzZXNzaW9uVG9rZW46IHNlc3Npb25Ub2tlbixcclxuICAgICAgICAgIGxhc3RBY3Rpdml0eTogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICAgICAgICBsYXN0TG9naW46IHNlcnZlclRpbWVzdGFtcCgpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gV3JhcCBsb2dnaW5nIGluIHRyeS1jYXRjaFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBsb2dFdmVudCgndXNlcl9sb2dpbicsIHtcclxuICAgICAgICAgICAgdXNlcklkOiByZXN1bHQudXNlci51aWQsXHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiByZXN1bHQudXNlci5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgIHJvbGU6IHJlc3VsdC51c2VyLnJvbGUsXHJcbiAgICAgICAgICAgIG5hbWU6IHJlc3VsdC51c2VyLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgYWN0aW9uOiAnTG9naW4gc3VjY2VzcydcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0xvZ2luIGxvZ2dpbmcgZmFpbGVkOicsIGxvZ0Vycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignTG9naW4gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ+C5gOC4geC4tOC4lOC4guC5ieC4reC4nOC4tOC4lOC4nuC4peC4suC4lOC5g+C4meC4geC4suC4o+C5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4micgfTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBMb2dvdXQgZnVuY3Rpb25cclxuICBjb25zdCBsb2dvdXQgPSAoaW52YWxpZGF0ZUN1cnJlbnRTZXNzaW9uID0gdHJ1ZSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlcklkID0gdXNlcj8udWlkO1xyXG4gICAgICBjb25zdCBzZXNzaW9uSWQgPSB1c2VyPy5zZXNzaW9uSWQ7XHJcbiAgICAgIFxyXG4gICAgICAvLyDguJbguYnguLLguKHguLUgdXNlciDguYHguKXguLAgdWlkIOC5g+C4q+C5ieC4peC4miBzZXNzaW9uIHRva2VuIOC4reC4reC4geC4iOC4suC4gSBGaXJlc3RvcmVcclxuICAgICAgaWYgKHVzZXJJZCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCk7XHJcbiAgICAgICAgdXBkYXRlRG9jKHVzZXJSZWYsIHtcclxuICAgICAgICAgIHNlc3Npb25Ub2tlbjogbnVsbCxcclxuICAgICAgICAgIGxhc3RBY3Rpdml0eTogc2VydmVyVGltZXN0YW1wKClcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcignRXJyb3IgY2xlYXJpbmcgc2Vzc2lvbjonLCBlcnIpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g4LiW4LmJ4Liy4LiV4LmJ4Lit4LiH4LiB4Liy4Lij4Lii4LiB4LmA4Lil4Li04LiBIHNlc3Npb24g4Lib4Lix4LiI4LiI4Li44Lia4Lix4LiZXHJcbiAgICAgIGlmIChpbnZhbGlkYXRlQ3VycmVudFNlc3Npb24gJiYgc2Vzc2lvbklkKSB7XHJcbiAgICAgICAgaW52YWxpZGF0ZVNlc3Npb24oc2Vzc2lvbklkKS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbnZhbGlkYXRpbmcgc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOC4peC4muC4guC5ieC4reC4oeC4ueC4peC4reC4reC4geC4iOC4suC4gSBzZXNzaW9uU3RvcmFnZVxyXG4gICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdzZXNzaW9uVG9rZW4nKTtcclxuICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpO1xyXG4gICAgICBzZXRVc2VyKG51bGwpO1xyXG4gICAgICBcclxuICAgICAgLy8g4Lia4Lix4LiZ4LiX4Li24LiB4LiB4Liy4Lij4Lit4Lit4LiB4LiI4Liy4LiB4Lij4Liw4Lia4LiaXHJcbiAgICAgIGxvZ0V2ZW50KCd1c2VyX2xvZ291dCcsIHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXI/LnVzZXJuYW1lLFxyXG4gICAgICAgIHNlc3Npb25JZCxcclxuICAgICAgICByb2xlOiB1c2VyPy5yb2xlLFxyXG4gICAgICAgIG5hbWU6IHVzZXI/LmRpc3BsYXlOYW1lLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGFjdGlvbjogJ0xvZ291dCBzdWNjZXNzJ1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignTG9nb3V0IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIENoZWNrIGlmIHVzZXIgaXMgYXV0aGVudGljYXRlZFxyXG4gIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IHVzZXIgIT09IG51bGw7XHJcblxyXG4gIC8vIE1ha2Ugc3VyZSBsb2dpbiBpcyBpbmNsdWRlZCBpbiB0aGUgY29udGV4dCB2YWx1ZVxyXG4gIGNvbnN0IHZhbHVlID0ge1xyXG4gICAgdXNlcixcclxuICAgIGxvYWRpbmcsXHJcbiAgICBpc0F1dGhlbnRpY2F0ZWQ6ICEhdXNlcixcclxuICAgIGxvZ2luLFxyXG4gICAgbG9nb3V0LFxyXG4gIH07XHJcblxyXG4gIGNvbnNvbGUubG9nKCdBdXRoQ29udGV4dCB2YWx1ZTonLCB7XHJcbiAgICB1c2VyOiAhIXZhbHVlLnVzZXIsXHJcbiAgICBsb2FkaW5nOiB2YWx1ZS5sb2FkaW5nLFxyXG4gICAgaXNBdXRoZW50aWNhdGVkOiB2YWx1ZS5pc0F1dGhlbnRpY2F0ZWQsXHJcbiAgICBoYXNMb2dpbjogdHlwZW9mIHZhbHVlLmxvZ2luID09PSAnZnVuY3Rpb24nLFxyXG4gICAgaGFzTG9nb3V0OiB0eXBlb2YgdmFsdWUubG9nb3V0ID09PSAnZnVuY3Rpb24nXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8QXV0aENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZhbHVlfT5cclxuICAgICAge2NoaWxkcmVufVxyXG4gICAgPC9BdXRoQ29udGV4dC5Qcm92aWRlcj5cclxuICApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiYXV0aCIsImRiIiwiZG9jIiwiZ2V0RG9jIiwic2V0RG9jIiwidXBkYXRlRG9jIiwic2VydmVyVGltZXN0YW1wIiwib25TbmFwc2hvdCIsImNvbGxlY3Rpb24iLCJxdWVyeSIsIndoZXJlIiwibG9naW5Vc2VyIiwidmFsaWRhdGVTZXNzaW9uIiwiaW52YWxpZGF0ZVNlc3Npb24iLCJsb2dFdmVudCIsIlNFU1NJT05fRVhQSVJZX1RJTUUiLCJnZW5lcmF0ZVNlc3Npb25Ub2tlbiIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIkRhdGUiLCJub3ciLCJBdXRoQ29udGV4dCIsInVzZXIiLCJsb2FkaW5nIiwiaXNBdXRoZW50aWNhdGVkIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibG9nb3V0IiwidXNlQXV0aCIsIkF1dGhQcm92aWRlciIsImNoaWxkcmVuIiwic2V0VXNlciIsInNldExvYWRpbmciLCJhdXRoRXJyb3IiLCJzZXRBdXRoRXJyb3IiLCJjaGVja1Nlc3Npb25TdG9yYWdlIiwiY29uc29sZSIsImxvZyIsIndpbmRvdyIsInNlc3Npb25TdG9yYWdlIiwic3RvcmVkVXNlciIsImdldEl0ZW0iLCJ1c2VyRGF0YSIsIkpTT04iLCJwYXJzZSIsInZhbGlkYXRlVXNlclNlc3Npb24iLCJwYXJzZUVycm9yIiwiZXJyb3IiLCJyZW1vdmVJdGVtIiwibWVzc2FnZSIsInRpbWVyIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsInVuc3Vic2NyaWJlIiwidWlkIiwic2Vzc2lvbklkIiwic25hcHNob3QiLCJleGlzdHMiLCJzZXNzaW9uRGF0YSIsImRhdGEiLCJhY3RpdmUiLCJpc1ZhbGlkIiwic2Vzc2lvbkNoZWNrSW50ZXJ2YWwiLCJjaGVja0N1cnJlbnRTZXNzaW9uIiwidXNlclJlZiIsInVzZXJEb2MiLCJjdXJyZW50U2Vzc2lvblRva2VuIiwic2Vzc2lvblRva2VuIiwiYWxlcnQiLCJsYXN0QWN0aXZpdHkiLCJ0b0RhdGUiLCJ0aW1lRGlmZiIsImdldFRpbWUiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJyZXN1bHQiLCJzdWNjZXNzIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImxhc3RMb2dpbiIsInVzZXJJZCIsInJvbGUiLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImFjdGlvbiIsImxvZ0Vycm9yIiwid2FybiIsImludmFsaWRhdGVDdXJyZW50U2Vzc2lvbiIsImNhdGNoIiwiZXJyIiwidmFsdWUiLCJoYXNMb2dpbiIsImhhc0xvZ291dCIsIlByb3ZpZGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/context/AuthContext.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./app/lib/dataAccess.js":
/*!*******************************!*\
  !*** ./app/lib/dataAccess.js ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addUser: () => (/* binding */ addUser),\n/* harmony export */   checkActiveSession: () => (/* binding */ checkActiveSession),\n/* harmony export */   checkLast7DaysData: () => (/* binding */ checkLast7DaysData),\n/* harmony export */   createUserSession: () => (/* binding */ createUserSession),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   deleteWardDataDraft: () => (/* binding */ deleteWardDataDraft),\n/* harmony export */   findUserByUsername: () => (/* binding */ findUserByUsername),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getLatestDraft: () => (/* binding */ getLatestDraft),\n/* harmony export */   getStaffRecords: () => (/* binding */ getStaffRecords),\n/* harmony export */   getUserDrafts: () => (/* binding */ getUserDrafts),\n/* harmony export */   getWardDailyRecords: () => (/* binding */ getWardDailyRecords),\n/* harmony export */   invalidateSession: () => (/* binding */ invalidateSession),\n/* harmony export */   logWardDataHistory: () => (/* binding */ logWardDataHistory),\n/* harmony export */   loginUser: () => (/* binding */ loginUser),\n/* harmony export */   saveStaffRecord: () => (/* binding */ saveStaffRecord),\n/* harmony export */   saveWardDailyRecord: () => (/* binding */ saveWardDailyRecord),\n/* harmony export */   saveWardDataDraft: () => (/* binding */ saveWardDataDraft),\n/* harmony export */   updateAllUsersNameFields: () => (/* binding */ updateAllUsersNameFields),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   validateSession: () => (/* binding */ validateSession)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./app/lib/firebase.js\");\n/* __next_internal_client_entry_do_not_use__ findUserByUsername,loginUser,getWardDailyRecords,getStaffRecords,saveStaffRecord,saveWardDailyRecord,getAllUsers,addUser,updateUser,deleteUser,updateAllUsersNameFields,checkActiveSession,invalidateSession,createUserSession,validateSession,checkLast7DaysData,saveWardDataDraft,getUserDrafts,deleteWardDataDraft,getLatestDraft,logWardDataHistory auto */ \n\n// สถานะการใช้งานโหมดจำลองข้อมูล\nlet useMockData = false; // ใช้ Firebase โดยตรง\n// รีเซ็ตค่าใน localStorage เพื่อให้แน่ใจว่าใช้ค่า false\nif (true) {\n    localStorage.removeItem('useMockData');\n    localStorage.setItem('useMockData', 'false');\n}\n/**\r\n * ฟังก์ชันค้นหาผู้ใช้ตาม username\r\n */ const findUserByUsername = async (username)=>{\n    try {\n        const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'users');\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('username', '==', username));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (querySnapshot.empty) {\n            return null;\n        }\n        const userDoc = querySnapshot.docs[0];\n        return {\n            id: userDoc.id,\n            ...userDoc.data()\n        };\n    } catch (error) {\n        console.error('Error finding user:', error.message);\n        throw error;\n    }\n};\n/**\r\n * ฟังก์ชันเข้าสู่ระบบ\r\n */ const loginUser = async (username, password)=>{\n    try {\n        const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'users');\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('username', '==', username));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (querySnapshot.empty) {\n            console.log(\"User not found in database:\", username);\n            return {\n                success: false,\n                error: 'User not found'\n            };\n        }\n        const userDoc = querySnapshot.docs[0].data();\n        const userId = querySnapshot.docs[0].id;\n        console.log(\"Found user:\", username, \"Checking password...\");\n        if (userDoc.password !== password) {\n            console.log(\"Invalid password for user:\", username);\n            return {\n                success: false,\n                error: 'Invalid password'\n            };\n        }\n        console.log(\"Login successful for user:\", username);\n        // ตรวจสอบว่าผู้ใช้มี active session อยู่หรือไม่\n        const existingSession = await checkActiveSession(userId);\n        if (existingSession) {\n            // ถ้ามี session อยู่แล้ว ให้ทำการยกเลิก session เก่า\n            await invalidateSession(existingSession.id);\n        }\n        // สร้าง session ใหม่\n        const sessionId = await createUserSession(userId, username);\n        return {\n            success: true,\n            user: {\n                uid: userId,\n                sessionId: sessionId,\n                ...userDoc\n            }\n        };\n    } catch (error) {\n        console.error('Login error:', error.message);\n        return {\n            success: false,\n            error: 'Login failed: ' + error.message\n        };\n    }\n};\n/**\r\n * ฟังก์ชันดึงข้อมูล ward daily records\r\n */ const getWardDailyRecords = async function(date) {\n    let wardId = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;\n    try {\n        const wardDailyRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'wardDailyRecords');\n        let q;\n        if (wardId) {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(wardDailyRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('date', '==', date), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('wardId', '==', wardId));\n        } else {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(wardDailyRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('date', '==', date));\n        }\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return querySnapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    } catch (error) {\n        console.error('Error getting ward records:', error.message);\n        return [];\n    }\n};\n/**\r\n * ฟังก์ชันดึงข้อมูล staff records\r\n */ const getStaffRecords = async function(date) {\n    let shift = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;\n    try {\n        const recordsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'staffRecords');\n        let q;\n        if (shift) {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(recordsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('date', '==', date), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('shift', '==', shift));\n        } else {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(recordsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('date', '==', date));\n        }\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return querySnapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    } catch (error) {\n        console.error('Error getting staff records:', error.message);\n        return [];\n    }\n};\n/**\r\n * ฟังก์ชันบันทึกข้อมูล staff records\r\n */ const saveStaffRecord = async function(recordData) {\n    let recordId = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;\n    try {\n        if (recordId) {\n            // Update existing record\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'staffRecords', recordId), {\n                ...recordData,\n                lastModified: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n            });\n            return {\n                success: true,\n                id: recordId\n            };\n        } else {\n            // Create new record\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'staffRecords'), {\n                ...recordData,\n                timestamp: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n                lastModified: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n            });\n            return {\n                success: true,\n                id: docRef.id\n            };\n        }\n    } catch (error) {\n        console.error('Error saving staff record:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n/**\r\n * ฟังก์ชันบันทึกข้อมูล ward daily records\r\n */ const saveWardDailyRecord = async (wardData)=>{\n    try {\n        const { wardId, date } = wardData;\n        const docId = \"\".concat(date, \"_\").concat(wardId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'wardDailyRecords', docId), {\n            ...wardData,\n            lastUpdated: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        }, {\n            merge: true\n        });\n        return {\n            success: true,\n            id: docId\n        };\n    } catch (error) {\n        console.error('Error saving ward daily record:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n/**\r\n * ฟังก์ชันดึงข้อมูลผู้ใช้ทั้งหมด\r\n */ const getAllUsers = async ()=>{\n    try {\n        const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'users');\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(usersRef);\n        return querySnapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    } catch (error) {\n        console.error('Error getting users:', error.message);\n        return [];\n    }\n};\n/**\r\n * ฟังก์ชันเพิ่มผู้ใช้ใหม่\r\n */ const addUser = async (userData)=>{\n    try {\n        const userDataWithTimestamps = {\n            ...userData,\n            createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        };\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'users'), userDataWithTimestamps);\n        return {\n            success: true,\n            id: docRef.id\n        };\n    } catch (error) {\n        console.error('Error adding user:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n/**\r\n * ฟังก์ชันอัพเดทข้อมูลผู้ใช้\r\n */ const updateUser = async (userId, userData)=>{\n    try {\n        const userDataWithTimestamp = {\n            ...userData,\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        };\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'users', userId), userDataWithTimestamp);\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error('Error updating user:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n/**\r\n * ฟังก์ชันลบผู้ใช้\r\n */ const deleteUser = async (userId)=>{\n    try {\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'users', userId));\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error('Error deleting user:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n/**\r\n * ฟังก์ชันอัพเดทข้อมูล firstName, lastName และ position จาก fullName และ role สำหรับผู้ใช้ทั้งหมด\r\n * สำหรับ Admin ใช้งาน (กรณีที่ต้องการอัพเดทข้อมูลทั้งหมดในครั้งเดียว)\r\n */ const updateAllUsersNameFields = async ()=>{\n    try {\n        const users = await getAllUsers();\n        const updatePromises = users.map(async (user)=>{\n            const updates = {};\n            // แยก firstname และ lastname จาก fullName\n            if ((!user.firstName || !user.lastName) && user.fullName) {\n                const nameParts = (user.fullName || '').split(' ');\n                updates.firstName = nameParts[0] || '';\n                updates.lastName = nameParts.slice(1).join(' ') || '';\n            }\n            // กำหนด position ตาม role ถ้ายังไม่มี\n            if (!user.position) {\n                if (user.role && user.role.toLowerCase() === 'admin') {\n                    updates.position = 'ผู้ดูแลระบบ';\n                } else {\n                    updates.position = 'เจ้าหน้าที่พยาบาล'; // ค่าเริ่มต้นสำหรับ user ทั่วไป\n                }\n            }\n            // อัพเดทเฉพาะถ้ามีข้อมูลที่ต้องอัพเดท\n            if (Object.keys(updates).length > 0) {\n                updates.updatedAt = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)();\n                return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'users', user.id), updates);\n            }\n            return Promise.resolve(); // ไม่ต้องอัพเดทถ้าไม่มีข้อมูลที่ต้องเปลี่ยน\n        });\n        await Promise.all(updatePromises);\n        return {\n            success: true,\n            message: 'Updated all users successfully'\n        };\n    } catch (error) {\n        console.error('Error updating users:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n/**\r\n * ฟังก์ชันตรวจสอบ active session ของผู้ใช้\r\n */ const checkActiveSession = async (userId)=>{\n    try {\n        const sessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'userSessions');\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(sessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('userId', '==', userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('active', '==', true));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (querySnapshot.empty) {\n            return null;\n        }\n        // ถ้ามี session ที่ active อยู่ ให้ return ข้อมูล session นั้น\n        const sessionDoc = querySnapshot.docs[0];\n        return {\n            id: sessionDoc.id,\n            ...sessionDoc.data()\n        };\n    } catch (error) {\n        console.error('Error checking active session:', error.message);\n        return null;\n    }\n};\n/**\r\n * ฟังก์ชันยกเลิก session\r\n */ const invalidateSession = async (sessionId)=>{\n    try {\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'userSessions', sessionId), {\n            active: false,\n            logoutTime: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n        return true;\n    } catch (error) {\n        console.error('Error invalidating session:', error.message);\n        return false;\n    }\n};\n/**\r\n * ฟังก์ชันสร้าง session ใหม่\r\n * @param {string} userId - ID ของผู้ใช้\r\n * @param {string} username - ชื่อผู้ใช้\r\n * @returns {Promise<string>} - ID ของ session ที่สร้าง\r\n */ const createUserSession = async (userId, username)=>{\n    try {\n        // สร้าง sessionId ที่มีความหมายโดยใช้วันที่และเวลา\n        const now = new Date();\n        const formattedDate = now.toISOString().split('T')[0].replace(/-/g, ''); // YYYYMMDD\n        const formattedTime = now.toISOString().split('T')[1].substring(0, 8).replace(/:/g, ''); // HHMMSS\n        // สร้าง sessionId แบบมีความหมาย: userId_YYYYMMDD_HHMMSS\n        const sessionId = \"\".concat(userId, \"_\").concat(formattedDate, \"_\").concat(formattedTime);\n        const sessionData = {\n            userId,\n            username,\n            loginTime: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n            active: true,\n            device:  true ? navigator.userAgent : 0,\n            ip: 'Unknown',\n            createdAt: formattedDate + '_' + formattedTime // เก็บเวลาที่สร้างในรูปแบบที่อ่านง่าย\n        };\n        // ใช้ setDoc แทน addDoc เพื่อกำหนด ID เอง\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'userSessions', sessionId), sessionData);\n        return sessionId;\n    } catch (error) {\n        console.error('Error creating user session:', error.message);\n        throw error;\n    }\n};\n/**\r\n * ฟังก์ชันตรวจสอบความถูกต้องของ session\r\n */ const validateSession = async (userId, sessionId)=>{\n    if (!userId || !sessionId) return false;\n    try {\n        const sessionDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'userSessions', sessionId));\n        if (!sessionDoc.exists()) {\n            return false;\n        }\n        const sessionData = sessionDoc.data();\n        return sessionData.userId === userId && sessionData.active === true;\n    } catch (error) {\n        console.error('Error validating session:', error.message);\n        return false;\n    }\n};\n/**\r\n * ฟังก์ชันตรวจสอบข้อมูลย้อนหลัง 7 วัน\r\n * @param {string} wardId - รหัสวอร์ด\r\n * @param {Date} currentDate - วันที่ปัจจุบัน\r\n * @returns {Promise<Object>} - ผลการตรวจสอบข้อมูล\r\n */ const checkLast7DaysData = async (wardId, currentDate)=>{\n    try {\n        // คำนวณวันที่ 7 วันย้อนหลัง\n        const sevenDaysAgo = new Date(currentDate);\n        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n        // แปลงวันที่เป็น string format ปี-เดือน-วัน\n        const formatDate = (date)=>{\n            const year = date.getFullYear();\n            const month = String(date.getMonth() + 1).padStart(2, '0');\n            const day = String(date.getDate()).padStart(2, '0');\n            return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n        };\n        const currentDateString = formatDate(currentDate);\n        const sevenDaysAgoString = formatDate(sevenDaysAgo);\n        // สร้างรายการวันที่ทั้ง 7 วันที่ผ่านมา\n        const dateList = [];\n        for(let i = 1; i <= 7; i++){\n            const date = new Date(currentDate);\n            date.setDate(date.getDate() - i);\n            dateList.push(formatDate(date));\n        }\n        // ตรวจสอบข้อมูลใน wardData collection\n        const wardDataRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'wardDataFinal');\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(wardDataRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('wardId', '==', wardId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('date', 'in', dateList));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        // เก็บวันที่ที่มีข้อมูล\n        const datesWithData = new Set();\n        querySnapshot.docs.forEach((doc)=>{\n            const data = doc.data();\n            datesWithData.add(data.date);\n        });\n        // ถ้าไม่มีข้อมูลย้อนหลัง 7 วันเลย\n        if (datesWithData.size === 0) {\n            return {\n                hasData: false,\n                message: 'ไม่พบข้อมูลย้อนหลัง 7 วันที่ผ่านมา กรุณาติดต่อผู้ดูแลระบบเพื่อตรวจสอบ',\n                datesChecked: dateList,\n                datesWithData: Array.from(datesWithData)\n            };\n        }\n        // ถ้ามีข้อมูลอย่างน้อย 1 วัน\n        return {\n            hasData: true,\n            message: 'พบข้อมูลย้อนหลังในช่วง 7 วันที่ผ่านมา',\n            datesChecked: dateList,\n            datesWithData: Array.from(datesWithData)\n        };\n    } catch (error) {\n        console.error('Error checking last 7 days data:', error.message);\n        return {\n            hasData: false,\n            error: error.message,\n            message: 'เกิดข้อผิดพลาดในการตรวจสอบข้อมูลย้อนหลัง 7 วัน'\n        };\n    }\n};\n/**\r\n * ฟังก์ชันบันทึกข้อมูลฉบับร่าง (Save Draft)\r\n * @param {Object} draftData - ข้อมูลฉบับร่าง\r\n * @returns {Promise<Object>} - ผลการบันทึกข้อมูล\r\n */ const saveWardDataDraft = async (draftData)=>{\n    try {\n        const { wardId, date, shift, userId } = draftData;\n        // สร้าง docId ที่ไม่ซ้ำกัน โดยรวม wardId, date, shift และ userId\n        const docId = \"\".concat(wardId, \"_\").concat(date, \"_\").concat(shift, \"_\").concat(userId);\n        // เพิ่ม timestamp\n        const dataWithTimestamp = {\n            ...draftData,\n            lastUpdated: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n            isDraft: true\n        };\n        // บันทึกลงใน collection wardDataDrafts\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'wardDataDrafts', docId), dataWithTimestamp, {\n            merge: true\n        });\n        return {\n            success: true,\n            id: docId,\n            message: 'บันทึกข้อมูลฉบับร่างเรียบร้อยแล้ว'\n        };\n    } catch (error) {\n        console.error('Error saving ward data draft:', error.message);\n        return {\n            success: false,\n            error: error.message,\n            message: 'เกิดข้อผิดพลาดในการบันทึกข้อมูลฉบับร่าง'\n        };\n    }\n};\n/**\r\n * ฟังก์ชันดึงข้อมูลฉบับร่างของผู้ใช้\r\n * @param {string} userId - รหัสผู้ใช้\r\n * @param {string} wardId - รหัสวอร์ด (optional)\r\n * @param {string} date - วันที่ (optional)\r\n * @param {string} shift - กะ (optional)\r\n * @returns {Promise<Array>} - รายการข้อมูลฉบับร่าง\r\n */ const getUserDrafts = async function(userId) {\n    let wardId = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null, date = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null, shift = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : null;\n    try {\n        const draftsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'wardDataDrafts');\n        let conditions = [\n            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('userId', '==', userId)\n        ];\n        if (wardId) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('wardId', '==', wardId));\n        }\n        if (date) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('date', '==', date));\n        }\n        if (shift) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('shift', '==', shift));\n        }\n        // สร้าง query ตามเงื่อนไขที่กำหนด\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(draftsRef, ...conditions);\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (querySnapshot.empty) {\n            return [];\n        }\n        return querySnapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    } catch (error) {\n        console.error('Error getting user drafts:', error.message);\n        return [];\n    }\n};\n/**\r\n * ฟังก์ชันลบข้อมูลฉบับร่าง\r\n * @param {string} draftId - รหัสฉบับร่าง\r\n * @returns {Promise<Object>} - ผลการลบข้อมูล\r\n */ const deleteWardDataDraft = async (draftId)=>{\n    try {\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'wardDataDrafts', draftId));\n        return {\n            success: true,\n            message: 'ลบข้อมูลฉบับร่างเรียบร้อยแล้ว'\n        };\n    } catch (error) {\n        console.error('Error deleting ward data draft:', error.message);\n        return {\n            success: false,\n            error: error.message,\n            message: 'เกิดข้อผิดพลาดในการลบข้อมูลฉบับร่าง'\n        };\n    }\n};\n/**\r\n * ฟังก์ชันดึงข้อมูลฉบับร่างล่าสุดของผู้ใช้\r\n * @param {string} userId - รหัสผู้ใช้\r\n * @param {string} wardId - รหัสวอร์ด\r\n * @param {string} date - วันที่\r\n * @param {string} shift - กะ\r\n * @returns {Promise<Object|null>} - ข้อมูลฉบับร่างล่าสุด หรือ null ถ้าไม่มี\r\n */ const getLatestDraft = async (userId, wardId, date, shift)=>{\n    try {\n        // ค้นหาฉบับร่างล่าสุดตามเงื่อนไข\n        const draftsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'wardDataDrafts');\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(draftsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('userId', '==', userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('wardId', '==', wardId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('date', '==', date), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)('shift', '==', shift));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (querySnapshot.empty) {\n            return null;\n        }\n        // หากมีหลายฉบับร่าง ให้เลือกฉบับล่าสุดตาม timestamp\n        let latestDraft = null;\n        let latestTimestamp = 0;\n        querySnapshot.docs.forEach((doc)=>{\n            var _data_lastUpdated;\n            const data = doc.data();\n            const timestamp = ((_data_lastUpdated = data.lastUpdated) === null || _data_lastUpdated === void 0 ? void 0 : _data_lastUpdated.seconds) || 0;\n            if (timestamp > latestTimestamp) {\n                latestTimestamp = timestamp;\n                latestDraft = {\n                    id: doc.id,\n                    ...data\n                };\n            }\n        });\n        return latestDraft;\n    } catch (error) {\n        console.error('Error getting latest draft:', error.message);\n        return null;\n    }\n};\n/**\r\n * บันทึกประวัติการเปลี่ยนแปลงข้อมูล ward\r\n * @param {Object} wardData - ข้อมูลที่จะบันทึก\r\n * @param {string} action - ประเภทการกระทำ (create, update, delete)\r\n * @param {string} userId - ID ของผู้ใช้ที่ทำรายการ\r\n * @returns {Promise<Object>} - ผลลัพธ์การบันทึก\r\n */ const logWardDataHistory = async (wardData, action, userId)=>{\n    try {\n        const now = new Date();\n        const formattedDate = now.toISOString().split('T')[0].replace(/-/g, ''); // YYYYMMDD\n        const formattedTime = now.toISOString().split('T')[1].substring(0, 8).replace(/:/g, ''); // HHMMSS\n        const historyId = \"\".concat(wardData.wardId, \"_\").concat(formattedDate, \"_\").concat(formattedTime);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, 'wardDataHistory', historyId), {\n            ...wardData,\n            action,\n            userId,\n            historyTimestamp: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n            historyDate: formattedDate,\n            historyTime: formattedTime\n        });\n        return {\n            success: true,\n            historyId\n        };\n    } catch (error) {\n        console.error('Error logging ward data history:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9saWIvZGF0YUFjY2Vzcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2WUFFMkk7QUFDM0c7QUFFaEMsZ0NBQWdDO0FBQ2hDLElBQUlZLGNBQWMsT0FBTyxzQkFBc0I7QUFFL0Msd0RBQXdEO0FBQ3hELElBQUksSUFBNkIsRUFBRTtJQUNqQ0MsYUFBYUMsVUFBVSxDQUFDO0lBQ3hCRCxhQUFhRSxPQUFPLENBQUMsZUFBZTtBQUN0QztBQUVBOztDQUVDLEdBQ00sTUFBTUMscUJBQXFCLE9BQU9DO0lBQ3ZDLElBQUk7UUFDRixNQUFNQyxXQUFXbEIsOERBQVVBLENBQUNXLHlDQUFFQSxFQUFFO1FBQ2hDLE1BQU1RLElBQUlsQix5REFBS0EsQ0FBQ2lCLFVBQVVoQix5REFBS0EsQ0FBQyxZQUFZLE1BQU1lO1FBQ2xELE1BQU1HLGdCQUFnQixNQUFNakIsMkRBQU9BLENBQUNnQjtRQUVwQyxJQUFJQyxjQUFjQyxLQUFLLEVBQUU7WUFDdkIsT0FBTztRQUNUO1FBRUEsTUFBTUMsVUFBVUYsY0FBY0csSUFBSSxDQUFDLEVBQUU7UUFDckMsT0FBTztZQUNMQyxJQUFJRixRQUFRRSxFQUFFO1lBQ2QsR0FBR0YsUUFBUUcsSUFBSSxFQUFFO1FBQ25CO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx1QkFBdUJBLE1BQU1FLE9BQU87UUFDbEQsTUFBTUY7SUFDUjtBQUNGLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1HLFlBQVksT0FBT1osVUFBVWE7SUFDeEMsSUFBSTtRQUNGLE1BQU1aLFdBQVdsQiw4REFBVUEsQ0FBQ1cseUNBQUVBLEVBQUU7UUFDaEMsTUFBTVEsSUFBSWxCLHlEQUFLQSxDQUFDaUIsVUFBVWhCLHlEQUFLQSxDQUFDLFlBQVksTUFBTWU7UUFDbEQsTUFBTUcsZ0JBQWdCLE1BQU1qQiwyREFBT0EsQ0FBQ2dCO1FBRXBDLElBQUlDLGNBQWNDLEtBQUss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QU87UUFDMUQsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVGOzs7Ozs7Q0FNQyxHQUNNLE1BQU15SCxxQkFBcUIsT0FBTzdGLFVBQVU4RixRQUFRckg7SUFDekQsSUFBSTtRQUNGLE1BQU00RCxNQUFNLElBQUlDO1FBQ2hCLE1BQU1DLGdCQUFnQkYsSUFBSUcsV0FBVyxHQUFHbkIsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUNvQixPQUFPLENBQUMsTUFBTSxLQUFLLFdBQVc7UUFDcEYsTUFBTUMsZ0JBQWdCTCxJQUFJRyxXQUFXLEdBQUduQixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQ3NCLFNBQVMsQ0FBQyxHQUFHLEdBQUdGLE9BQU8sQ0FBQyxNQUFNLEtBQUssU0FBUztRQUNsRyxNQUFNc0QsWUFBWSxHQUFzQnhELE9BQW5CdkMsU0FBU2IsTUFBTSxFQUFDLEtBQW9CdUQsT0FBakJILGVBQWMsS0FBaUIsT0FBZEc7UUFFekQsTUFBTTVGLDBEQUFNQSxDQUFDRix1REFBR0EsQ0FBQ08seUNBQUVBLEVBQUUsbUJBQW1CNEksWUFBWTtZQUNsRCxHQUFHL0YsUUFBUTtZQUNYOEY7WUFDQXJIO1lBQ0F1SCxrQkFBa0I5SSxtRUFBZUE7WUFDakMrSSxhQUFhMUQ7WUFDYjJELGFBQWF4RDtRQUNmO1FBRUEsT0FBTztZQUNMbEUsU0FBUztZQUNUdUg7UUFDRjtJQUNGLEVBQUUsT0FBTzdILE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLG9DQUFvQ0EsTUFBTUUsT0FBTztRQUMvRCxPQUFPO1lBQ0xJLFNBQVM7WUFDVE4sT0FBT0EsTUFBTUUsT0FBTztRQUN0QjtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCX1NJUlxcT25lRHJpdmVcXOC5gOC4lOC4quC4geC5jOC4l+C5h+C4reC4m1xcQWN0aXZlIDE0LTMtMjAyNVxcU3VtbWFyeV9vZl9QZXJzb25uZWxfUmF0aW9cXGFwcFxcbGliXFxkYXRhQWNjZXNzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IGNvbGxlY3Rpb24sIHF1ZXJ5LCB3aGVyZSwgZ2V0RG9jcywgZG9jLCBnZXREb2MsIHNldERvYywgdXBkYXRlRG9jLCBkZWxldGVEb2MsIGFkZERvYywgc2VydmVyVGltZXN0YW1wIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuL2ZpcmViYXNlJztcclxuXHJcbi8vIOC4quC4luC4suC4meC4sOC4geC4suC4o+C5g+C4iuC5ieC4h+C4suC4meC5guC4q+C4oeC4lOC4iOC4s+C4peC4reC4h+C4guC5ieC4reC4oeC4ueC4pVxyXG5sZXQgdXNlTW9ja0RhdGEgPSBmYWxzZTsgLy8g4LmD4LiK4LmJIEZpcmViYXNlIOC5guC4lOC4ouC4leC4o+C4h1xyXG5cclxuLy8g4Lij4Li14LmA4LiL4LmH4LiV4LiE4LmI4Liy4LmD4LiZIGxvY2FsU3RvcmFnZSDguYDguJ7guLfguYjguK3guYPguKvguYnguYHguJnguYjguYPguIjguKfguYjguLLguYPguIrguYnguITguYjguLIgZmFsc2VcclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZU1vY2tEYXRhJyk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZU1vY2tEYXRhJywgJ2ZhbHNlJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDguJ/guLHguIfguIHguYzguIrguLHguJnguITguYnguJnguKvguLLguJzguLnguYnguYPguIrguYnguJXguLLguKEgdXNlcm5hbWVcclxuICovXHJcbmV4cG9ydCBjb25zdCBmaW5kVXNlckJ5VXNlcm5hbWUgPSBhc3luYyAodXNlcm5hbWUpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcclxuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2Vyc1JlZiwgd2hlcmUoJ3VzZXJuYW1lJywgJz09JywgdXNlcm5hbWUpKTtcclxuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG4gICAgXHJcbiAgICBpZiAocXVlcnlTbmFwc2hvdC5lbXB0eSkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgdXNlckRvYyA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiB1c2VyRG9jLmlkLFxyXG4gICAgICAuLi51c2VyRG9jLmRhdGEoKVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyB1c2VyOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4mlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGxvZ2luVXNlciA9IGFzeW5jICh1c2VybmFtZSwgcGFzc3dvcmQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcclxuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2Vyc1JlZiwgd2hlcmUoJ3VzZXJuYW1lJywgJz09JywgdXNlcm5hbWUpKTtcclxuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG4gICAgXHJcbiAgICBpZiAocXVlcnlTbmFwc2hvdC5lbXB0eSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlVzZXIgbm90IGZvdW5kIGluIGRhdGFiYXNlOlwiLCB1c2VybmFtZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB1c2VyRG9jID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcclxuICAgIGNvbnN0IHVzZXJJZCA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXS5pZDtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coXCJGb3VuZCB1c2VyOlwiLCB1c2VybmFtZSwgXCJDaGVja2luZyBwYXNzd29yZC4uLlwiKTtcclxuICAgIFxyXG4gICAgaWYgKHVzZXJEb2MucGFzc3dvcmQgIT09IHBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCBwYXNzd29yZCBmb3IgdXNlcjpcIiwgdXNlcm5hbWUpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIHBhc3N3b3JkJyB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhcIkxvZ2luIHN1Y2Nlc3NmdWwgZm9yIHVzZXI6XCIsIHVzZXJuYW1lKTtcclxuICAgIFxyXG4gICAgLy8g4LiV4Lij4Lin4LiI4Liq4Lit4Lia4Lin4LmI4Liy4Lic4Li54LmJ4LmD4LiK4LmJ4Lih4Li1IGFjdGl2ZSBzZXNzaW9uIOC4reC4ouC4ueC5iOC4q+C4o+C4t+C4reC5hOC4oeC5iFxyXG4gICAgY29uc3QgZXhpc3RpbmdTZXNzaW9uID0gYXdhaXQgY2hlY2tBY3RpdmVTZXNzaW9uKHVzZXJJZCk7XHJcbiAgICBpZiAoZXhpc3RpbmdTZXNzaW9uKSB7XHJcbiAgICAgIC8vIOC4luC5ieC4suC4oeC4tSBzZXNzaW9uIOC4reC4ouC4ueC5iOC5geC4peC5ieC4pyDguYPguKvguYnguJfguLPguIHguLLguKPguKLguIHguYDguKXguLTguIEgc2Vzc2lvbiDguYDguIHguYjguLJcclxuICAgICAgYXdhaXQgaW52YWxpZGF0ZVNlc3Npb24oZXhpc3RpbmdTZXNzaW9uLmlkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g4Liq4Lij4LmJ4Liy4LiHIHNlc3Npb24g4LmD4Lir4Lih4LmIXHJcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCBjcmVhdGVVc2VyU2Vzc2lvbih1c2VySWQsIHVzZXJuYW1lKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgXHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgICB1c2VyOiB7XHJcbiAgICAgICAgdWlkOiB1c2VySWQsXHJcbiAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXHJcbiAgICAgICAgLi4udXNlckRvY1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdMb2dpbiBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0xvZ2luIGZhaWxlZDogJyArIGVycm9yLm1lc3NhZ2UgfTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICog4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4LiU4Li24LiH4LiC4LmJ4Lit4Lih4Li54LilIHdhcmQgZGFpbHkgcmVjb3Jkc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGdldFdhcmREYWlseVJlY29yZHMgPSBhc3luYyAoZGF0ZSwgd2FyZElkID0gbnVsbCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB3YXJkRGFpbHlSZWYgPSBjb2xsZWN0aW9uKGRiLCAnd2FyZERhaWx5UmVjb3JkcycpO1xyXG4gICAgbGV0IHE7XHJcbiAgICBcclxuICAgIGlmICh3YXJkSWQpIHtcclxuICAgICAgcSA9IHF1ZXJ5KFxyXG4gICAgICAgIHdhcmREYWlseVJlZixcclxuICAgICAgICB3aGVyZSgnZGF0ZScsICc9PScsIGRhdGUpLFxyXG4gICAgICAgIHdoZXJlKCd3YXJkSWQnLCAnPT0nLCB3YXJkSWQpXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBxID0gcXVlcnkoXHJcbiAgICAgICAgd2FyZERhaWx5UmVmLFxyXG4gICAgICAgIHdoZXJlKCdkYXRlJywgJz09JywgZGF0ZSlcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgICBcclxuICAgIHJldHVybiBxdWVyeVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoe1xyXG4gICAgICBpZDogZG9jLmlkLFxyXG4gICAgICAuLi5kb2MuZGF0YSgpXHJcbiAgICB9KSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgd2FyZCByZWNvcmRzOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiDguJ/guLHguIfguIHguYzguIrguLHguJnguJTguLbguIfguILguYnguK3guKHguLnguKUgc3RhZmYgcmVjb3Jkc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGdldFN0YWZmUmVjb3JkcyA9IGFzeW5jIChkYXRlLCBzaGlmdCA9IG51bGwpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVjb3Jkc1JlZiA9IGNvbGxlY3Rpb24oZGIsICdzdGFmZlJlY29yZHMnKTtcclxuICAgIGxldCBxO1xyXG4gICAgXHJcbiAgICBpZiAoc2hpZnQpIHtcclxuICAgICAgcSA9IHF1ZXJ5KFxyXG4gICAgICAgIHJlY29yZHNSZWYsXHJcbiAgICAgICAgd2hlcmUoJ2RhdGUnLCAnPT0nLCBkYXRlKSxcclxuICAgICAgICB3aGVyZSgnc2hpZnQnLCAnPT0nLCBzaGlmdClcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHEgPSBxdWVyeShcclxuICAgICAgICByZWNvcmRzUmVmLFxyXG4gICAgICAgIHdoZXJlKCdkYXRlJywgJz09JywgZGF0ZSlcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XHJcbiAgICBcclxuICAgIHJldHVybiBxdWVyeVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoe1xyXG4gICAgICBpZDogZG9jLmlkLFxyXG4gICAgICAuLi5kb2MuZGF0YSgpXHJcbiAgICB9KSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgc3RhZmYgcmVjb3JkczonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICog4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4Lia4Lix4LiZ4LiX4Li24LiB4LiC4LmJ4Lit4Lih4Li54LilIHN0YWZmIHJlY29yZHNcclxuICovXHJcbmV4cG9ydCBjb25zdCBzYXZlU3RhZmZSZWNvcmQgPSBhc3luYyAocmVjb3JkRGF0YSwgcmVjb3JkSWQgPSBudWxsKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmIChyZWNvcmRJZCkge1xyXG4gICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcmVjb3JkXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdzdGFmZlJlY29yZHMnLCByZWNvcmRJZCksIHtcclxuICAgICAgICAuLi5yZWNvcmREYXRhLFxyXG4gICAgICAgIGxhc3RNb2RpZmllZDogc2VydmVyVGltZXN0YW1wKClcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGlkOiByZWNvcmRJZCB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQ3JlYXRlIG5ldyByZWNvcmRcclxuICAgICAgY29uc3QgZG9jUmVmID0gYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdzdGFmZlJlY29yZHMnKSwge1xyXG4gICAgICAgIC4uLnJlY29yZERhdGEsXHJcbiAgICAgICAgdGltZXN0YW1wOiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAgICAgICBsYXN0TW9kaWZpZWQ6IHNlcnZlclRpbWVzdGFtcCgpXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBpZDogZG9jUmVmLmlkIH07XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBzdGFmZiByZWNvcmQ6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICog4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4Lia4Lix4LiZ4LiX4Li24LiB4LiC4LmJ4Lit4Lih4Li54LilIHdhcmQgZGFpbHkgcmVjb3Jkc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNhdmVXYXJkRGFpbHlSZWNvcmQgPSBhc3luYyAod2FyZERhdGEpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB3YXJkSWQsIGRhdGUgfSA9IHdhcmREYXRhO1xyXG4gICAgY29uc3QgZG9jSWQgPSBgJHtkYXRlfV8ke3dhcmRJZH1gO1xyXG4gICAgXHJcbiAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCAnd2FyZERhaWx5UmVjb3JkcycsIGRvY0lkKSwge1xyXG4gICAgICAuLi53YXJkRGF0YSxcclxuICAgICAgbGFzdFVwZGF0ZWQ6IHNlcnZlclRpbWVzdGFtcCgpXHJcbiAgICB9LCB7IG1lcmdlOiB0cnVlIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBpZDogZG9jSWQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHdhcmQgZGFpbHkgcmVjb3JkOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC4lOC4tuC4h+C4guC5ieC4reC4oeC4ueC4peC4nOC4ueC5ieC5g+C4iuC5ieC4l+C4seC5ieC4h+C4q+C4oeC4lFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGdldEFsbFVzZXJzID0gYXN5bmMgKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xyXG4gICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModXNlcnNSZWYpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHtcclxuICAgICAgaWQ6IGRvYy5pZCxcclxuICAgICAgLi4uZG9jLmRhdGEoKVxyXG4gICAgfSkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXJzOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiDguJ/guLHguIfguIHguYzguIrguLHguJnguYDguJ7guLTguYjguKHguJzguLnguYnguYPguIrguYnguYPguKvguKHguYhcclxuICovXHJcbmV4cG9ydCBjb25zdCBhZGRVc2VyID0gYXN5bmMgKHVzZXJEYXRhKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJEYXRhV2l0aFRpbWVzdGFtcHMgPSB7XHJcbiAgICAgIC4uLnVzZXJEYXRhLFxyXG4gICAgICBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxyXG4gICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpXHJcbiAgICB9O1xyXG4gICAgY29uc3QgZG9jUmVmID0gYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICd1c2VycycpLCB1c2VyRGF0YVdpdGhUaW1lc3RhbXBzKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGlkOiBkb2NSZWYuaWQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIHVzZXI6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICog4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4Lit4Lix4Lie4LmA4LiU4LiX4LiC4LmJ4Lit4Lih4Li54Lil4Lic4Li54LmJ4LmD4LiK4LmJXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jICh1c2VySWQsIHVzZXJEYXRhKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJEYXRhV2l0aFRpbWVzdGFtcCA9IHtcclxuICAgICAgLi4udXNlckRhdGEsXHJcbiAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKClcclxuICAgIH07XHJcbiAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VySWQpLCB1c2VyRGF0YVdpdGhUaW1lc3RhbXApO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC4peC4muC4nOC4ueC5ieC5g+C4iuC5iVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVVzZXIgPSBhc3luYyAodXNlcklkKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICd1c2VycycsIHVzZXJJZCkpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyB1c2VyOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC4reC4seC4nuC5gOC4lOC4l+C4guC5ieC4reC4oeC4ueC4pSBmaXJzdE5hbWUsIGxhc3ROYW1lIOC5geC4peC4sCBwb3NpdGlvbiDguIjguLLguIEgZnVsbE5hbWUg4LmB4Lil4LiwIHJvbGUg4Liq4Liz4Lir4Lij4Lix4Lia4Lic4Li54LmJ4LmD4LiK4LmJ4LiX4Lix4LmJ4LiH4Lir4Lih4LiUXHJcbiAqIOC4quC4s+C4q+C4o+C4seC4miBBZG1pbiDguYPguIrguYnguIfguLLguJkgKOC4geC4o+C4k+C4teC4l+C4teC5iOC4leC5ieC4reC4h+C4geC4suC4o+C4reC4seC4nuC5gOC4lOC4l+C4guC5ieC4reC4oeC4ueC4peC4l+C4seC5ieC4h+C4q+C4oeC4lOC5g+C4meC4hOC4o+C4seC5ieC4h+C5gOC4lOC4teC4ouC4pylcclxuICovXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVBbGxVc2Vyc05hbWVGaWVsZHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgZ2V0QWxsVXNlcnMoKTtcclxuICAgIGNvbnN0IHVwZGF0ZVByb21pc2VzID0gdXNlcnMubWFwKGFzeW5jICh1c2VyKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7fTtcclxuICAgICAgXHJcbiAgICAgIC8vIOC5geC4ouC4gSBmaXJzdG5hbWUg4LmB4Lil4LiwIGxhc3RuYW1lIOC4iOC4suC4gSBmdWxsTmFtZVxyXG4gICAgICBpZiAoKCF1c2VyLmZpcnN0TmFtZSB8fCAhdXNlci5sYXN0TmFtZSkgJiYgdXNlci5mdWxsTmFtZSkge1xyXG4gICAgICAgIGNvbnN0IG5hbWVQYXJ0cyA9ICh1c2VyLmZ1bGxOYW1lIHx8ICcnKS5zcGxpdCgnICcpO1xyXG4gICAgICAgIHVwZGF0ZXMuZmlyc3ROYW1lID0gbmFtZVBhcnRzWzBdIHx8ICcnO1xyXG4gICAgICAgIHVwZGF0ZXMubGFzdE5hbWUgPSBuYW1lUGFydHMuc2xpY2UoMSkuam9pbignICcpIHx8ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDguIHguLPguKvguJnguJQgcG9zaXRpb24g4LiV4Liy4LihIHJvbGUg4LiW4LmJ4Liy4Lii4Lix4LiH4LmE4Lih4LmI4Lih4Li1XHJcbiAgICAgIGlmICghdXNlci5wb3NpdGlvbikge1xyXG4gICAgICAgIGlmICh1c2VyLnJvbGUgJiYgdXNlci5yb2xlLnRvTG93ZXJDYXNlKCkgPT09ICdhZG1pbicpIHtcclxuICAgICAgICAgIHVwZGF0ZXMucG9zaXRpb24gPSAn4Lic4Li54LmJ4LiU4Li54LmB4Lil4Lij4Liw4Lia4LiaJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdXBkYXRlcy5wb3NpdGlvbiA9ICfguYDguIjguYnguLLguKvguJnguYnguLLguJfguLXguYjguJ7guKLguLLguJrguLLguKUnOyAvLyDguITguYjguLLguYDguKPguLTguYjguKHguJXguYnguJnguKrguLPguKvguKPguLHguJogdXNlciDguJfguLHguYjguKfguYTguJtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOC4reC4seC4nuC5gOC4lOC4l+C5gOC4ieC4nuC4suC4sOC4luC5ieC4suC4oeC4teC4guC5ieC4reC4oeC4ueC4peC4l+C4teC5iOC4leC5ieC4reC4h+C4reC4seC4nuC5gOC4lOC4l1xyXG4gICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlcykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHVwZGF0ZXMudXBkYXRlZEF0ID0gc2VydmVyVGltZXN0YW1wKCk7XHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZURvYyhkb2MoZGIsICd1c2VycycsIHVzZXIuaWQpLCB1cGRhdGVzKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOyAvLyDguYTguKHguYjguJXguYnguK3guIfguK3guLHguJ7guYDguJTguJfguJbguYnguLLguYTguKHguYjguKHguLXguILguYnguK3guKHguLnguKXguJfguLXguYjguJXguYnguK3guIfguYDguJvguKXguLXguYjguKLguJlcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBhd2FpdCBQcm9taXNlLmFsbCh1cGRhdGVQcm9taXNlcyk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXBkYXRlZCBhbGwgdXNlcnMgc3VjY2Vzc2Z1bGx5JyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyczonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiDguJ/guLHguIfguIHguYzguIrguLHguJnguJXguKPguKfguIjguKrguK3guJogYWN0aXZlIHNlc3Npb24g4LiC4Lit4LiH4Lic4Li54LmJ4LmD4LiK4LmJXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY2hlY2tBY3RpdmVTZXNzaW9uID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzZXNzaW9uc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyU2Vzc2lvbnMnKTtcclxuICAgIGNvbnN0IHEgPSBxdWVyeShcclxuICAgICAgc2Vzc2lvbnNSZWYsXHJcbiAgICAgIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLFxyXG4gICAgICB3aGVyZSgnYWN0aXZlJywgJz09JywgdHJ1ZSlcclxuICAgICk7XHJcbiAgICBcclxuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG4gICAgXHJcbiAgICBpZiAocXVlcnlTbmFwc2hvdC5lbXB0eSkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g4LiW4LmJ4Liy4Lih4Li1IHNlc3Npb24g4LiX4Li14LmIIGFjdGl2ZSDguK3guKLguLnguYgg4LmD4Lir4LmJIHJldHVybiDguILguYnguK3guKHguLnguKUgc2Vzc2lvbiDguJnguLHguYnguJlcclxuICAgIGNvbnN0IHNlc3Npb25Eb2MgPSBxdWVyeVNuYXBzaG90LmRvY3NbMF07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogc2Vzc2lvbkRvYy5pZCxcclxuICAgICAgLi4uc2Vzc2lvbkRvYy5kYXRhKClcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGFjdGl2ZSBzZXNzaW9uOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC4ouC4geC5gOC4peC4tOC4gSBzZXNzaW9uXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgaW52YWxpZGF0ZVNlc3Npb24gPSBhc3luYyAoc2Vzc2lvbklkKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICd1c2VyU2Vzc2lvbnMnLCBzZXNzaW9uSWQpLCB7XHJcbiAgICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICAgIGxvZ291dFRpbWU6IHNlcnZlclRpbWVzdGFtcCgpXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbnZhbGlkYXRpbmcgc2Vzc2lvbjonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICog4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4Liq4Lij4LmJ4Liy4LiHIHNlc3Npb24g4LmD4Lir4Lih4LmIXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBJRCDguILguK3guIfguJzguLnguYnguYPguIrguYlcclxuICogQHBhcmFtIHtzdHJpbmd9IHVzZXJuYW1lIC0g4LiK4Li34LmI4Lit4Lic4Li54LmJ4LmD4LiK4LmJXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gSUQg4LiC4Lit4LiHIHNlc3Npb24g4LiX4Li14LmI4Liq4Lij4LmJ4Liy4LiHXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlVXNlclNlc3Npb24gPSBhc3luYyAodXNlcklkLCB1c2VybmFtZSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyDguKrguKPguYnguLLguIcgc2Vzc2lvbklkIOC4l+C4teC5iOC4oeC4teC4hOC4p+C4suC4oeC4q+C4oeC4suC4ouC5guC4lOC4ouC5g+C4iuC5ieC4p+C4seC4meC4l+C4teC5iOC5geC4peC4sOC5gOC4p+C4peC4slxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBub3cudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLnJlcGxhY2UoLy0vZywgJycpOyAvLyBZWVlZTU1ERFxyXG4gICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IG5vdy50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMV0uc3Vic3RyaW5nKDAsIDgpLnJlcGxhY2UoLzovZywgJycpOyAvLyBISE1NU1NcclxuICAgIFxyXG4gICAgLy8g4Liq4Lij4LmJ4Liy4LiHIHNlc3Npb25JZCDguYHguJrguJrguKHguLXguITguKfguLLguKHguKvguKHguLLguKI6IHVzZXJJZF9ZWVlZTU1ERF9ISE1NU1NcclxuICAgIGNvbnN0IHNlc3Npb25JZCA9IGAke3VzZXJJZH1fJHtmb3JtYXR0ZWREYXRlfV8ke2Zvcm1hdHRlZFRpbWV9YDtcclxuICAgIFxyXG4gICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgdXNlcm5hbWUsXHJcbiAgICAgIGxvZ2luVGltZTogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgZGV2aWNlOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IG5hdmlnYXRvci51c2VyQWdlbnQgOiAnVW5rbm93bicsXHJcbiAgICAgIGlwOiAnVW5rbm93bicsIC8vIOC5g+C4meC4quC4oOC4suC4nuC5geC4p+C4lOC4peC5ieC4reC4oeC4iOC4o+C4tOC4h+C4hOC4p+C4o+C5g+C4iuC5ieC4muC4o+C4tOC4geC4suC4o+C4lOC4tuC4hyBJUCDguIjguLLguIHguKDguLLguKLguJnguK3guIFcclxuICAgICAgY3JlYXRlZEF0OiBmb3JtYXR0ZWREYXRlICsgJ18nICsgZm9ybWF0dGVkVGltZSAvLyDguYDguIHguYfguJrguYDguKfguKXguLLguJfguLXguYjguKrguKPguYnguLLguIfguYPguJnguKPguLnguJvguYHguJrguJrguJfguLXguYjguK3guYjguLLguJnguIfguYjguLLguKJcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIOC5g+C4iuC5iSBzZXREb2Mg4LmB4LiX4LiZIGFkZERvYyDguYDguJ7guLfguYjguK3guIHguLPguKvguJnguJQgSUQg4LmA4Lit4LiHXHJcbiAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCAndXNlclNlc3Npb25zJywgc2Vzc2lvbklkKSwgc2Vzc2lvbkRhdGEpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gc2Vzc2lvbklkO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB1c2VyIHNlc3Npb246JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICog4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4LiV4Lij4Lin4LiI4Liq4Lit4Lia4LiE4Lin4Liy4Lih4LiW4Li54LiB4LiV4LmJ4Lit4LiH4LiC4Lit4LiHIHNlc3Npb25cclxuICovXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVNlc3Npb24gPSBhc3luYyAodXNlcklkLCBzZXNzaW9uSWQpID0+IHtcclxuICBpZiAoIXVzZXJJZCB8fCAhc2Vzc2lvbklkKSByZXR1cm4gZmFsc2U7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb25Eb2MgPSBhd2FpdCBnZXREb2MoZG9jKGRiLCAndXNlclNlc3Npb25zJywgc2Vzc2lvbklkKSk7XHJcbiAgICBcclxuICAgIGlmICghc2Vzc2lvbkRvYy5leGlzdHMoKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHNlc3Npb25EYXRhID0gc2Vzc2lvbkRvYy5kYXRhKCk7XHJcbiAgICByZXR1cm4gc2Vzc2lvbkRhdGEudXNlcklkID09PSB1c2VySWQgJiYgc2Vzc2lvbkRhdGEuYWN0aXZlID09PSB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2YWxpZGF0aW5nIHNlc3Npb246JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC4leC4o+C4p+C4iOC4quC4reC4muC4guC5ieC4reC4oeC4ueC4peC4ouC5ieC4reC4meC4q+C4peC4seC4hyA3IOC4p+C4seC4mVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gd2FyZElkIC0g4Lij4Lir4Lix4Liq4Lin4Lit4Lij4LmM4LiUXHJcbiAqIEBwYXJhbSB7RGF0ZX0gY3VycmVudERhdGUgLSDguKfguLHguJnguJfguLXguYjguJvguLHguIjguIjguLjguJrguLHguJlcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gLSDguJzguKXguIHguLLguKPguJXguKPguKfguIjguKrguK3guJrguILguYnguK3guKHguLnguKVcclxuICovXHJcbmV4cG9ydCBjb25zdCBjaGVja0xhc3Q3RGF5c0RhdGEgPSBhc3luYyAod2FyZElkLCBjdXJyZW50RGF0ZSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyDguITguLPguJnguKfguJPguKfguLHguJnguJfguLXguYggNyDguKfguLHguJnguKLguYnguK3guJnguKvguKXguLHguIdcclxuICAgIGNvbnN0IHNldmVuRGF5c0FnbyA9IG5ldyBEYXRlKGN1cnJlbnREYXRlKTtcclxuICAgIHNldmVuRGF5c0Fnby5zZXREYXRlKHNldmVuRGF5c0Fnby5nZXREYXRlKCkgLSA3KTtcclxuICAgIFxyXG4gICAgLy8g4LmB4Lib4Lil4LiH4Lin4Lix4LiZ4LiX4Li14LmI4LmA4Lib4LmH4LiZIHN0cmluZyBmb3JtYXQg4Lib4Li1LeC5gOC4lOC4t+C4reC4mS3guKfguLHguJlcclxuICAgIGNvbnN0IGZvcm1hdERhdGUgPSAoZGF0ZSkgPT4ge1xyXG4gICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3QgY3VycmVudERhdGVTdHJpbmcgPSBmb3JtYXREYXRlKGN1cnJlbnREYXRlKTtcclxuICAgIGNvbnN0IHNldmVuRGF5c0Fnb1N0cmluZyA9IGZvcm1hdERhdGUoc2V2ZW5EYXlzQWdvKTtcclxuICAgIFxyXG4gICAgLy8g4Liq4Lij4LmJ4Liy4LiH4Lij4Liy4Lii4LiB4Liy4Lij4Lin4Lix4LiZ4LiX4Li14LmI4LiX4Lix4LmJ4LiHIDcg4Lin4Lix4LiZ4LiX4Li14LmI4Lic4LmI4Liy4LiZ4Lih4LiyXHJcbiAgICBjb25zdCBkYXRlTGlzdCA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNzsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZSk7XHJcbiAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGkpO1xyXG4gICAgICBkYXRlTGlzdC5wdXNoKGZvcm1hdERhdGUoZGF0ZSkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDguJXguKPguKfguIjguKrguK3guJrguILguYnguK3guKHguLnguKXguYPguJkgd2FyZERhdGEgY29sbGVjdGlvblxyXG4gICAgY29uc3Qgd2FyZERhdGFSZWYgPSBjb2xsZWN0aW9uKGRiLCAnd2FyZERhdGFGaW5hbCcpO1xyXG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxyXG4gICAgICB3YXJkRGF0YVJlZixcclxuICAgICAgd2hlcmUoJ3dhcmRJZCcsICc9PScsIHdhcmRJZCksXHJcbiAgICAgIHdoZXJlKCdkYXRlJywgJ2luJywgZGF0ZUxpc3QpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuICAgIFxyXG4gICAgLy8g4LmA4LiB4LmH4Lia4Lin4Lix4LiZ4LiX4Li14LmI4LiX4Li14LmI4Lih4Li14LiC4LmJ4Lit4Lih4Li54LilXHJcbiAgICBjb25zdCBkYXRlc1dpdGhEYXRhID0gbmV3IFNldCgpO1xyXG4gICAgcXVlcnlTbmFwc2hvdC5kb2NzLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XHJcbiAgICAgIGRhdGVzV2l0aERhdGEuYWRkKGRhdGEuZGF0ZSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8g4LiW4LmJ4Liy4LmE4Lih4LmI4Lih4Li14LiC4LmJ4Lit4Lih4Li54Lil4Lii4LmJ4Lit4LiZ4Lir4Lil4Lix4LiHIDcg4Lin4Lix4LiZ4LmA4Lil4LiiXHJcbiAgICBpZiAoZGF0ZXNXaXRoRGF0YS5zaXplID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaGFzRGF0YTogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ+C5hOC4oeC5iOC4nuC4muC4guC5ieC4reC4oeC4ueC4peC4ouC5ieC4reC4meC4q+C4peC4seC4hyA3IOC4p+C4seC4meC4l+C4teC5iOC4nOC5iOC4suC4meC4oeC4siDguIHguKPguLjguJPguLLguJXguLTguJTguJXguYjguK3guJzguLnguYnguJTguLnguYHguKXguKPguLDguJrguJrguYDguJ7guLfguYjguK3guJXguKPguKfguIjguKrguK3guJonLFxyXG4gICAgICAgIGRhdGVzQ2hlY2tlZDogZGF0ZUxpc3QsXHJcbiAgICAgICAgZGF0ZXNXaXRoRGF0YTogQXJyYXkuZnJvbShkYXRlc1dpdGhEYXRhKVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDguJbguYnguLLguKHguLXguILguYnguK3guKHguLnguKXguK3guKLguYjguLLguIfguJnguYnguK3guKIgMSDguKfguLHguJlcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGhhc0RhdGE6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICfguJ7guJrguILguYnguK3guKHguLnguKXguKLguYnguK3guJnguKvguKXguLHguIfguYPguJnguIrguYjguKfguIcgNyDguKfguLHguJnguJfguLXguYjguJzguYjguLLguJnguKHguLInLFxyXG4gICAgICBkYXRlc0NoZWNrZWQ6IGRhdGVMaXN0LFxyXG4gICAgICBkYXRlc1dpdGhEYXRhOiBBcnJheS5mcm9tKGRhdGVzV2l0aERhdGEpXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBsYXN0IDcgZGF5cyBkYXRhOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHsgXHJcbiAgICAgIGhhc0RhdGE6IGZhbHNlLCBcclxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIG1lc3NhZ2U6ICfguYDguIHguLTguJTguILguYnguK3guJzguLTguJTguJ7guKXguLLguJTguYPguJnguIHguLLguKPguJXguKPguKfguIjguKrguK3guJrguILguYnguK3guKHguLnguKXguKLguYnguK3guJnguKvguKXguLHguIcgNyDguKfguLHguJknXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiDguJ/guLHguIfguIHguYzguIrguLHguJnguJrguLHguJnguJfguLbguIHguILguYnguK3guKHguLnguKXguInguJrguLHguJrguKPguYjguLLguIcgKFNhdmUgRHJhZnQpXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBkcmFmdERhdGEgLSDguILguYnguK3guKHguLnguKXguInguJrguLHguJrguKPguYjguLLguIdcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gLSDguJzguKXguIHguLLguKPguJrguLHguJnguJfguLbguIHguILguYnguK3guKHguLnguKVcclxuICovXHJcbmV4cG9ydCBjb25zdCBzYXZlV2FyZERhdGFEcmFmdCA9IGFzeW5jIChkcmFmdERhdGEpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB3YXJkSWQsIGRhdGUsIHNoaWZ0LCB1c2VySWQgfSA9IGRyYWZ0RGF0YTtcclxuICAgIFxyXG4gICAgLy8g4Liq4Lij4LmJ4Liy4LiHIGRvY0lkIOC4l+C4teC5iOC5hOC4oeC5iOC4i+C5ieC4s+C4geC4seC4mSDguYLguJTguKLguKPguKfguKEgd2FyZElkLCBkYXRlLCBzaGlmdCDguYHguKXguLAgdXNlcklkXHJcbiAgICBjb25zdCBkb2NJZCA9IGAke3dhcmRJZH1fJHtkYXRlfV8ke3NoaWZ0fV8ke3VzZXJJZH1gO1xyXG4gICAgXHJcbiAgICAvLyDguYDguJ7guLTguYjguKEgdGltZXN0YW1wXHJcbiAgICBjb25zdCBkYXRhV2l0aFRpbWVzdGFtcCA9IHtcclxuICAgICAgLi4uZHJhZnREYXRhLFxyXG4gICAgICBsYXN0VXBkYXRlZDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICAgIGlzRHJhZnQ6IHRydWVcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIOC4muC4seC4meC4l+C4tuC4geC4peC4h+C5g+C4mSBjb2xsZWN0aW9uIHdhcmREYXRhRHJhZnRzXHJcbiAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCAnd2FyZERhdGFEcmFmdHMnLCBkb2NJZCksIGRhdGFXaXRoVGltZXN0YW1wLCB7IG1lcmdlOiB0cnVlIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4geyBcclxuICAgICAgc3VjY2VzczogdHJ1ZSwgXHJcbiAgICAgIGlkOiBkb2NJZCxcclxuICAgICAgbWVzc2FnZTogJ+C4muC4seC4meC4l+C4tuC4geC4guC5ieC4reC4oeC4ueC4peC4ieC4muC4seC4muC4o+C5iOC4suC4h+C5gOC4o+C4teC4ouC4muC4o+C5ieC4reC4ouC5geC4peC5ieC4pycgXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgd2FyZCBkYXRhIGRyYWZ0OicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHsgXHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIG1lc3NhZ2U6ICfguYDguIHguLTguJTguILguYnguK3guJzguLTguJTguJ7guKXguLLguJTguYPguJnguIHguLLguKPguJrguLHguJnguJfguLbguIHguILguYnguK3guKHguLnguKXguInguJrguLHguJrguKPguYjguLLguIcnIFxyXG4gICAgfTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICog4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4LiU4Li24LiH4LiC4LmJ4Lit4Lih4Li54Lil4LiJ4Lia4Lix4Lia4Lij4LmI4Liy4LiH4LiC4Lit4LiH4Lic4Li54LmJ4LmD4LiK4LmJXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSDguKPguKvguLHguKrguJzguLnguYnguYPguIrguYlcclxuICogQHBhcmFtIHtzdHJpbmd9IHdhcmRJZCAtIOC4o+C4q+C4seC4quC4p+C4reC4o+C5jOC4lCAob3B0aW9uYWwpXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlIC0g4Lin4Lix4LiZ4LiX4Li14LmIIChvcHRpb25hbClcclxuICogQHBhcmFtIHtzdHJpbmd9IHNoaWZ0IC0g4LiB4LiwIChvcHRpb25hbClcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXk+fSAtIOC4o+C4suC4ouC4geC4suC4o+C4guC5ieC4reC4oeC4ueC4peC4ieC4muC4seC4muC4o+C5iOC4suC4h1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGdldFVzZXJEcmFmdHMgPSBhc3luYyAodXNlcklkLCB3YXJkSWQgPSBudWxsLCBkYXRlID0gbnVsbCwgc2hpZnQgPSBudWxsKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRyYWZ0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICd3YXJkRGF0YURyYWZ0cycpO1xyXG4gICAgbGV0IGNvbmRpdGlvbnMgPSBbd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCldO1xyXG4gICAgXHJcbiAgICBpZiAod2FyZElkKSB7XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaCh3aGVyZSgnd2FyZElkJywgJz09Jywgd2FyZElkKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChkYXRlKSB7XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaCh3aGVyZSgnZGF0ZScsICc9PScsIGRhdGUpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHNoaWZ0KSB7XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaCh3aGVyZSgnc2hpZnQnLCAnPT0nLCBzaGlmdCkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDguKrguKPguYnguLLguIcgcXVlcnkg4LiV4Liy4Lih4LmA4LiH4Li34LmI4Lit4LiZ4LmE4LiC4LiX4Li14LmI4LiB4Liz4Lir4LiZ4LiUXHJcbiAgICBjb25zdCBxID0gcXVlcnkoZHJhZnRzUmVmLCAuLi5jb25kaXRpb25zKTtcclxuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xyXG4gICAgXHJcbiAgICBpZiAocXVlcnlTbmFwc2hvdC5lbXB0eSkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBxdWVyeVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoe1xyXG4gICAgICBpZDogZG9jLmlkLFxyXG4gICAgICAuLi5kb2MuZGF0YSgpXHJcbiAgICB9KSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBkcmFmdHM6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC4peC4muC4guC5ieC4reC4oeC4ueC4peC4ieC4muC4seC4muC4o+C5iOC4suC4h1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZHJhZnRJZCAtIOC4o+C4q+C4seC4quC4ieC4muC4seC4muC4o+C5iOC4suC4h1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSAtIOC4nOC4peC4geC4suC4o+C4peC4muC4guC5ieC4reC4oeC4ueC4pVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVdhcmREYXRhRHJhZnQgPSBhc3luYyAoZHJhZnRJZCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnd2FyZERhdGFEcmFmdHMnLCBkcmFmdElkKSk7XHJcbiAgICByZXR1cm4geyBcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ+C4peC4muC4guC5ieC4reC4oeC4ueC4peC4ieC4muC4seC4muC4o+C5iOC4suC4h+C5gOC4o+C4teC4ouC4muC4o+C5ieC4reC4ouC5geC4peC5ieC4pycgXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyB3YXJkIGRhdGEgZHJhZnQ6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICByZXR1cm4geyBcclxuICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgbWVzc2FnZTogJ+C5gOC4geC4tOC4lOC4guC5ieC4reC4nOC4tOC4lOC4nuC4peC4suC4lOC5g+C4meC4geC4suC4o+C4peC4muC4guC5ieC4reC4oeC4ueC4peC4ieC4muC4seC4muC4o+C5iOC4suC4hycgXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiDguJ/guLHguIfguIHguYzguIrguLHguJnguJTguLbguIfguILguYnguK3guKHguLnguKXguInguJrguLHguJrguKPguYjguLLguIfguKXguYjguLLguKrguLjguJTguILguK3guIfguJzguLnguYnguYPguIrguYlcclxuICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIOC4o+C4q+C4seC4quC4nOC4ueC5ieC5g+C4iuC5iVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gd2FyZElkIC0g4Lij4Lir4Lix4Liq4Lin4Lit4Lij4LmM4LiUXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlIC0g4Lin4Lix4LiZ4LiX4Li14LmIXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzaGlmdCAtIOC4geC4sFxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IC0g4LiC4LmJ4Lit4Lih4Li54Lil4LiJ4Lia4Lix4Lia4Lij4LmI4Liy4LiH4Lil4LmI4Liy4Liq4Li44LiUIOC4q+C4o+C4t+C4rSBudWxsIOC4luC5ieC4suC5hOC4oeC5iOC4oeC4tVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGdldExhdGVzdERyYWZ0ID0gYXN5bmMgKHVzZXJJZCwgd2FyZElkLCBkYXRlLCBzaGlmdCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyDguITguYnguJnguKvguLLguInguJrguLHguJrguKPguYjguLLguIfguKXguYjguLLguKrguLjguJTguJXguLLguKHguYDguIfguLfguYjguK3guJnguYTguIJcclxuICAgIGNvbnN0IGRyYWZ0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICd3YXJkRGF0YURyYWZ0cycpO1xyXG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxyXG4gICAgICBkcmFmdHNSZWYsXHJcbiAgICAgIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLFxyXG4gICAgICB3aGVyZSgnd2FyZElkJywgJz09Jywgd2FyZElkKSxcclxuICAgICAgd2hlcmUoJ2RhdGUnLCAnPT0nLCBkYXRlKSxcclxuICAgICAgd2hlcmUoJ3NoaWZ0JywgJz09Jywgc2hpZnQpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuICAgIFxyXG4gICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOC4q+C4suC4geC4oeC4teC4q+C4peC4suC4ouC4ieC4muC4seC4muC4o+C5iOC4suC4hyDguYPguKvguYnguYDguKXguLfguK3guIHguInguJrguLHguJrguKXguYjguLLguKrguLjguJTguJXguLLguKEgdGltZXN0YW1wXHJcbiAgICBsZXQgbGF0ZXN0RHJhZnQgPSBudWxsO1xyXG4gICAgbGV0IGxhdGVzdFRpbWVzdGFtcCA9IDA7XHJcbiAgICBcclxuICAgIHF1ZXJ5U25hcHNob3QuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xyXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBkYXRhLmxhc3RVcGRhdGVkPy5zZWNvbmRzIHx8IDA7XHJcbiAgICAgIFxyXG4gICAgICBpZiAodGltZXN0YW1wID4gbGF0ZXN0VGltZXN0YW1wKSB7XHJcbiAgICAgICAgbGF0ZXN0VGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgICAgIGxhdGVzdERyYWZ0ID0ge1xyXG4gICAgICAgICAgaWQ6IGRvYy5pZCxcclxuICAgICAgICAgIC4uLmRhdGFcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGxhdGVzdERyYWZ0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGxhdGVzdCBkcmFmdDonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiDguJrguLHguJnguJfguLbguIHguJvguKPguLDguKfguLHguJXguLTguIHguLLguKPguYDguJvguKXguLXguYjguKLguJnguYHguJvguKXguIfguILguYnguK3guKHguLnguKUgd2FyZFxyXG4gKiBAcGFyYW0ge09iamVjdH0gd2FyZERhdGEgLSDguILguYnguK3guKHguLnguKXguJfguLXguYjguIjguLDguJrguLHguJnguJfguLbguIFcclxuICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbiAtIOC4m+C4o+C4sOC5gOC4oOC4l+C4geC4suC4o+C4geC4o+C4sOC4l+C4syAoY3JlYXRlLCB1cGRhdGUsIGRlbGV0ZSlcclxuICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIElEIOC4guC4reC4h+C4nOC4ueC5ieC5g+C4iuC5ieC4l+C4teC5iOC4l+C4s+C4o+C4suC4ouC4geC4suC4o1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSAtIOC4nOC4peC4peC4seC4nuC4mOC5jOC4geC4suC4o+C4muC4seC4meC4l+C4tuC4gVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGxvZ1dhcmREYXRhSGlzdG9yeSA9IGFzeW5jICh3YXJkRGF0YSwgYWN0aW9uLCB1c2VySWQpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBub3cudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLnJlcGxhY2UoLy0vZywgJycpOyAvLyBZWVlZTU1ERFxyXG4gICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IG5vdy50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMV0uc3Vic3RyaW5nKDAsIDgpLnJlcGxhY2UoLzovZywgJycpOyAvLyBISE1NU1NcclxuICAgIGNvbnN0IGhpc3RvcnlJZCA9IGAke3dhcmREYXRhLndhcmRJZH1fJHtmb3JtYXR0ZWREYXRlfV8ke2Zvcm1hdHRlZFRpbWV9YDtcclxuICAgIFxyXG4gICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3dhcmREYXRhSGlzdG9yeScsIGhpc3RvcnlJZCksIHtcclxuICAgICAgLi4ud2FyZERhdGEsXHJcbiAgICAgIGFjdGlvbixcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBoaXN0b3J5VGltZXN0YW1wOiBzZXJ2ZXJUaW1lc3RhbXAoKSxcclxuICAgICAgaGlzdG9yeURhdGU6IGZvcm1hdHRlZERhdGUsXHJcbiAgICAgIGhpc3RvcnlUaW1lOiBmb3JtYXR0ZWRUaW1lXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgaGlzdG9yeUlkXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2dnaW5nIHdhcmQgZGF0YSBoaXN0b3J5OicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuIl0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJxdWVyeSIsIndoZXJlIiwiZ2V0RG9jcyIsImRvYyIsImdldERvYyIsInNldERvYyIsInVwZGF0ZURvYyIsImRlbGV0ZURvYyIsImFkZERvYyIsInNlcnZlclRpbWVzdGFtcCIsImRiIiwidXNlTW9ja0RhdGEiLCJsb2NhbFN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwic2V0SXRlbSIsImZpbmRVc2VyQnlVc2VybmFtZSIsInVzZXJuYW1lIiwidXNlcnNSZWYiLCJxIiwicXVlcnlTbmFwc2hvdCIsImVtcHR5IiwidXNlckRvYyIsImRvY3MiLCJpZCIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwibG9naW5Vc2VyIiwicGFzc3dvcmQiLCJsb2ciLCJzdWNjZXNzIiwidXNlcklkIiwiZXhpc3RpbmdTZXNzaW9uIiwiY2hlY2tBY3RpdmVTZXNzaW9uIiwiaW52YWxpZGF0ZVNlc3Npb24iLCJzZXNzaW9uSWQiLCJjcmVhdGVVc2VyU2Vzc2lvbiIsInVzZXIiLCJ1aWQiLCJnZXRXYXJkRGFpbHlSZWNvcmRzIiwiZGF0ZSIsIndhcmRJZCIsIndhcmREYWlseVJlZiIsIm1hcCIsImdldFN0YWZmUmVjb3JkcyIsInNoaWZ0IiwicmVjb3Jkc1JlZiIsInNhdmVTdGFmZlJlY29yZCIsInJlY29yZERhdGEiLCJyZWNvcmRJZCIsImxhc3RNb2RpZmllZCIsImRvY1JlZiIsInRpbWVzdGFtcCIsInNhdmVXYXJkRGFpbHlSZWNvcmQiLCJ3YXJkRGF0YSIsImRvY0lkIiwibGFzdFVwZGF0ZWQiLCJtZXJnZSIsImdldEFsbFVzZXJzIiwiYWRkVXNlciIsInVzZXJEYXRhIiwidXNlckRhdGFXaXRoVGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInVwZGF0ZVVzZXIiLCJ1c2VyRGF0YVdpdGhUaW1lc3RhbXAiLCJkZWxldGVVc2VyIiwidXBkYXRlQWxsVXNlcnNOYW1lRmllbGRzIiwidXNlcnMiLCJ1cGRhdGVQcm9taXNlcyIsInVwZGF0ZXMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImZ1bGxOYW1lIiwibmFtZVBhcnRzIiwic3BsaXQiLCJzbGljZSIsImpvaW4iLCJwb3NpdGlvbiIsInJvbGUiLCJ0b0xvd2VyQ2FzZSIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJQcm9taXNlIiwicmVzb2x2ZSIsImFsbCIsInNlc3Npb25zUmVmIiwic2Vzc2lvbkRvYyIsImFjdGl2ZSIsImxvZ291dFRpbWUiLCJub3ciLCJEYXRlIiwiZm9ybWF0dGVkRGF0ZSIsInRvSVNPU3RyaW5nIiwicmVwbGFjZSIsImZvcm1hdHRlZFRpbWUiLCJzdWJzdHJpbmciLCJzZXNzaW9uRGF0YSIsImxvZ2luVGltZSIsImRldmljZSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlwIiwidmFsaWRhdGVTZXNzaW9uIiwiZXhpc3RzIiwiY2hlY2tMYXN0N0RheXNEYXRhIiwiY3VycmVudERhdGUiLCJzZXZlbkRheXNBZ28iLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImZvcm1hdERhdGUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJkYXkiLCJjdXJyZW50RGF0ZVN0cmluZyIsInNldmVuRGF5c0Fnb1N0cmluZyIsImRhdGVMaXN0IiwiaSIsInB1c2giLCJ3YXJkRGF0YVJlZiIsImRhdGVzV2l0aERhdGEiLCJTZXQiLCJmb3JFYWNoIiwiYWRkIiwic2l6ZSIsImhhc0RhdGEiLCJkYXRlc0NoZWNrZWQiLCJBcnJheSIsImZyb20iLCJzYXZlV2FyZERhdGFEcmFmdCIsImRyYWZ0RGF0YSIsImRhdGFXaXRoVGltZXN0YW1wIiwiaXNEcmFmdCIsImdldFVzZXJEcmFmdHMiLCJkcmFmdHNSZWYiLCJjb25kaXRpb25zIiwiZGVsZXRlV2FyZERhdGFEcmFmdCIsImRyYWZ0SWQiLCJnZXRMYXRlc3REcmFmdCIsImxhdGVzdERyYWZ0IiwibGF0ZXN0VGltZXN0YW1wIiwic2Vjb25kcyIsImxvZ1dhcmREYXRhSGlzdG9yeSIsImFjdGlvbiIsImhpc3RvcnlJZCIsImhpc3RvcnlUaW1lc3RhbXAiLCJoaXN0b3J5RGF0ZSIsImhpc3RvcnlUaW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/lib/dataAccess.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./app/lib/firebase.js":
/*!*****************************!*\
  !*** ./app/lib/firebase.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"(app-pages-browser)/./node_modules/firebase/app/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* __next_internal_client_entry_do_not_use__ db,auth,default auto */ \n\n\n// แสดงค่า environment variables ออกมาเพื่อตรวจสอบ (ลบออกหลังจากแก้ปัญหาแล้ว)\nconsole.log('Firebase Config Environment Variables:');\nconsole.log('API Key available:', !!\"AIzaSyB9sZFJSn8cvkos5fysi47VpqJc5AsorA4\");\nconsole.log('Auth Domain available:', !!\"manpower-patient-summary.firebaseapp.com\");\nconsole.log('Project ID available:', !!\"manpower-patient-summary\");\nconst firebaseConfig = {\n    apiKey: \"AIzaSyB9sZFJSn8cvkos5fysi47VpqJc5AsorA4\" || 0,\n    authDomain: \"manpower-patient-summary.firebaseapp.com\" || 0,\n    projectId: \"manpower-patient-summary\" || 0,\n    storageBucket: \"manpower-patient-summary.firebasestorage.app\" || 0,\n    messagingSenderId: \"644057496880\" || 0,\n    appId: \"1:644057496880:web:6270efc29187b9c025dcf5\" || 0\n};\nconsole.log('Using Firebase config:', {\n    ...firebaseConfig,\n    apiKey: 'HIDDEN'\n});\n// ประกาศตัวแปรนอก try-catch เพื่อให้สามารถ export ได้\nlet app = null;\nlet db = null;\nlet auth = null;\ntry {\n    // Check if Firebase app is already initialized\n    app = !(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length ? (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig) : (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)()[0];\n    // Initialize Firebase services\n    db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\n    auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)(app);\n    console.log('Firebase initialized successfully');\n} catch (error) {\n    console.error('Error initializing Firebase:', error);\n// ตัวแปร app, db และ auth จะยังคงเป็น null ถ้าเกิด error\n}\n// Export นอก try-catch block\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9saWIvZmlyZWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O3FFQUVzRDtBQUNKO0FBQ1Y7QUFFeEMsNkVBQTZFO0FBQzdFSSxRQUFRQyxHQUFHLENBQUM7QUFDWkQsUUFBUUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUNDLHlDQUF3QztBQUM1RUYsUUFBUUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDLENBQUNDLDBDQUE0QztBQUNwRkYsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QixDQUFDLENBQUNDLDBCQUEyQztBQUVsRixNQUFNSyxpQkFBaUI7SUFDckJDLFFBQVFOLHlDQUF3QyxJQUFJLENBQXlDO0lBQzdGTyxZQUFZUCwwQ0FBNEMsSUFBSSxDQUEwQztJQUN0R1EsV0FBV1IsMEJBQTJDLElBQUksQ0FBMEI7SUFDcEZTLGVBQWVULDhDQUErQyxJQUFJLENBQThDO0lBQ2hIVyxtQkFBbUJYLGNBQW9ELElBQUksQ0FBYztJQUN6RmEsT0FBT2IsMkNBQXVDLElBQUksQ0FBMkM7QUFDL0Y7QUFFQUYsUUFBUUMsR0FBRyxDQUFDLDBCQUEwQjtJQUFDLEdBQUdNLGNBQWM7SUFBRUMsUUFBUTtBQUFRO0FBRTFFLHNEQUFzRDtBQUN0RCxJQUFJUyxNQUFNO0FBQ1YsSUFBSUMsS0FBSztBQUNULElBQUlDLE9BQU87QUFFWCxJQUFJO0lBQ0YsK0NBQStDO0lBQy9DRixNQUFNLENBQUNwQixxREFBT0EsR0FBR3VCLE1BQU0sR0FBR3hCLDJEQUFhQSxDQUFDVyxrQkFBa0JWLHFEQUFPQSxFQUFFLENBQUMsRUFBRTtJQUV0RSwrQkFBK0I7SUFDL0JxQixLQUFLcEIsZ0VBQVlBLENBQUNtQjtJQUNsQkUsT0FBT3BCLHNEQUFPQSxDQUFDa0I7SUFFZmpCLFFBQVFDLEdBQUcsQ0FBQztBQUNkLEVBQUUsT0FBT29CLE9BQU87SUFDZHJCLFFBQVFxQixLQUFLLENBQUMsZ0NBQWdDQTtBQUM5Qyx5REFBeUQ7QUFDM0Q7QUFFQSw2QkFBNkI7QUFDVDtBQUNwQixpRUFBZUosR0FBR0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCX1NJUlxcT25lRHJpdmVcXOC5gOC4lOC4quC4geC5jOC4l+C5h+C4reC4m1xcQWN0aXZlIDE0LTMtMjAyNVxcU3VtbWFyeV9vZl9QZXJzb25uZWxfUmF0aW9cXGFwcFxcbGliXFxmaXJlYmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IGluaXRpYWxpemVBcHAsIGdldEFwcHMgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGdldEF1dGggfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcblxuLy8g4LmB4Liq4LiU4LiH4LiE4LmI4LiyIGVudmlyb25tZW50IHZhcmlhYmxlcyDguK3guK3guIHguKHguLLguYDguJ7guLfguYjguK3guJXguKPguKfguIjguKrguK3guJogKOC4peC4muC4reC4reC4geC4q+C4peC4seC4h+C4iOC4suC4geC5geC4geC5ieC4m+C4seC4jeC4q+C4suC5geC4peC5ieC4pylcbmNvbnNvbGUubG9nKCdGaXJlYmFzZSBDb25maWcgRW52aXJvbm1lbnQgVmFyaWFibGVzOicpO1xuY29uc29sZS5sb2coJ0FQSSBLZXkgYXZhaWxhYmxlOicsICEhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSk7XG5jb25zb2xlLmxvZygnQXV0aCBEb21haW4gYXZhaWxhYmxlOicsICEhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVVUSF9ET01BSU4pO1xuY29uc29sZS5sb2coJ1Byb2plY3QgSUQgYXZhaWxhYmxlOicsICEhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfUFJPSkVDVF9JRCk7XG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkgfHwgJ0FJemFTeUI5c1pGSlNuOGN2a29zNWZ5c2k0N1ZwcUpjNUFzb3JBNCcsXG4gIGF1dGhEb21haW46IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOIHx8ICdtYW5wb3dlci1wYXRpZW50LXN1bW1hcnkuZmlyZWJhc2VhcHAuY29tJyxcbiAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9QUk9KRUNUX0lEIHx8ICdtYW5wb3dlci1wYXRpZW50LXN1bW1hcnknLFxuICBzdG9yYWdlQnVja2V0OiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCB8fCAnbWFucG93ZXItcGF0aWVudC1zdW1tYXJ5LmZpcmViYXNlc3RvcmFnZS5hcHAnLFxuICBtZXNzYWdpbmdTZW5kZXJJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCB8fCAnNjQ0MDU3NDk2ODgwJyxcbiAgYXBwSWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCB8fCAnMTo2NDQwNTc0OTY4ODA6d2ViOjYyNzBlZmMyOTE4N2I5YzAyNWRjZjUnXG59O1xuXG5jb25zb2xlLmxvZygnVXNpbmcgRmlyZWJhc2UgY29uZmlnOicsIHsuLi5maXJlYmFzZUNvbmZpZywgYXBpS2V5OiAnSElEREVOJ30pO1xuXG4vLyDguJvguKPguLDguIHguLLguKjguJXguLHguKfguYHguJvguKPguJnguK3guIEgdHJ5LWNhdGNoIOC5gOC4nuC4t+C5iOC4reC5g+C4q+C5ieC4quC4suC4oeC4suC4o+C4liBleHBvcnQg4LmE4LiU4LmJXG5sZXQgYXBwID0gbnVsbDtcbmxldCBkYiA9IG51bGw7XG5sZXQgYXV0aCA9IG51bGw7XG5cbnRyeSB7XG4gIC8vIENoZWNrIGlmIEZpcmViYXNlIGFwcCBpcyBhbHJlYWR5IGluaXRpYWxpemVkXG4gIGFwcCA9ICFnZXRBcHBzKCkubGVuZ3RoID8gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZykgOiBnZXRBcHBzKClbMF07XG5cbiAgLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZSBzZXJ2aWNlc1xuICBkYiA9IGdldEZpcmVzdG9yZShhcHApO1xuICBhdXRoID0gZ2V0QXV0aChhcHApO1xuXG4gIGNvbnNvbGUubG9nKCdGaXJlYmFzZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBGaXJlYmFzZTonLCBlcnJvcik7XG4gIC8vIOC4leC4seC4p+C5geC4m+C4oyBhcHAsIGRiIOC5geC4peC4sCBhdXRoIOC4iOC4sOC4ouC4seC4h+C4hOC4h+C5gOC4m+C5h+C4mSBudWxsIOC4luC5ieC4suC5gOC4geC4tOC4lCBlcnJvclxufVxuXG4vLyBFeHBvcnQg4LiZ4Lit4LiBIHRyeS1jYXRjaCBibG9ja1xuZXhwb3J0IHsgZGIsIGF1dGggfTtcbmV4cG9ydCBkZWZhdWx0IGFwcDtcbiJdLCJuYW1lcyI6WyJpbml0aWFsaXplQXBwIiwiZ2V0QXBwcyIsImdldEZpcmVzdG9yZSIsImdldEF1dGgiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BVVRIX0RPTUFJTiIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQiLCJmaXJlYmFzZUNvbmZpZyIsImFwaUtleSIsImF1dGhEb21haW4iLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0IiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQiLCJhcHBJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCIsImFwcCIsImRiIiwiYXV0aCIsImxlbmd0aCIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/lib/firebase.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./app/utils/alertService.js":
/*!***********************************!*\
  !*** ./app/utils/alertService.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AlertProvider: () => (/* binding */ AlertProvider),\n/* harmony export */   Swal: () => (/* binding */ Swal),\n/* harmony export */   alertAPI: () => (/* binding */ alertAPI),\n/* harmony export */   useAlert: () => (/* binding */ useAlert)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ useAlert,alertAPI,Swal,AlertProvider auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n\n/**\r\n * AlertService - บริการแจ้งเตือนที่พัฒนาด้วย Tailwind CSS\r\n * ทดแทนการใช้ SweetAlert2 เพื่อให้สอดคล้องกับ design system ของแอพพลิเคชัน\r\n */ // Create a context for our alert system\nconst AlertContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\n// Custom hook for using our alert system\nconst useAlert = ()=>{\n    _s();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AlertContext);\n    if (!context) {\n        throw new Error('useAlert must be used within an AlertProvider');\n    }\n    return context;\n};\n_s(useAlert, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n// สร้าง alert API สำหรับใช้งานในแอพพลิเคชัน\nconst alertAPI = {\n    fire: async (options)=>{\n        // ถ้ามีการใช้ GlobalAlertService ผ่าน context\n        if (window.__alertService) {\n            return window.__alertService.showAlert(options);\n        }\n        // Fallback สำหรับกรณีที่ไม่ได้อยู่ใน AlertProvider\n        console.warn('AlertProvider is not found. Using fallback alert.');\n        if (options.icon === 'error' || options.type === 'error') {\n            alert(options.title ? \"\".concat(options.title, \": \").concat(options.text || '') : options.text);\n            return {\n                isConfirmed: true\n            };\n        } else if (options.icon === 'warning' || options.type === 'warning') {\n            const result = confirm(options.title ? \"\".concat(options.title, \": \").concat(options.text || '') : options.text);\n            return {\n                isConfirmed: result\n            };\n        } else {\n            alert(options.title ? \"\".concat(options.title, \": \").concat(options.text || '') : options.text);\n            return {\n                isConfirmed: true\n            };\n        }\n    },\n    success: async (title, text)=>{\n        return alertAPI.fire({\n            title,\n            text,\n            icon: 'success'\n        });\n    },\n    error: async (title, text)=>{\n        return alertAPI.fire({\n            title,\n            text,\n            icon: 'error'\n        });\n    },\n    warning: async function(title, text) {\n        let showCancelButton = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true;\n        return alertAPI.fire({\n            title,\n            text,\n            icon: 'warning',\n            showCancelButton\n        });\n    },\n    info: async (title, text)=>{\n        return alertAPI.fire({\n            title,\n            text,\n            icon: 'info'\n        });\n    },\n    confirm: async function(title, text) {\n        let confirmButtonText = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 'ตกลง', cancelButtonText = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 'ยกเลิก';\n        return alertAPI.fire({\n            title,\n            text,\n            icon: 'question',\n            showCancelButton: true,\n            confirmButtonText,\n            cancelButtonText\n        });\n    },\n    showLoading: function() {\n        let title = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 'กำลังโหลด...';\n        if (window.__alertService) {\n            return window.__alertService.showLoading(title);\n        }\n        console.log('Loading:', title);\n    },\n    close: ()=>{\n        if (window.__alertService) {\n            return window.__alertService.closeAll();\n        }\n        console.log('Closing alerts');\n    }\n};\n// Backward compatibility for code that uses Swal\nconst Swal = alertAPI;\n// Alert component based on TailwindAlert\nconst Alert = (param)=>{\n    let { id, isOpen, onClose, title, text, icon = 'info', type = 'info', confirmButtonText = 'ตกลง', cancelButtonText = 'ยกเลิก', onConfirm, onCancel, showCancelButton = false, allowOutsideClick = true, timer = 0, html = null, customClass = {} } = param;\n    _s1();\n    const [isVisible, setIsVisible] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(isOpen);\n    const [timeLeft, setTimeLeft] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(timer > 0 ? Math.floor(timer / 1000) : 0);\n    // Apply icon based on type/icon prop\n    const finalType = icon || type;\n    // Handle ESC key for dismissing alert\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Alert.useEffect\": ()=>{\n            if (!isVisible) return;\n            const handleKeyDown = {\n                \"Alert.useEffect.handleKeyDown\": (e)=>{\n                    if (e.key === 'Escape' && allowOutsideClick) {\n                        handleClose(false);\n                    }\n                }\n            }[\"Alert.useEffect.handleKeyDown\"];\n            document.addEventListener('keydown', handleKeyDown);\n            return ({\n                \"Alert.useEffect\": ()=>document.removeEventListener('keydown', handleKeyDown)\n            })[\"Alert.useEffect\"];\n        }\n    }[\"Alert.useEffect\"], [\n        isVisible,\n        allowOutsideClick\n    ]);\n    // Handle timer autclose\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Alert.useEffect\": ()=>{\n            if (!isVisible || timer <= 0) return;\n            const interval = setInterval({\n                \"Alert.useEffect.interval\": ()=>{\n                    setTimeLeft({\n                        \"Alert.useEffect.interval\": (prev)=>{\n                            if (prev <= 1) {\n                                clearInterval(interval);\n                                setTimeout({\n                                    \"Alert.useEffect.interval\": ()=>handleClose(true)\n                                }[\"Alert.useEffect.interval\"], 0);\n                                return 0;\n                            }\n                            return prev - 1;\n                        }\n                    }[\"Alert.useEffect.interval\"]);\n                }\n            }[\"Alert.useEffect.interval\"], 1000);\n            return ({\n                \"Alert.useEffect\": ()=>clearInterval(interval)\n            })[\"Alert.useEffect\"];\n        }\n    }[\"Alert.useEffect\"], [\n        isVisible,\n        timer\n    ]);\n    // Handle backdrop click\n    const handleBackdropClick = (e)=>{\n        if (e.target === e.currentTarget && allowOutsideClick) {\n            handleClose(false);\n        }\n    };\n    // Handle close with result\n    const handleClose = (isConfirmed)=>{\n        setIsVisible(false);\n        setTimeout(()=>{\n            if (isConfirmed) {\n                onConfirm && onConfirm();\n            } else {\n                onCancel && onCancel();\n            }\n            onClose && onClose(isConfirmed);\n        }, 300);\n    };\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 flex items-center justify-center z-50 transition-opacity duration-300 \".concat(isVisible ? 'opacity-100' : 'opacity-0 pointer-events-none', \" \").concat(allowOutsideClick ? 'cursor-pointer' : ''),\n        onClick: handleBackdropClick,\n        style: {\n            backgroundColor: 'rgba(0, 0, 0, 0.4)',\n            backdropFilter: 'blur(2px)'\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-2xl max-w-md w-full m-4 transform transition-all duration-300 \".concat(isVisible ? 'scale-100 opacity-100' : 'scale-95 opacity-0', \" cursor-default \").concat(customClass.container || ''),\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center\",\n                        children: [\n                            finalType === 'success' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto bg-green-100 p-3 rounded-full w-fit mb-4\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-10 h-10 text-green-600\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: \"2\",\n                                        d: \"M5 13l4 4L19 7\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                        lineNumber: 199,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                    lineNumber: 198,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 197,\n                                columnNumber: 15\n                            }, undefined),\n                            finalType === 'error' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto bg-red-100 p-3 rounded-full w-fit mb-4\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-10 h-10 text-red-600\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: \"2\",\n                                        d: \"M6 18L18 6M6 6l12 12\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                        lineNumber: 206,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                    lineNumber: 205,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 204,\n                                columnNumber: 15\n                            }, undefined),\n                            finalType === 'info' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto bg-blue-100 p-3 rounded-full w-fit mb-4\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-10 h-10 text-blue-600\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: \"2\",\n                                        d: \"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                        lineNumber: 213,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                    lineNumber: 212,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 211,\n                                columnNumber: 15\n                            }, undefined),\n                            finalType === 'warning' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto bg-yellow-100 p-3 rounded-full w-fit mb-4\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-10 h-10 text-yellow-600\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: \"2\",\n                                        d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                        lineNumber: 220,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                    lineNumber: 219,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 218,\n                                columnNumber: 15\n                            }, undefined),\n                            finalType === 'question' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto bg-purple-100 p-3 rounded-full w-fit mb-4\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-10 h-10 text-purple-600\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: \"2\",\n                                        d: \"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                        lineNumber: 227,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                    lineNumber: 226,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 225,\n                                columnNumber: 15\n                            }, undefined),\n                            finalType === 'loading' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mx-auto p-3 w-fit mb-4\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-12 h-12 border-4 border-t-[#0ab4ab] border-r-[#0ab4ab] border-b-gray-200 border-l-gray-200 rounded-full animate-spin\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                    lineNumber: 233,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 232,\n                                columnNumber: 15\n                            }, undefined),\n                            title && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"text-xl font-semibold mb-2 \".concat(customClass.title || ''),\n                                children: title\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 237,\n                                columnNumber: 23\n                            }, undefined),\n                            text && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-gray-600 \".concat(customClass.text || ''),\n                                children: text\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 238,\n                                columnNumber: 22\n                            }, undefined),\n                            html && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-2 \".concat(customClass.htmlContainer || ''),\n                                dangerouslySetInnerHTML: {\n                                    __html: html\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 239,\n                                columnNumber: 22\n                            }, undefined),\n                            timeLeft > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 text-sm text-gray-500\",\n                                children: [\n                                    \"ปิดอัตโนมัติใน \",\n                                    timeLeft,\n                                    \" วินาที\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 243,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                        lineNumber: 194,\n                        columnNumber: 11\n                    }, undefined),\n                    finalType !== 'loading' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-center gap-3 mt-6\",\n                        children: [\n                            showCancelButton && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>handleClose(false),\n                                className: \"px-5 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 \".concat(customClass.cancelButton || ''),\n                                children: cancelButtonText\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 252,\n                                columnNumber: 17\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>handleClose(true),\n                                className: \"px-5 py-2 bg-[#0ab4ab] text-white rounded-md hover:bg-[#099a92] \".concat(customClass.confirmButton || ''),\n                                children: confirmButtonText\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                                lineNumber: 259,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                        lineNumber: 250,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                lineNumber: 193,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n            lineNumber: 188,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n        lineNumber: 178,\n        columnNumber: 5\n    }, undefined);\n};\n_s1(Alert, \"hnT4Cf/sOdrmjwsx6O9LljyEvis=\");\n_c = Alert;\n// Provider component that wraps your app and makes alerts available\nconst AlertProvider = (param)=>{\n    let { children } = param;\n    _s2();\n    const [alerts, setAlerts] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [globalLoading, setGlobalLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const idCounterRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const generateUniqueId = ()=>{\n        // ใช้ useRef แทน useState เพื่อให้ได้ค่าปัจจุบันทันที\n        idCounterRef.current += 1;\n        return \"\".concat(Date.now(), \"-\").concat(idCounterRef.current, \"-\").concat(Math.random().toString(36).substr(2, 5));\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AlertProvider.useEffect\": ()=>{\n            // Create global access to the alert service\n            window.__alertService = {\n                showAlert,\n                showLoading,\n                closeAll\n            };\n            return ({\n                \"AlertProvider.useEffect\": ()=>{\n                    delete window.__alertService;\n                }\n            })[\"AlertProvider.useEffect\"];\n        }\n    }[\"AlertProvider.useEffect\"], []);\n    const showAlert = (options)=>{\n        return new Promise((resolve)=>{\n            const id = generateUniqueId();\n            const alert1 = {\n                id,\n                isOpen: true,\n                ...options,\n                onClose: (result)=>{\n                    closeAlert(id);\n                    resolve({\n                        isConfirmed: result\n                    });\n                }\n            };\n            setAlerts((prevAlerts)=>[\n                    ...prevAlerts,\n                    alert1\n                ]);\n        });\n    };\n    const showLoading = function() {\n        let title = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 'กำลังโหลด...';\n        closeAll(); // ปิดทุก alert ก่อน\n        const id = generateUniqueId();\n        const loadingAlert = {\n            id,\n            isOpen: true,\n            title,\n            type: 'loading',\n            icon: 'loading',\n            allowOutsideClick: false\n        };\n        setGlobalLoading(loadingAlert);\n        return id;\n    };\n    const closeAlert = (id)=>{\n        setAlerts((prevAlerts)=>prevAlerts.map((alert1)=>alert1.id === id ? {\n                    ...alert1,\n                    isOpen: false\n                } : alert1));\n        // Remove after animation\n        setTimeout(()=>{\n            setAlerts((prevAlerts)=>prevAlerts.filter((alert1)=>alert1.id !== id));\n        }, 300);\n    };\n    const closeAll = ()=>{\n        setAlerts((prevAlerts)=>prevAlerts.map((alert1)=>({\n                    ...alert1,\n                    isOpen: false\n                })));\n        if (globalLoading) {\n            setGlobalLoading({\n                ...globalLoading,\n                isOpen: false\n            });\n            setTimeout(()=>{\n                setGlobalLoading(null);\n            }, 300);\n        }\n        setTimeout(()=>{\n            setAlerts([]);\n        }, 300);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AlertContext.Provider, {\n        value: {\n            showAlert,\n            showLoading,\n            closeAlert,\n            closeAll\n        },\n        children: [\n            children,\n            alerts.map((alert1)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Alert, {\n                    ...alert1\n                }, alert1.id, false, {\n                    fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                    lineNumber: 367,\n                    columnNumber: 9\n                }, undefined)),\n            globalLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Alert, {\n                ...globalLoading\n            }, \"loading-\".concat(globalLoading.id), false, {\n                fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n                lineNumber: 371,\n                columnNumber: 25\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\B_SIR\\\\OneDrive\\\\เดสก์ท็อป\\\\Active 14-3-2025\\\\Summary_of_Personnel_Ratio\\\\app\\\\utils\\\\alertService.js\",\n        lineNumber: 362,\n        columnNumber: 5\n    }, undefined);\n};\n_s2(AlertProvider, \"ajT0oUFMeuBkzLSr6JiYFrKGNwc=\");\n_c1 = AlertProvider;\nvar _c, _c1;\n$RefreshReg$(_c, \"Alert\");\n$RefreshReg$(_c1, \"AlertProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC91dGlscy9hbGVydFNlcnZpY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQytFO0FBRS9FOzs7Q0FHQyxHQUVELHdDQUF3QztBQUN4QyxNQUFNSyw2QkFBZUwsb0RBQWFBLENBQUM7QUFFbkMseUNBQXlDO0FBQ2xDLE1BQU1NLFdBQVc7O0lBQ3RCLE1BQU1DLFVBQVVOLGlEQUFVQSxDQUFDSTtJQUMzQixJQUFJLENBQUNFLFNBQVM7UUFDWixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFDQSxPQUFPRDtBQUNULEVBQUU7R0FOV0Q7QUFRYiw0Q0FBNEM7QUFDckMsTUFBTUcsV0FBVztJQUN0QkMsTUFBTSxPQUFPQztRQUNYLDhDQUE4QztRQUM5QyxJQUFJQyxPQUFPQyxjQUFjLEVBQUU7WUFDekIsT0FBT0QsT0FBT0MsY0FBYyxDQUFDQyxTQUFTLENBQUNIO1FBQ3pDO1FBRUEsbURBQW1EO1FBQ25ESSxRQUFRQyxJQUFJLENBQUM7UUFDYixJQUFJTCxRQUFRTSxJQUFJLEtBQUssV0FBV04sUUFBUU8sSUFBSSxLQUFLLFNBQVM7WUFDeERDLE1BQU1SLFFBQVFTLEtBQUssR0FBRyxHQUFxQlQsT0FBbEJBLFFBQVFTLEtBQUssRUFBQyxNQUF1QixPQUFuQlQsUUFBUVUsSUFBSSxJQUFJLE1BQU9WLFFBQVFVLElBQUk7WUFDOUUsT0FBTztnQkFBRUMsYUFBYTtZQUFLO1FBQzdCLE9BQU8sSUFBSVgsUUFBUU0sSUFBSSxLQUFLLGFBQWFOLFFBQVFPLElBQUksS0FBSyxXQUFXO1lBQ25FLE1BQU1LLFNBQVNDLFFBQVFiLFFBQVFTLEtBQUssR0FBRyxHQUFxQlQsT0FBbEJBLFFBQVFTLEtBQUssRUFBQyxNQUF1QixPQUFuQlQsUUFBUVUsSUFBSSxJQUFJLE1BQU9WLFFBQVFVLElBQUk7WUFDL0YsT0FBTztnQkFBRUMsYUFBYUM7WUFBTztRQUMvQixPQUFPO1lBQ0xKLE1BQU1SLFFBQVFTLEtBQUssR0FBRyxHQUFxQlQs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TTtRQUd2RCxJQUFJMEQsZUFBZTtZQUNqQkMsaUJBQWlCO2dCQUFFLEdBQUdELGFBQWE7Z0JBQUUxRCxRQUFRO1lBQU07WUFDbkQwQixXQUFXO2dCQUNUaUMsaUJBQWlCO1lBQ25CLEdBQUc7UUFDTDtRQUVBakMsV0FBVztZQUNUK0IsVUFBVSxFQUFFO1FBQ2QsR0FBRztJQUNMO0lBRUEscUJBQ0UsOERBQUMzRixhQUFhNkcsUUFBUTtRQUFDQyxPQUFPO1lBQUVyRztZQUFXa0I7WUFBYTZFO1lBQVkxRTtRQUFTOztZQUMxRTJEO1lBR0FDLE9BQU9pQixHQUFHLENBQUMsQ0FBQzdGLHVCQUNYLDhEQUFDa0I7b0JBQXNCLEdBQUdsQixNQUFLO21CQUFuQkEsT0FBTW1CLEVBQUU7Ozs7O1lBSXJCMkQsK0JBQWlCLDhEQUFDNUQ7Z0JBQTJDLEdBQUc0RCxhQUFhO2VBQWhELFdBQTRCLE9BQWpCQSxjQUFjM0QsRUFBRTs7Ozs7Ozs7Ozs7QUFHL0QsRUFBRTtJQXBHV3VEO01BQUFBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEJfU0lSXFxPbmVEcml2ZVxc4LmA4LiU4Liq4LiB4LmM4LiX4LmH4Lit4LibXFxBY3RpdmUgMTQtMy0yMDI1XFxTdW1tYXJ5X29mX1BlcnNvbm5lbF9SYXRpb1xcYXBwXFx1dGlsc1xcYWxlcnRTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5cclxuLyoqXHJcbiAqIEFsZXJ0U2VydmljZSAtIOC4muC4o+C4tOC4geC4suC4o+C5geC4iOC5ieC4h+C5gOC4leC4t+C4reC4meC4l+C4teC5iOC4nuC4seC4kuC4meC4suC4lOC5ieC4p+C4oiBUYWlsd2luZCBDU1NcclxuICog4LiX4LiU4LmB4LiX4LiZ4LiB4Liy4Lij4LmD4LiK4LmJIFN3ZWV0QWxlcnQyIOC5gOC4nuC4t+C5iOC4reC5g+C4q+C5ieC4quC4reC4lOC4hOC4peC5ieC4reC4h+C4geC4seC4miBkZXNpZ24gc3lzdGVtIOC4guC4reC4h+C5geC4reC4nuC4nuC4peC4tOC5gOC4hOC4iuC4seC4mVxyXG4gKi9cclxuXHJcbi8vIENyZWF0ZSBhIGNvbnRleHQgZm9yIG91ciBhbGVydCBzeXN0ZW1cclxuY29uc3QgQWxlcnRDb250ZXh0ID0gY3JlYXRlQ29udGV4dChudWxsKTtcclxuXHJcbi8vIEN1c3RvbSBob29rIGZvciB1c2luZyBvdXIgYWxlcnQgc3lzdGVtXHJcbmV4cG9ydCBjb25zdCB1c2VBbGVydCA9ICgpID0+IHtcclxuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChBbGVydENvbnRleHQpO1xyXG4gIGlmICghY29udGV4dCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VBbGVydCBtdXN0IGJlIHVzZWQgd2l0aGluIGFuIEFsZXJ0UHJvdmlkZXInKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbnRleHQ7XHJcbn07XHJcblxyXG4vLyDguKrguKPguYnguLLguIcgYWxlcnQgQVBJIOC4quC4s+C4q+C4o+C4seC4muC5g+C4iuC5ieC4h+C4suC4meC5g+C4meC5geC4reC4nuC4nuC4peC4tOC5gOC4hOC4iuC4seC4mVxyXG5leHBvcnQgY29uc3QgYWxlcnRBUEkgPSB7XHJcbiAgZmlyZTogYXN5bmMgKG9wdGlvbnMpID0+IHtcclxuICAgIC8vIOC4luC5ieC4suC4oeC4teC4geC4suC4o+C5g+C4iuC5iSBHbG9iYWxBbGVydFNlcnZpY2Ug4Lic4LmI4Liy4LiZIGNvbnRleHRcclxuICAgIGlmICh3aW5kb3cuX19hbGVydFNlcnZpY2UpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5fX2FsZXJ0U2VydmljZS5zaG93QWxlcnQob3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZhbGxiYWNrIOC4quC4s+C4q+C4o+C4seC4muC4geC4o+C4k+C4teC4l+C4teC5iOC5hOC4oeC5iOC5hOC4lOC5ieC4reC4ouC4ueC5iOC5g+C4mSBBbGVydFByb3ZpZGVyXHJcbiAgICBjb25zb2xlLndhcm4oJ0FsZXJ0UHJvdmlkZXIgaXMgbm90IGZvdW5kLiBVc2luZyBmYWxsYmFjayBhbGVydC4nKTtcclxuICAgIGlmIChvcHRpb25zLmljb24gPT09ICdlcnJvcicgfHwgb3B0aW9ucy50eXBlID09PSAnZXJyb3InKSB7XHJcbiAgICAgIGFsZXJ0KG9wdGlvbnMudGl0bGUgPyBgJHtvcHRpb25zLnRpdGxlfTogJHtvcHRpb25zLnRleHQgfHwgJyd9YCA6IG9wdGlvbnMudGV4dCk7XHJcbiAgICAgIHJldHVybiB7IGlzQ29uZmlybWVkOiB0cnVlIH07XHJcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuaWNvbiA9PT0gJ3dhcm5pbmcnIHx8IG9wdGlvbnMudHlwZSA9PT0gJ3dhcm5pbmcnKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbmZpcm0ob3B0aW9ucy50aXRsZSA/IGAke29wdGlvbnMudGl0bGV9OiAke29wdGlvbnMudGV4dCB8fCAnJ31gIDogb3B0aW9ucy50ZXh0KTtcclxuICAgICAgcmV0dXJuIHsgaXNDb25maXJtZWQ6IHJlc3VsdCB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWxlcnQob3B0aW9ucy50aXRsZSA/IGAke29wdGlvbnMudGl0bGV9OiAke29wdGlvbnMudGV4dCB8fCAnJ31gIDogb3B0aW9ucy50ZXh0KTtcclxuICAgICAgcmV0dXJuIHsgaXNDb25maXJtZWQ6IHRydWUgfTtcclxuICAgIH1cclxuICB9LFxyXG4gIHN1Y2Nlc3M6IGFzeW5jICh0aXRsZSwgdGV4dCkgPT4ge1xyXG4gICAgcmV0dXJuIGFsZXJ0QVBJLmZpcmUoe1xyXG4gICAgICB0aXRsZSxcclxuICAgICAgdGV4dCxcclxuICAgICAgaWNvbjogJ3N1Y2Nlc3MnXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGVycm9yOiBhc3luYyAodGl0bGUsIHRleHQpID0+IHtcclxuICAgIHJldHVybiBhbGVydEFQSS5maXJlKHtcclxuICAgICAgdGl0bGUsXHJcbiAgICAgIHRleHQsXHJcbiAgICAgIGljb246ICdlcnJvcidcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgd2FybmluZzogYXN5bmMgKHRpdGxlLCB0ZXh0LCBzaG93Q2FuY2VsQnV0dG9uID0gdHJ1ZSkgPT4ge1xyXG4gICAgcmV0dXJuIGFsZXJ0QVBJLmZpcmUoe1xyXG4gICAgICB0aXRsZSxcclxuICAgICAgdGV4dCxcclxuICAgICAgaWNvbjogJ3dhcm5pbmcnLFxyXG4gICAgICBzaG93Q2FuY2VsQnV0dG9uXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGluZm86IGFzeW5jICh0aXRsZSwgdGV4dCkgPT4ge1xyXG4gICAgcmV0dXJuIGFsZXJ0QVBJLmZpcmUoe1xyXG4gICAgICB0aXRsZSxcclxuICAgICAgdGV4dCxcclxuICAgICAgaWNvbjogJ2luZm8nXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGNvbmZpcm06IGFzeW5jICh0aXRsZSwgdGV4dCwgY29uZmlybUJ1dHRvblRleHQgPSAn4LiV4LiB4Lil4LiHJywgY2FuY2VsQnV0dG9uVGV4dCA9ICfguKLguIHguYDguKXguLTguIEnKSA9PiB7XHJcbiAgICByZXR1cm4gYWxlcnRBUEkuZmlyZSh7XHJcbiAgICAgIHRpdGxlLFxyXG4gICAgICB0ZXh0LFxyXG4gICAgICBpY29uOiAncXVlc3Rpb24nLFxyXG4gICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICBjb25maXJtQnV0dG9uVGV4dCxcclxuICAgICAgY2FuY2VsQnV0dG9uVGV4dFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBzaG93TG9hZGluZzogKHRpdGxlID0gJ+C4geC4s+C4peC4seC4h+C5guC4q+C4peC4lC4uLicpID0+IHtcclxuICAgIGlmICh3aW5kb3cuX19hbGVydFNlcnZpY2UpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5fX2FsZXJ0U2VydmljZS5zaG93TG9hZGluZyh0aXRsZSk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnTG9hZGluZzonLCB0aXRsZSk7XHJcbiAgfSxcclxuICBjbG9zZTogKCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5fX2FsZXJ0U2VydmljZSkge1xyXG4gICAgICByZXR1cm4gd2luZG93Ll9fYWxlcnRTZXJ2aWNlLmNsb3NlQWxsKCk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnQ2xvc2luZyBhbGVydHMnKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBCYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBjb2RlIHRoYXQgdXNlcyBTd2FsXHJcbmV4cG9ydCBjb25zdCBTd2FsID0gYWxlcnRBUEk7XHJcblxyXG4vLyBBbGVydCBjb21wb25lbnQgYmFzZWQgb24gVGFpbHdpbmRBbGVydFxyXG5jb25zdCBBbGVydCA9ICh7XHJcbiAgaWQsXHJcbiAgaXNPcGVuLFxyXG4gIG9uQ2xvc2UsXHJcbiAgdGl0bGUsXHJcbiAgdGV4dCxcclxuICBpY29uID0gJ2luZm8nLFxyXG4gIHR5cGUgPSAnaW5mbycsXHJcbiAgY29uZmlybUJ1dHRvblRleHQgPSAn4LiV4LiB4Lil4LiHJyxcclxuICBjYW5jZWxCdXR0b25UZXh0ID0gJ+C4ouC4geC5gOC4peC4tOC4gScsXHJcbiAgb25Db25maXJtLFxyXG4gIG9uQ2FuY2VsLFxyXG4gIHNob3dDYW5jZWxCdXR0b24gPSBmYWxzZSxcclxuICBhbGxvd091dHNpZGVDbGljayA9IHRydWUsXHJcbiAgdGltZXIgPSAwLFxyXG4gIGh0bWwgPSBudWxsLFxyXG4gIGN1c3RvbUNsYXNzID0ge30sXHJcbn0pID0+IHtcclxuICBjb25zdCBbaXNWaXNpYmxlLCBzZXRJc1Zpc2libGVdID0gdXNlU3RhdGUoaXNPcGVuKTtcclxuICBjb25zdCBbdGltZUxlZnQsIHNldFRpbWVMZWZ0XSA9IHVzZVN0YXRlKHRpbWVyID4gMCA/IE1hdGguZmxvb3IodGltZXIgLyAxMDAwKSA6IDApO1xyXG4gIFxyXG4gIC8vIEFwcGx5IGljb24gYmFzZWQgb24gdHlwZS9pY29uIHByb3BcclxuICBjb25zdCBmaW5hbFR5cGUgPSBpY29uIHx8IHR5cGU7XHJcbiAgXHJcbiAgLy8gSGFuZGxlIEVTQyBrZXkgZm9yIGRpc21pc3NpbmcgYWxlcnRcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFpc1Zpc2libGUpIHJldHVybjtcclxuICAgIFxyXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XHJcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScgJiYgYWxsb3dPdXRzaWRlQ2xpY2spIHtcclxuICAgICAgICBoYW5kbGVDbG9zZShmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcclxuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XHJcbiAgfSwgW2lzVmlzaWJsZSwgYWxsb3dPdXRzaWRlQ2xpY2tdKTtcclxuICBcclxuICAvLyBIYW5kbGUgdGltZXIgYXV0Y2xvc2VcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFpc1Zpc2libGUgfHwgdGltZXIgPD0gMCkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgc2V0VGltZUxlZnQocHJldiA9PiB7XHJcbiAgICAgICAgaWYgKHByZXYgPD0gMSkge1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGhhbmRsZUNsb3NlKHRydWUpLCAwKTtcclxuICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJldiAtIDE7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgICBcclxuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICB9LCBbaXNWaXNpYmxlLCB0aW1lcl0pO1xyXG4gIFxyXG4gIC8vIEhhbmRsZSBiYWNrZHJvcCBjbGlja1xyXG4gIGNvbnN0IGhhbmRsZUJhY2tkcm9wQ2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQgJiYgYWxsb3dPdXRzaWRlQ2xpY2spIHtcclxuICAgICAgaGFuZGxlQ2xvc2UoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgXHJcbiAgLy8gSGFuZGxlIGNsb3NlIHdpdGggcmVzdWx0XHJcbiAgY29uc3QgaGFuZGxlQ2xvc2UgPSAoaXNDb25maXJtZWQpID0+IHtcclxuICAgIHNldElzVmlzaWJsZShmYWxzZSk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKGlzQ29uZmlybWVkKSB7XHJcbiAgICAgICAgb25Db25maXJtICYmIG9uQ29uZmlybSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9uQ2FuY2VsICYmIG9uQ2FuY2VsKCk7XHJcbiAgICAgIH1cclxuICAgICAgb25DbG9zZSAmJiBvbkNsb3NlKGlzQ29uZmlybWVkKTtcclxuICAgIH0sIDMwMCk7XHJcbiAgfTtcclxuICBcclxuICBpZiAoIWlzT3BlbikgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgXHJcbiAgICAgIGNsYXNzTmFtZT17YGZpeGVkIGluc2V0LTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tMzAwICR7XHJcbiAgICAgICAgaXNWaXNpYmxlID8gJ29wYWNpdHktMTAwJyA6ICdvcGFjaXR5LTAgcG9pbnRlci1ldmVudHMtbm9uZSdcclxuICAgICAgfSAke2FsbG93T3V0c2lkZUNsaWNrID8gJ2N1cnNvci1wb2ludGVyJyA6ICcnfWB9XHJcbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUJhY2tkcm9wQ2xpY2t9XHJcbiAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjQpJyxcclxuICAgICAgICBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoMnB4KSdcclxuICAgICAgfX1cclxuICAgID5cclxuICAgICAgPGRpdiBcclxuICAgICAgICBjbGFzc05hbWU9e2BiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy0yeGwgbWF4LXctbWQgdy1mdWxsIG0tNCB0cmFuc2Zvcm0gdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwICR7XHJcbiAgICAgICAgICBpc1Zpc2libGUgPyAnc2NhbGUtMTAwIG9wYWNpdHktMTAwJyA6ICdzY2FsZS05NSBvcGFjaXR5LTAnXHJcbiAgICAgICAgfSBjdXJzb3ItZGVmYXVsdCAke2N1c3RvbUNsYXNzLmNvbnRhaW5lciB8fCAnJ31gfVxyXG4gICAgICA+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTZcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgey8qIEljb24gYmFzZWQgb24gdHlwZSAqL31cclxuICAgICAgICAgICAge2ZpbmFsVHlwZSA9PT0gJ3N1Y2Nlc3MnICYmIChcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gYmctZ3JlZW4tMTAwIHAtMyByb3VuZGVkLWZ1bGwgdy1maXQgbWItNFwiPlxyXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTEwIGgtMTAgdGV4dC1ncmVlbi02MDBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPVwiMlwiIGQ9XCJNNSAxM2w0IDRMMTkgN1wiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAge2ZpbmFsVHlwZSA9PT0gJ2Vycm9yJyAmJiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteC1hdXRvIGJnLXJlZC0xMDAgcC0zIHJvdW5kZWQtZnVsbCB3LWZpdCBtYi00XCI+XHJcbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctMTAgaC0xMCB0ZXh0LXJlZC02MDBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPVwiMlwiIGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAge2ZpbmFsVHlwZSA9PT0gJ2luZm8nICYmIChcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gYmctYmx1ZS0xMDAgcC0zIHJvdW5kZWQtZnVsbCB3LWZpdCBtYi00XCI+XHJcbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctMTAgaC0xMCB0ZXh0LWJsdWUtNjAwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD1cIjJcIiBkPVwiTTEzIDE2aC0xdi00aC0xbTEtNGguMDFNMjEgMTJhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgICB7ZmluYWxUeXBlID09PSAnd2FybmluZycgJiYgKFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byBiZy15ZWxsb3ctMTAwIHAtMyByb3VuZGVkLWZ1bGwgdy1maXQgbWItNFwiPlxyXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTEwIGgtMTAgdGV4dC15ZWxsb3ctNjAwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD1cIjJcIiBkPVwiTTEyIDl2Mm0wIDRoLjAxbS02LjkzOCA0aDEzLjg1NmMxLjU0IDAgMi41MDItMS42NjcgMS43MzItM0wxMy43MzIgNGMtLjc3LTEuMzMzLTIuNjk0LTEuMzMzLTMuNDY0IDBMMy4zNCAxNmMtLjc3IDEuMzMzLjE5MiAzIDEuNzMyIDN6XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgICB7ZmluYWxUeXBlID09PSAncXVlc3Rpb24nICYmIChcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gYmctcHVycGxlLTEwMCBwLTMgcm91bmRlZC1mdWxsIHctZml0IG1iLTRcIj5cclxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHRleHQtcHVycGxlLTYwMFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9XCIyXCIgZD1cIk04LjIyOCA5Yy41NDktMS4xNjUgMi4wMy0yIDMuNzcyLTIgMi4yMSAwIDQgMS4zNDMgNCAzIDAgMS40LTEuMjc4IDIuNTc1LTMuMDA2IDIuOTA3LS41NDIuMTA0LS45OTQuNTQtLjk5NCAxLjA5M20wIDNoLjAxTTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAge2ZpbmFsVHlwZSA9PT0gJ2xvYWRpbmcnICYmIChcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gcC0zIHctZml0IG1iLTRcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMiBoLTEyIGJvcmRlci00IGJvcmRlci10LVsjMGFiNGFiXSBib3JkZXItci1bIzBhYjRhYl0gYm9yZGVyLWItZ3JheS0yMDAgYm9yZGVyLWwtZ3JheS0yMDAgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpblwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAge3RpdGxlICYmIDxoMiBjbGFzc05hbWU9e2B0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItMiAke2N1c3RvbUNsYXNzLnRpdGxlIHx8ICcnfWB9Pnt0aXRsZX08L2gyPn1cclxuICAgICAgICAgICAge3RleHQgJiYgPHAgY2xhc3NOYW1lPXtgdGV4dC1ncmF5LTYwMCAke2N1c3RvbUNsYXNzLnRleHQgfHwgJyd9YH0+e3RleHR9PC9wPn1cclxuICAgICAgICAgICAge2h0bWwgJiYgPGRpdiBjbGFzc05hbWU9e2BtdC0yICR7Y3VzdG9tQ2xhc3MuaHRtbENvbnRhaW5lciB8fCAnJ31gfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IGh0bWwgfX0+PC9kaXY+fVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgey8qIFRpbWVyIGluZGljYXRvciAqL31cclxuICAgICAgICAgICAge3RpbWVMZWZ0ID4gMCAmJiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIHRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxyXG4gICAgICAgICAgICAgICAg4Lib4Li04LiU4Lit4Lix4LiV4LmC4LiZ4Lih4Lix4LiV4Li04LmD4LiZIHt0aW1lTGVmdH0g4Lin4Li04LiZ4Liy4LiX4Li1XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAge2ZpbmFsVHlwZSAhPT0gJ2xvYWRpbmcnICYmIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGdhcC0zIG10LTZcIj5cclxuICAgICAgICAgICAgICB7c2hvd0NhbmNlbEJ1dHRvbiAmJiAoXHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUNsb3NlKGZhbHNlKX1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtNSBweS0yIGJnLWdyYXktMTAwIHRleHQtZ3JheS03MDAgcm91bmRlZC1tZCBob3ZlcjpiZy1ncmF5LTIwMCAke2N1c3RvbUNsYXNzLmNhbmNlbEJ1dHRvbiB8fCAnJ31gfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICB7Y2FuY2VsQnV0dG9uVGV4dH1cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQ2xvc2UodHJ1ZSl9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC01IHB5LTIgYmctWyMwYWI0YWJdIHRleHQtd2hpdGUgcm91bmRlZC1tZCBob3ZlcjpiZy1bIzA5OWE5Ml0gJHtjdXN0b21DbGFzcy5jb25maXJtQnV0dG9uIHx8ICcnfWB9XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2NvbmZpcm1CdXR0b25UZXh0fVxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbi8vIFByb3ZpZGVyIGNvbXBvbmVudCB0aGF0IHdyYXBzIHlvdXIgYXBwIGFuZCBtYWtlcyBhbGVydHMgYXZhaWxhYmxlXHJcbmV4cG9ydCBjb25zdCBBbGVydFByb3ZpZGVyID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xyXG4gIGNvbnN0IFthbGVydHMsIHNldEFsZXJ0c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2dsb2JhbExvYWRpbmcsIHNldEdsb2JhbExvYWRpbmddID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgaWRDb3VudGVyUmVmID0gdXNlUmVmKDApO1xyXG4gIFxyXG4gIGNvbnN0IGdlbmVyYXRlVW5pcXVlSWQgPSAoKSA9PiB7XHJcbiAgICAvLyDguYPguIrguYkgdXNlUmVmIOC5geC4l+C4mSB1c2VTdGF0ZSDguYDguJ7guLfguYjguK3guYPguKvguYnguYTguJTguYnguITguYjguLLguJvguLHguIjguIjguLjguJrguLHguJnguJfguLHguJnguJfguLVcclxuICAgIGlkQ291bnRlclJlZi5jdXJyZW50ICs9IDE7XHJcbiAgICByZXR1cm4gYCR7RGF0ZS5ub3coKX0tJHtpZENvdW50ZXJSZWYuY3VycmVudH0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNSl9YDtcclxuICB9O1xyXG4gIFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBDcmVhdGUgZ2xvYmFsIGFjY2VzcyB0byB0aGUgYWxlcnQgc2VydmljZVxyXG4gICAgd2luZG93Ll9fYWxlcnRTZXJ2aWNlID0ge1xyXG4gICAgICBzaG93QWxlcnQsXHJcbiAgICAgIHNob3dMb2FkaW5nLFxyXG4gICAgICBjbG9zZUFsbFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgZGVsZXRlIHdpbmRvdy5fX2FsZXJ0U2VydmljZTtcclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBzaG93QWxlcnQgPSAob3B0aW9ucykgPT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkID0gZ2VuZXJhdGVVbmlxdWVJZCgpO1xyXG4gICAgICBjb25zdCBhbGVydCA9IHtcclxuICAgICAgICBpZCxcclxuICAgICAgICBpc09wZW46IHRydWUsXHJcbiAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICBvbkNsb3NlOiAocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICBjbG9zZUFsZXJ0KGlkKTtcclxuICAgICAgICAgIHJlc29sdmUoeyBpc0NvbmZpcm1lZDogcmVzdWx0IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgc2V0QWxlcnRzKChwcmV2QWxlcnRzKSA9PiBbLi4ucHJldkFsZXJ0cywgYWxlcnRdKTtcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgXHJcbiAgY29uc3Qgc2hvd0xvYWRpbmcgPSAodGl0bGUgPSAn4LiB4Liz4Lil4Lix4LiH4LmC4Lir4Lil4LiULi4uJykgPT4ge1xyXG4gICAgY2xvc2VBbGwoKTsgLy8g4Lib4Li04LiU4LiX4Li44LiBIGFsZXJ0IOC4geC5iOC4reC4mVxyXG4gICAgXHJcbiAgICBjb25zdCBpZCA9IGdlbmVyYXRlVW5pcXVlSWQoKTtcclxuICAgIGNvbnN0IGxvYWRpbmdBbGVydCA9IHtcclxuICAgICAgaWQsXHJcbiAgICAgIGlzT3BlbjogdHJ1ZSxcclxuICAgICAgdGl0bGUsXHJcbiAgICAgIHR5cGU6ICdsb2FkaW5nJyxcclxuICAgICAgaWNvbjogJ2xvYWRpbmcnLFxyXG4gICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2VcclxuICAgIH07XHJcbiAgICBcclxuICAgIHNldEdsb2JhbExvYWRpbmcobG9hZGluZ0FsZXJ0KTtcclxuICAgIHJldHVybiBpZDtcclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGNsb3NlQWxlcnQgPSAoaWQpID0+IHtcclxuICAgIHNldEFsZXJ0cygocHJldkFsZXJ0cykgPT4gXHJcbiAgICAgIHByZXZBbGVydHMubWFwKChhbGVydCkgPT4gXHJcbiAgICAgICAgYWxlcnQuaWQgPT09IGlkID8geyAuLi5hbGVydCwgaXNPcGVuOiBmYWxzZSB9IDogYWxlcnRcclxuICAgICAgKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgLy8gUmVtb3ZlIGFmdGVyIGFuaW1hdGlvblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNldEFsZXJ0cygocHJldkFsZXJ0cykgPT4gcHJldkFsZXJ0cy5maWx0ZXIoKGFsZXJ0KSA9PiBhbGVydC5pZCAhPT0gaWQpKTtcclxuICAgIH0sIDMwMCk7XHJcbiAgfTtcclxuICBcclxuICBjb25zdCBjbG9zZUFsbCA9ICgpID0+IHtcclxuICAgIHNldEFsZXJ0cygocHJldkFsZXJ0cykgPT4gXHJcbiAgICAgIHByZXZBbGVydHMubWFwKChhbGVydCkgPT4gKHsgLi4uYWxlcnQsIGlzT3BlbjogZmFsc2UgfSkpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBpZiAoZ2xvYmFsTG9hZGluZykge1xyXG4gICAgICBzZXRHbG9iYWxMb2FkaW5nKHsgLi4uZ2xvYmFsTG9hZGluZywgaXNPcGVuOiBmYWxzZSB9KTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgc2V0R2xvYmFsTG9hZGluZyhudWxsKTtcclxuICAgICAgfSwgMzAwKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNldEFsZXJ0cyhbXSk7XHJcbiAgICB9LCAzMDApO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8QWxlcnRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IHNob3dBbGVydCwgc2hvd0xvYWRpbmcsIGNsb3NlQWxlcnQsIGNsb3NlQWxsIH19PlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICAgIFxyXG4gICAgICB7LyogUmVuZGVyIGFsbCBhY3RpdmUgYWxlcnRzICovfVxyXG4gICAgICB7YWxlcnRzLm1hcCgoYWxlcnQpID0+IChcclxuICAgICAgICA8QWxlcnQga2V5PXthbGVydC5pZH0gey4uLmFsZXJ0fSAvPlxyXG4gICAgICApKX1cclxuICAgICAgXHJcbiAgICAgIHsvKiBSZW5kZXIgZ2xvYmFsIGxvYWRpbmcgd2l0aCB1bmlxdWUgcHJlZml4ICovfVxyXG4gICAgICB7Z2xvYmFsTG9hZGluZyAmJiA8QWxlcnQga2V5PXtgbG9hZGluZy0ke2dsb2JhbExvYWRpbmcuaWR9YH0gey4uLmdsb2JhbExvYWRpbmd9IC8+fVxyXG4gICAgPC9BbGVydENvbnRleHQuUHJvdmlkZXI+XHJcbiAgKTtcclxufTsiXSwibmFtZXMiOlsiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIkFsZXJ0Q29udGV4dCIsInVzZUFsZXJ0IiwiY29udGV4dCIsIkVycm9yIiwiYWxlcnRBUEkiLCJmaXJlIiwib3B0aW9ucyIsIndpbmRvdyIsIl9fYWxlcnRTZXJ2aWNlIiwic2hvd0FsZXJ0IiwiY29uc29sZSIsIndhcm4iLCJpY29uIiwidHlwZSIsImFsZXJ0IiwidGl0bGUiLCJ0ZXh0IiwiaXNDb25maXJtZWQiLCJyZXN1bHQiLCJjb25maXJtIiwic3VjY2VzcyIsImVycm9yIiwid2FybmluZyIsInNob3dDYW5jZWxCdXR0b24iLCJpbmZvIiwiY29uZmlybUJ1dHRvblRleHQiLCJjYW5jZWxCdXR0b25UZXh0Iiwic2hvd0xvYWRpbmciLCJsb2ciLCJjbG9zZSIsImNsb3NlQWxsIiwiU3dhbCIsIkFsZXJ0IiwiaWQiLCJpc09wZW4iLCJvbkNsb3NlIiwib25Db25maXJtIiwib25DYW5jZWwiLCJhbGxvd091dHNpZGVDbGljayIsInRpbWVyIiwiaHRtbCIsImN1c3RvbUNsYXNzIiwiaXNWaXNpYmxlIiwic2V0SXNWaXNpYmxlIiwidGltZUxlZnQiLCJzZXRUaW1lTGVmdCIsIk1hdGgiLCJmbG9vciIsImZpbmFsVHlwZSIsImhhbmRsZUtleURvd24iLCJlIiwia2V5IiwiaGFuZGxlQ2xvc2UiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInByZXYiLCJjbGVhckludGVydmFsIiwic2V0VGltZW91dCIsImhhbmRsZUJhY2tkcm9wQ2xpY2siLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiZGl2IiwiY2xhc3NOYW1lIiwib25DbGljayIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiYmFja2Ryb3BGaWx0ZXIiLCJjb250YWluZXIiLCJzdmciLCJmaWxsIiwic3Ryb2tlIiwidmlld0JveCIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsImQiLCJoMiIsInAiLCJodG1sQ29udGFpbmVyIiwiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiLCJfX2h0bWwiLCJidXR0b24iLCJjYW5jZWxCdXR0b24iLCJjb25maXJtQnV0dG9uIiwiQWxlcnRQcm92aWRlciIsImNoaWxkcmVuIiwiYWxlcnRzIiwic2V0QWxlcnRzIiwiZ2xvYmFsTG9hZGluZyIsInNldEdsb2JhbExvYWRpbmciLCJpZENvdW50ZXJSZWYiLCJnZW5lcmF0ZVVuaXF1ZUlkIiwiY3VycmVudCIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsIlByb21pc2UiLCJyZXNvbHZlIiwiY2xvc2VBbGVydCIsInByZXZBbGVydHMiLCJsb2FkaW5nQWxlcnQiLCJtYXAiLCJmaWx0ZXIiLCJQcm92aWRlciIsInZhbHVlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/utils/alertService.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./app/utils/clientLogging.js":
/*!************************************!*\
  !*** ./app/utils/clientLogging.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearLogs: () => (/* binding */ clearLogs),\n/* harmony export */   getLogs: () => (/* binding */ getLogs),\n/* harmony export */   logEvent: () => (/* binding */ logEvent)\n/* harmony export */ });\n// Local storage key for logs\nconst LOGS_STORAGE_KEY = 'app_logs';\nconst MAX_LOGS = 1000;\n// ส่ง log ไปยัง server\nconst sendLogToServer = async (log)=>{\n    try {\n        const response = await fetch('/api/logs', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(log)\n        });\n        if (!response.ok) {\n            throw new Error(\"Server responded with status \".concat(response.status));\n        }\n        return true;\n    } catch (error) {\n        console.warn('Failed to send log to server:', error);\n        return false;\n    }\n};\nconst logEvent = async function(name) {\n    let properties = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n    try {\n        const log = {\n            timestamp: new Date().toISOString(),\n            event: name,\n            properties\n        };\n        // Get existing logs\n        const existingLogs = JSON.parse(localStorage.getItem(LOGS_STORAGE_KEY) || '[]');\n        // Add new log\n        existingLogs.push(log);\n        // Keep only the latest MAX_LOGS entries\n        const trimmedLogs = existingLogs.slice(-MAX_LOGS);\n        // Save back to localStorage\n        localStorage.setItem(LOGS_STORAGE_KEY, JSON.stringify(trimmedLogs));\n        // Development logging\n        if (true) {\n            console.log(\"[Event: \".concat(name, \"]\"), properties);\n        }\n        // ส่ง log ไปยัง server (ไม่รอการตอบกลับ)\n        sendLogToServer(log).catch((error)=>{\n            console.warn('Error sending log to server:', error);\n        });\n        // If you have external logging service (optional)\n        if (false) {}\n    } catch (error) {\n        console.warn('Logging failed:', error);\n    }\n};\nconst getLogs = ()=>{\n    try {\n        return JSON.parse(localStorage.getItem(LOGS_STORAGE_KEY) || '[]');\n    } catch (error) {\n        console.warn('Failed to retrieve logs:', error);\n        return [];\n    }\n};\nconst clearLogs = ()=>{\n    try {\n        localStorage.setItem(LOGS_STORAGE_KEY, '[]');\n    } catch (error) {\n        console.warn('Failed to clear logs:', error);\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC91dGlscy9jbGllbnRMb2dnaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDZCQUE2QjtBQUM3QixNQUFNQSxtQkFBbUI7QUFDekIsTUFBTUMsV0FBVztBQUVqQix1QkFBdUI7QUFDdkIsTUFBTUMsa0JBQWtCLE9BQU9DO0lBQzdCLElBQUk7UUFDRixNQUFNQyxXQUFXLE1BQU1DLE1BQU0sYUFBYTtZQUN4Q0MsUUFBUTtZQUNSQyxTQUFTO2dCQUFFLGdCQUFnQjtZQUFtQjtZQUM5Q0MsTUFBTUMsS0FBS0MsU0FBUyxDQUFDUDtRQUN2QjtRQUVBLElBQUksQ0FBQ0MsU0FBU08sRUFBRSxFQUFFO1lBQ2hCLE1BQU0sSUFBSUMsTUFBTSxnQ0FBZ0QsT0FBaEJSLFNBQVNTLE1BQU07UUFDakU7UUFFQSxPQUFPO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFDLElBQUksQ0FBQyxpQ0FBaUNGO1FBQzlDLE9BQU87SUFDVDtBQUNGO0FBRU8sTUFBTUcsV0FBVyxlQUFPQztRQUFNQyw4RUFBYSxDQUFDO0lBQ2pELElBQUk7UUFDRixNQUFNaEIsTUFBTTtZQUNWaUIsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1lBQ2pDQyxPQUFPTDtZQUNQQztRQUNGO1FBRUEsb0JBQW9CO1FBQ3BCLE1BQU1LLGVBQWVmLEtBQUtnQixLQUFLLENBQUNDLGFBQWFDLE9BQU8sQ0FBQzNCLHFCQUFxQjtRQUUxRSxjQUFjO1FBQ2R3QixhQUFhSSxJQUFJLENBQUN6QjtRQUVsQix3Q0FBd0M7UUFDeEMsTUFBTTBCLGNBQWNMLGFBQWFNLEtBQUssQ0FBQyxDQUFDN0I7UUFFeEMsNEJBQTRCO1FBQzVCeUIsYUFBYUssT0FBTyxDQUFDL0Isa0JBQWtCUyxLQUFLQyxTQUFTLENBQUNtQjtRQUV0RCxzQkFBc0I7UUFDdEIsSUFBSUcsSUFBc0MsRUFBRTtZQUMxQ2pCLFFBQVFaLEdBQUcsQ0FBQyxXQUFnQixPQUFMZSxNQUFLLE1BQUlDO1FBQ2xDO1FBRUEseUNBQXlDO1FBQ3pDakIsZ0JBQWdCQyxLQUFLOEIsS0FBSyxDQUFDbkIsQ0FBQUE7WUFDekJDLFFBQVFDLElBQUksQ0FBQyxnQ0FBZ0NGO1FBQy9DO1FBRUEsa0RBQWtEO1FBQ2xELElBQUlrQixLQUFxRixFQUFFLEVBTTFGO0lBQ0gsRUFBRSxPQUFPbEIsT0FBTztRQUNkQyxRQUFRQyxJQUFJLENBQUMsbUJBQW1CRjtJQUNsQztBQUNGLEVBQUU7QUFFSyxNQUFNc0IsVUFBVTtJQUNyQixJQUFJO1FBQ0YsT0FBTzNCLEtBQUtnQixLQUFLLENBQUNDLGFBQWFDLE9BQU8sQ0FBQzNCLHFCQUFxQjtJQUM5RCxFQUFFLE9BQU9jLE9BQU87UUFDZEMsUUFBUUMsSUFBSSxDQUFDLDRCQUE0QkY7UUFDekMsT0FBTyxFQUFFO0lBQ1g7QUFDRixFQUFFO0FBRUssTUFBTXVCLFlBQVk7SUFDdkIsSUFBSTtRQUNGWCxhQUFhSyxPQUFPLENBQUMvQixrQkFBa0I7SUFDekMsRUFBRSxPQUFPYyxPQUFPO1FBQ2RDLFFBQVFDLElBQUksQ0FBQyx5QkFBeUJGO0lBQ3hDO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCX1NJUlxcT25lRHJpdmVcXOC5gOC4lOC4quC4geC5jOC4l+C5h+C4reC4m1xcQWN0aXZlIDE0LTMtMjAyNVxcU3VtbWFyeV9vZl9QZXJzb25uZWxfUmF0aW9cXGFwcFxcdXRpbHNcXGNsaWVudExvZ2dpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTG9jYWwgc3RvcmFnZSBrZXkgZm9yIGxvZ3NcbmNvbnN0IExPR1NfU1RPUkFHRV9LRVkgPSAnYXBwX2xvZ3MnO1xuY29uc3QgTUFYX0xPR1MgPSAxMDAwO1xuXG4vLyDguKrguYjguIcgbG9nIOC5hOC4m+C4ouC4seC4hyBzZXJ2ZXJcbmNvbnN0IHNlbmRMb2dUb1NlcnZlciA9IGFzeW5jIChsb2cpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2xvZ3MnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobG9nKSxcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNlbmQgbG9nIHRvIHNlcnZlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgbG9nRXZlbnQgPSBhc3luYyAobmFtZSwgcHJvcGVydGllcyA9IHt9KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbG9nID0ge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBldmVudDogbmFtZSxcbiAgICAgIHByb3BlcnRpZXMsXG4gICAgfTtcblxuICAgIC8vIEdldCBleGlzdGluZyBsb2dzXG4gICAgY29uc3QgZXhpc3RpbmdMb2dzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0dTX1NUT1JBR0VfS0VZKSB8fCAnW10nKTtcbiAgICBcbiAgICAvLyBBZGQgbmV3IGxvZ1xuICAgIGV4aXN0aW5nTG9ncy5wdXNoKGxvZyk7XG4gICAgXG4gICAgLy8gS2VlcCBvbmx5IHRoZSBsYXRlc3QgTUFYX0xPR1MgZW50cmllc1xuICAgIGNvbnN0IHRyaW1tZWRMb2dzID0gZXhpc3RpbmdMb2dzLnNsaWNlKC1NQVhfTE9HUyk7XG4gICAgXG4gICAgLy8gU2F2ZSBiYWNrIHRvIGxvY2FsU3RvcmFnZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPR1NfU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHRyaW1tZWRMb2dzKSk7XG5cbiAgICAvLyBEZXZlbG9wbWVudCBsb2dnaW5nXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW0V2ZW50OiAke25hbWV9XWAsIHByb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIC8vIOC4quC5iOC4hyBsb2cg4LmE4Lib4Lii4Lix4LiHIHNlcnZlciAo4LmE4Lih4LmI4Lij4Lit4LiB4Liy4Lij4LiV4Lit4Lia4LiB4Lil4Lix4LiaKVxuICAgIHNlbmRMb2dUb1NlcnZlcihsb2cpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3Igc2VuZGluZyBsb2cgdG8gc2VydmVyOicsIGVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIElmIHlvdSBoYXZlIGV4dGVybmFsIGxvZ2dpbmcgc2VydmljZSAob3B0aW9uYWwpXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRVhURVJOQUxfTE9HR0lOR19VUkwpIHtcbiAgICAgIGZldGNoKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0VYVEVSTkFMX0xPR0dJTkdfVVJMLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobG9nKVxuICAgICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybignTG9nZ2luZyBmYWlsZWQ6JywgZXJyb3IpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TG9ncyA9ICgpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0dTX1NUT1JBR0VfS0VZKSB8fCAnW10nKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byByZXRyaWV2ZSBsb2dzOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjbGVhckxvZ3MgPSAoKSA9PiB7XG4gIHRyeSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9HU19TVE9SQUdFX0tFWSwgJ1tdJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gY2xlYXIgbG9nczonLCBlcnJvcik7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsiTE9HU19TVE9SQUdFX0tFWSIsIk1BWF9MT0dTIiwic2VuZExvZ1RvU2VydmVyIiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwibG9nRXZlbnQiLCJuYW1lIiwicHJvcGVydGllcyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImV2ZW50IiwiZXhpc3RpbmdMb2dzIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicHVzaCIsInRyaW1tZWRMb2dzIiwic2xpY2UiLCJzZXRJdGVtIiwicHJvY2VzcyIsImNhdGNoIiwiZW52IiwiTkVYVF9QVUJMSUNfRVhURVJOQUxfTE9HR0lOR19VUkwiLCJnZXRMb2dzIiwiY2xlYXJMb2dzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/utils/clientLogging.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./app/utils/sessionRecording.js":
/*!***************************************!*\
  !*** ./app/utils/sessionRecording.js ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   identifyUser: () => (/* binding */ identifyUser),\n/* harmony export */   initSessionRecording: () => (/* binding */ initSessionRecording),\n/* harmony export */   logEvent: () => (/* binding */ logEvent)\n/* harmony export */ });\n/* harmony import */ var _clientLogging__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./clientLogging */ \"(app-pages-browser)/./app/utils/clientLogging.js\");\n\nconst logEvent = function(name) {\n    let properties = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n    (0,_clientLogging__WEBPACK_IMPORTED_MODULE_0__.logEvent)(name, properties);\n};\nconst initSessionRecording = ()=>{\n// No initialization needed\n};\nconst identifyUser = function(userId) {\n    let userInfo = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n    (0,_clientLogging__WEBPACK_IMPORTED_MODULE_0__.logEvent)('user_identified', {\n        userId,\n        ...userInfo\n    });\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC91dGlscy9zZXNzaW9uUmVjb3JkaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkQ7QUFFdEQsTUFBTUEsV0FBVyxTQUFDRTtRQUFNQyw4RUFBYSxDQUFDO0lBQzNDRix3REFBY0EsQ0FBQ0MsTUFBTUM7QUFDdkIsRUFBRTtBQUVLLE1BQU1DLHVCQUF1QjtBQUNsQywyQkFBMkI7QUFDN0IsRUFBRTtBQUVLLE1BQU1DLGVBQWUsU0FBQ0M7UUFBUUMsNEVBQVcsQ0FBQztJQUMvQ04sd0RBQWNBLENBQUMsbUJBQW1CO1FBQUVLO1FBQVEsR0FBR0MsUUFBUTtJQUFDO0FBQzFELEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQl9TSVJcXE9uZURyaXZlXFzguYDguJTguKrguIHguYzguJfguYfguK3guJtcXEFjdGl2ZSAxNC0zLTIwMjVcXFN1bW1hcnlfb2ZfUGVyc29ubmVsX1JhdGlvXFxhcHBcXHV0aWxzXFxzZXNzaW9uUmVjb3JkaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ0V2ZW50IGFzIGNsaWVudExvZ0V2ZW50IH0gZnJvbSAnLi9jbGllbnRMb2dnaW5nJztcclxuXHJcbmV4cG9ydCBjb25zdCBsb2dFdmVudCA9IChuYW1lLCBwcm9wZXJ0aWVzID0ge30pID0+IHtcclxuICBjbGllbnRMb2dFdmVudChuYW1lLCBwcm9wZXJ0aWVzKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0U2Vzc2lvblJlY29yZGluZyA9ICgpID0+IHtcclxuICAvLyBObyBpbml0aWFsaXphdGlvbiBuZWVkZWRcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpZGVudGlmeVVzZXIgPSAodXNlcklkLCB1c2VySW5mbyA9IHt9KSA9PiB7XHJcbiAgY2xpZW50TG9nRXZlbnQoJ3VzZXJfaWRlbnRpZmllZCcsIHsgdXNlcklkLCAuLi51c2VySW5mbyB9KTtcclxufTtcclxuIl0sIm5hbWVzIjpbImxvZ0V2ZW50IiwiY2xpZW50TG9nRXZlbnQiLCJuYW1lIiwicHJvcGVydGllcyIsImluaXRTZXNzaW9uUmVjb3JkaW5nIiwiaWRlbnRpZnlVc2VyIiwidXNlcklkIiwidXNlckluZm8iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/utils/sessionRecording.js\n"));

/***/ })

}]);