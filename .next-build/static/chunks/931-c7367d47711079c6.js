(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{907:(e,t,a)=>{"use strict";a.d(t,{Sw:()=>d,YU:()=>o});var r=a(5155),n=a(2115);let s=(0,n.createContext)(null),l={fire:async e=>window.__alertService?window.__alertService.showAlert(e):(console.warn("AlertProvider is not found. Using fallback alert."),"error"===e.icon||"error"===e.type)?(alert(e.title?"".concat(e.title,": ").concat(e.text||""):e.text),{isConfirmed:!0}):"warning"===e.icon||"warning"===e.type?{isConfirmed:confirm(e.title?"".concat(e.title,": ").concat(e.text||""):e.text)}:(alert(e.title?"".concat(e.title,": ").concat(e.text||""):e.text),{isConfirmed:!0}),success:async(e,t)=>l.fire({title:e,text:t,icon:"success"}),error:async(e,t)=>l.fire({title:e,text:t,icon:"error"}),warning:async function(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return l.fire({title:e,text:t,icon:"warning",showCancelButton:a})},info:async(e,t)=>l.fire({title:e,text:t,icon:"info"}),confirm:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ตกลง",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ยกเลิก";return l.fire({title:e,text:t,icon:"question",showCancelButton:!0,confirmButtonText:a,cancelButtonText:r})},showLoading:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"กำลังโหลด...";if(window.__alertService)return window.__alertService.showLoading(e);console.log("Loading:",e)},close:()=>{if(window.__alertService)return window.__alertService.closeAll();console.log("Closing alerts")}},o=l,i=e=>{let{id:t,isOpen:a,onClose:s,title:l,text:o,icon:i="info",type:d="info",confirmButtonText:c="ตกลง",cancelButtonText:u="ยกเลิก",onConfirm:m,onCancel:f,showCancelButton:x=!1,allowOutsideClick:h=!0,timer:p=0,html:b=null,customClass:g={}}=e,[v,w]=(0,n.useState)(a),[N,y]=(0,n.useState)(p>0?Math.floor(p/1e3):0),j=i||d;(0,n.useEffect)(()=>{if(!v)return;let e=e=>{"Escape"===e.key&&h&&C(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[v,h]),(0,n.useEffect)(()=>{if(!v||p<=0)return;let e=setInterval(()=>{y(t=>t<=1?(clearInterval(e),setTimeout(()=>C(!0),0),0):t-1)},1e3);return()=>clearInterval(e)},[v,p]);let C=e=>{w(!1),setTimeout(()=>{e?m&&m():f&&f(),s&&s(e)},300)};return a?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 transition-opacity duration-300 ".concat(v?"opacity-100":"opacity-0 pointer-events-none"," ").concat(h?"cursor-pointer":""),onClick:e=>{e.target===e.currentTarget&&h&&C(!1)},style:{backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(2px)"},children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full m-4 transform transition-all duration-300 ".concat(v?"scale-100 opacity-100":"scale-95 opacity-0"," cursor-default ").concat(g.container||""),children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"text-center",children:["success"===j&&(0,r.jsx)("div",{className:"mx-auto bg-green-100 p-3 rounded-full w-fit mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),"error"===j&&(0,r.jsx)("div",{className:"mx-auto bg-red-100 p-3 rounded-full w-fit mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),"info"===j&&(0,r.jsx)("div",{className:"mx-auto bg-blue-100 p-3 rounded-full w-fit mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"warning"===j&&(0,r.jsx)("div",{className:"mx-auto bg-yellow-100 p-3 rounded-full w-fit mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),"question"===j&&(0,r.jsx)("div",{className:"mx-auto bg-purple-100 p-3 rounded-full w-fit mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"loading"===j&&(0,r.jsx)("div",{className:"mx-auto p-3 w-fit mb-4",children:(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-t-[#0ab4ab] border-r-[#0ab4ab] border-b-gray-200 border-l-gray-200 rounded-full animate-spin"})}),l&&(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(g.title||""),children:l}),o&&(0,r.jsx)("p",{className:"text-gray-600 ".concat(g.text||""),children:o}),b&&(0,r.jsx)("div",{className:"mt-2 ".concat(g.htmlContainer||""),dangerouslySetInnerHTML:{__html:b}}),N>0&&(0,r.jsxs)("div",{className:"mt-3 text-sm text-gray-500",children:["ปิดอัตโนมัติใน ",N," วินาที"]})]}),"loading"!==j&&(0,r.jsxs)("div",{className:"flex justify-center gap-3 mt-6",children:[x&&(0,r.jsx)("button",{onClick:()=>C(!1),className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 ".concat(g.cancelButton||""),children:u}),(0,r.jsx)("button",{onClick:()=>C(!0),className:"px-5 py-2 bg-[#0ab4ab] text-white rounded-md hover:bg-[#099a92] ".concat(g.confirmButton||""),children:c})]})]})})}):null},d=e=>{let{children:t}=e,[a,l]=(0,n.useState)([]),[o,d]=(0,n.useState)(null),c=(0,n.useRef)(0),u=()=>(c.current+=1,"".concat(Date.now(),"-").concat(c.current,"-").concat(Math.random().toString(36).substr(2,5)));(0,n.useEffect)(()=>(window.__alertService={showAlert:m,showLoading:f,closeAll:h},()=>{delete window.__alertService}),[]);let m=e=>new Promise(t=>{let a=u(),r={id:a,isOpen:!0,...e,onClose:e=>{x(a),t({isConfirmed:e})}};l(e=>[...e,r])}),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"กำลังโหลด...";h();let t=u();return d({id:t,isOpen:!0,title:e,type:"loading",icon:"loading",allowOutsideClick:!1}),t},x=e=>{l(t=>t.map(t=>t.id===e?{...t,isOpen:!1}:t)),setTimeout(()=>{l(t=>t.filter(t=>t.id!==e))},300)},h=()=>{l(e=>e.map(e=>({...e,isOpen:!1}))),o&&(d({...o,isOpen:!1}),setTimeout(()=>{d(null)},300)),setTimeout(()=>{l([])},300)};return(0,r.jsxs)(s.Provider,{value:{showAlert:m,showLoading:f,closeAlert:x,closeAll:h},children:[t,a.map(e=>(0,r.jsx)(i,{...e},e.id)),o&&(0,r.jsx)(i,{...o},"loading-".concat(o.id))]})}},922:(e,t,a)=>{"use strict";a.d(t,{A:()=>N});var r=a(5155),n=a(2115),s=a(4197),l=a(5112);a(5279);var o=a(5653),i=a(907),d=a(9770),c=a(2808);let u=e=>{let{wardId:t,date:a,status:o="pending"}=e,[u,m]=(0,n.useState)(!1),{user:f}=(0,c.A)(),x=(null==f?void 0:f.role)==="supervisor"||(null==f?void 0:f.role)==="admin";if(!x&&"pending"===o)return(0,r.jsxs)("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-1 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"รออนุมัติ"]});let h=async()=>{try{m(!0);let e=await i.YU.fire({title:"ลงชื่อผู้อนุมัติ",html:'\n          <div class="text-left">\n            <p class="mb-2 font-medium">กรุณากรอกชื่อผู้อนุมัติ</p>\n            <div class="mb-3">\n              <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">ชื่อ</label>\n              <input type="text" id="firstName" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="ชื่อ" value="'.concat((null==f?void 0:f.firstName)||"",'">\n            </div>\n            <div>\n              <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">นามสกุล</label>\n              <input type="text" id="lastName" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="นามสกุล" value="').concat((null==f?void 0:f.lastName)||"",'">\n            </div>\n          </div>\n        '),icon:"info",showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",confirmButtonColor:"#0ab4ab",cancelButtonColor:"#d33",preConfirm:()=>{let e=document.getElementById("firstName").value,t=document.getElementById("lastName").value;return e.trim()?t.trim()?{firstName:e,lastName:t}:(i.YU.showValidationMessage("กรุณากรอกนามสกุล"),!1):(i.YU.showValidationMessage("กรุณากรอกชื่อ"),!1)}});if(!e.isConfirmed){m(!1);return}let{firstName:r,lastName:n}=e.value;if(!(await i.YU.fire({title:"อนุมัติข้อมูล Ward",html:'\n          <div class="text-left">\n            <p class="mb-2 font-medium">คุณต้องการอนุมัติข้อมูลของ '.concat(t,' ใช่หรือไม่?</p>\n            <p class="text-sm text-gray-600">วันที่: ').concat(a,'</p>\n            <p class="text-sm text-gray-600">ผู้อนุมัติ: ').concat(r," ").concat(n,"</p>\n          </div>\n        "),icon:"question",showCancelButton:!0,confirmButtonText:"อนุมัติ",cancelButtonText:"ยกเลิก",confirmButtonColor:"#0ab4ab",cancelButtonColor:"#d33"})).isConfirmed){m(!1);return}let o=(0,l.H9)(s.db,"wardDailyRecords","".concat(a,"_").concat(t));await (0,l.mZ)(o,{approvalStatus:"approved",approvedAt:new Date().toISOString(),approvedBy:{uid:(null==f?void 0:f.uid)||"",firstName:r,lastName:n,displayName:"".concat(r," ").concat(n),email:(null==f?void 0:f.email)||""}});try{let e=(0,l.H9)(s.db,"approvalQueue","".concat(a,"_").concat(t));await (0,l.kd)(e),console.log("Removed from approvalQueue:","".concat(a,"_").concat(t))}catch(e){console.error("Error removing from approvalQueue:",e)}(0,d.$s)("approval_success",{wardId:t,date:a,action:"Approve ข้อมูลสำเร็จ",approvedBy:"".concat(r," ").concat(n),approvedById:null==f?void 0:f.uid,timestamp:new Date().toISOString()}),await i.YU.fire({title:"อนุมัติสำเร็จ",text:"ข้อมูลของ ".concat(t," ได้รับการอนุมัติแล้ว"),icon:"success",confirmButtonColor:"#0ab4ab"}),window.location.reload()}catch(e){console.error("Error approving ward data:",e),await i.YU.fire({title:"เกิดข้อผิดพลาด",text:"ไม่สามารถอนุมัติข้อมูลได้ กรุณาลองอีกครั้ง",icon:"error",confirmButtonColor:"#0ab4ab"})}finally{m(!1)}},p=async()=>{try{m(!0);let e=await i.YU.fire({title:"ลงชื่อผู้ปฏิเสธ",html:'\n          <div class="text-left">\n            <p class="mb-2 font-medium">กรุณากรอกชื่อผู้ปฏิเสธ</p>\n            <div class="mb-3">\n              <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">ชื่อ</label>\n              <input type="text" id="firstName" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="ชื่อ" value="'.concat((null==f?void 0:f.firstName)||"",'">\n            </div>\n            <div class="mb-3">\n              <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">นามสกุล</label>\n              <input type="text" id="lastName" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="นามสกุล" value="').concat((null==f?void 0:f.lastName)||"",'">\n            </div>\n          </div>\n        '),icon:"info",showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",confirmButtonColor:"#0ab4ab",cancelButtonColor:"#d33",preConfirm:()=>{let e=document.getElementById("firstName").value,t=document.getElementById("lastName").value;return e.trim()?t.trim()?{firstName:e,lastName:t}:(i.YU.showValidationMessage("กรุณากรอกนามสกุล"),!1):(i.YU.showValidationMessage("กรุณากรอกชื่อ"),!1)}});if(!e.isConfirmed){m(!1);return}let{firstName:r,lastName:n}=e.value,o=await i.YU.fire({title:"ปฏิเสธข้อมูล Ward",html:'\n          <div class="text-left">\n            <p class="mb-2 font-medium">กรุณาระบุเหตุผลในการปฏิเสธ:</p>\n            <textarea id="rejection-reason" class="w-full px-3 py-2 border border-gray-300 rounded-md" rows="3"></textarea>\n            <p class="text-sm text-gray-600 mt-2">ผู้ปฏิเสธ: '.concat(r," ").concat(n,"</p>\n          </div>\n        "),icon:"warning",showCancelButton:!0,confirmButtonText:"ปฏิเสธ",cancelButtonText:"ยกเลิก",confirmButtonColor:"#d33",cancelButtonColor:"#0ab4ab",preConfirm:()=>{let e=document.getElementById("rejection-reason").value;return e.trim()||i.YU.showValidationMessage("กรุณาระบุเหตุผลในการปฏิเสธ"),e}});if(!o.isConfirmed){m(!1);return}let c=o.value,u=(0,l.H9)(s.db,"wardDailyRecords","".concat(a,"_").concat(t));await (0,l.mZ)(u,{approvalStatus:"rejected",rejectedAt:new Date().toISOString(),rejectionReason:c,rejectedBy:{uid:(null==f?void 0:f.uid)||"",firstName:r,lastName:n,displayName:"".concat(r," ").concat(n),email:(null==f?void 0:f.email)||""}});try{let e=(0,l.H9)(s.db,"approvalQueue","".concat(a,"_").concat(t));await (0,l.kd)(e),console.log("Removed from approvalQueue:","".concat(a,"_").concat(t))}catch(e){console.error("Error removing from approvalQueue:",e)}(0,d.$s)("rejection_success",{wardId:t,date:a,action:"ปฏิเสธข้อมูล",rejectedBy:"".concat(r," ").concat(n),rejectedById:null==f?void 0:f.uid,reason:c,timestamp:new Date().toISOString()}),await i.YU.fire({title:"ปฏิเสธข้อมูลสำเร็จ",text:"ข้อมูลของ ".concat(t," ถูกปฏิเสธแล้ว"),icon:"success",confirmButtonColor:"#0ab4ab"}),window.location.reload()}catch(e){console.error("Error rejecting ward data:",e),await i.YU.fire({title:"เกิดข้อผิดพลาด",text:"ไม่สามารถปฏิเสธข้อมูลได้ กรุณาลองอีกครั้ง",icon:"error",confirmButtonColor:"#0ab4ab"})}finally{m(!1)}};return"approved"===o?(0,r.jsxs)("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-1 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"อนุมัติแล้ว"]}):"rejected"===o?(0,r.jsxs)("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-1 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"ปฏิเสธแล้ว"]}):x&&"pending"===o?(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:h,disabled:u,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:u?"กำลังดำเนินการ...":"อนุมัติ"}),(0,r.jsx)("button",{onClick:p,disabled:u,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:u?"กำลังดำเนินการ...":"ปฏิเสธ"})]}):(0,r.jsxs)("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-1 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"รออนุมัติ"]})},m=e=>{var t,a;let{WARD_ORDER:n,formData:s,handleInputChange:l,displayValue:i,approvalStatuses:d={},selectedDate:c,readOnly:m=!1}=e,f=(e,t,a)=>{"function"==typeof l&&l(e,t,a.replace(/[^0-9]/g,""))},x=(e,t)=>s&&s[e]?s[e][t]:"",h=Array.isArray(n)?n:[];return(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("div",{className:"inline-flex gap-1 min-w-max p-1",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-700 font-THSarabun",children:"Wards"})}),h.map(e=>(0,r.jsx)("div",{className:"h-8 flex items-center",children:(0,r.jsx)("span",{className:"text-xs font-semibold text-[#0ab4ab] font-THSarabun whitespace-nowrap",children:o.XU[e]||e})},e)),(0,r.jsx)("div",{className:"h-8 flex items-center",children:(0,r.jsx)("span",{className:"text-xs font-semibold text-purple-600 font-THSarabun",children:"Total"})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-700 font-THSarabun",children:"Patient Census"})}),h.map(e=>(0,r.jsx)("div",{className:"bg-gradient-to-r from-[#0ab4ab]/20 to-[#0ab4ab]/10 rounded-md p-1 text-[#0ab4ab] shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i(x(e,"numberOfPatients")),className:"w-16 text-center text-sm font-bold bg-gray-100 border-b border-[#0ab4ab] focus:outline-none text-[#0ab4ab] placeholder-[#0ab4ab]/50 font-THSarabun cursor-not-allowed",placeholder:"0",readOnly:!0,disabled:!0})})},e)),(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-400 to-purple-500 rounded-md p-1 text-white shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i((null==s?void 0:null===(t=s.totals)||void 0===t?void 0:t.numberOfPatients)||"0"),readOnly:!0,className:"w-16 text-center text-sm font-bold bg-transparent border-b border-white focus:outline-none text-white font-THSarabun",placeholder:"0"})})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-700 font-THSarabun",children:"Overall Data"})}),h.map(e=>(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-400/20 to-blue-500/10 rounded-md p-1 text-blue-600 shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i(x(e,"overallData")),className:"w-16 text-center text-sm font-bold bg-gray-100 border-b border-blue-500 focus:outline-none text-blue-600 placeholder-blue-300 font-THSarabun cursor-not-allowed",placeholder:"0",readOnly:!0,disabled:!0})})},e)),(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-400 to-purple-500 rounded-md p-1 text-white shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i((null==s?void 0:null===(a=s.totals)||void 0===a?void 0:a.overallData)||"0"),readOnly:!0,className:"w-16 text-center text-sm font-bold bg-transparent border-b border-white focus:outline-none text-white font-THSarabun",placeholder:"0"})})})]}),Object.entries({"Nurse Manager":"nurseManager",RN:"RN",PN:"PN",WC:"WC",NA:"nurseAid"}).map(e=>{var t;let[a,n]=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-700 font-THSarabun",children:a})}),h.map(e=>(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-400/20 to-green-500/10 rounded-md p-1 text-green-600 shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i(x(e,n)),onChange:t=>f(n,e,t.target.value),className:"w-16 text-center text-sm font-bold ".concat(m?"bg-gray-100 cursor-not-allowed":"bg-white"," border-b border-green-500 focus:outline-none focus:border-green-500 text-black placeholder-green-300 font-THSarabun"),placeholder:"0",min:"0",readOnly:m,disabled:m})})},e)),(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-400 to-purple-500 rounded-md p-1 text-white shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i((null==s?void 0:null===(t=s.totals)||void 0===t?void 0:t[n])||"0"),readOnly:!0,className:"w-16 text-center text-sm font-bold bg-transparent border-b border-white focus:outline-none text-white font-THSarabun",placeholder:"0"})})})]},n)}),Object.entries({"New Admit":"newAdmit","Transfer In":"transferIn","Refer In":"referIn","Transfer Out":"transferOut","Refer Out":"referOut",Discharge:"discharge",Dead:"dead"}).map(e=>{var t;let[a,n]=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-700 font-THSarabun",children:a})}),h.map(e=>(0,r.jsx)("div",{className:"bg-gradient-to-r from-yellow-400/20 to-yellow-500/10 rounded-md p-1 text-yellow-600 shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i(x(e,n)),onChange:t=>f(n,e,t.target.value),className:"w-16 text-center text-sm font-bold ".concat(m?"bg-gray-100 cursor-not-allowed":"bg-white"," border-b border-yellow-500 focus:outline-none focus:border-yellow-500 text-black placeholder-yellow-300 font-THSarabun"),placeholder:"0",min:"0",readOnly:m,disabled:m})})},e)),(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-400 to-purple-500 rounded-md p-1 text-white shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i((null==s?void 0:null===(t=s.totals)||void 0===t?void 0:t[n])||"0"),readOnly:!0,className:"w-16 text-center text-sm font-bold bg-transparent border-b border-white focus:outline-none text-white font-THSarabun",placeholder:"0"})})})]},n)}),Object.entries({Available:"availableBeds",Unavailable:"unavailable","Planned Discharge":"plannedDischarge"}).map(e=>{var t;let[a,n]=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-700 font-THSarabun",children:a})}),h.map(e=>(0,r.jsx)("div",{className:"bg-gradient-to-r from-pink-400/20 to-pink-500/10 rounded-md p-1 text-pink-600 shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i(x(e,n)),onChange:t=>f(n,e,t.target.value),className:"w-16 text-center text-sm font-bold ".concat(m?"bg-gray-100 cursor-not-allowed":"bg-white"," border-b border-pink-500 focus:outline-none focus:border-pink-500 text-black placeholder-pink-300 font-THSarabun"),placeholder:"0",min:"0",readOnly:m,disabled:m})})},e)),(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-400 to-purple-500 rounded-md p-1 text-white shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:i((null==s?void 0:null===(t=s.totals)||void 0===t?void 0:t[n])||"0"),readOnly:!0,className:"w-16 text-center text-sm font-bold bg-transparent border-b border-white focus:outline-none text-white font-THSarabun",placeholder:"0"})})})]},n)}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-700 font-THSarabun",children:"Comment"})}),h.map(e=>{var t;return(0,r.jsx)("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 rounded-md p-1 shadow h-8",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("input",{type:"text",value:(null==s?void 0:null===(t=s[e])||void 0===t?void 0:t.comment)||"",onChange:t=>f("comment",e,t.target.value),className:"w-24 text-center text-xs ".concat(m?"bg-gray-100 cursor-not-allowed":"bg-white"," border-b border-gray-400 focus:outline-none focus:border-gray-600 text-black placeholder-gray-300 font-THSarabun"),placeholder:"Add comment...",readOnly:m,disabled:m})})},e)}),(0,r.jsx)("div",{className:"h-8"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("div",{className:"h-12 flex items-center justify-center",children:(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-700 font-THSarabun",children:"Approval Status"})}),h.map(e=>(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded-md p-1 shadow h-8",children:(0,r.jsx)("div",{className:"text-center flex justify-center items-center",children:d[e]?(0,r.jsx)(u,{wardId:e,date:c,status:d[e]}):(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"No data"})})},e)),(0,r.jsx)("div",{className:"h-8"})]})]})})},f=e=>{let{label:t,oldValue:a,newValue:n}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 py-1",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:t}),(0,r.jsx)("div",{className:"text-sm text-purple-600",children:a||"-"}),(0,r.jsx)("div",{className:"text-sm text-pink-600",children:n||"-"})]})},x=e=>{let{showDataComparison:t,existingData:a,formData:n,summaryData:s,setShowDataComparison:l,saveData:o,WARD_ORDER:i}=e;return t&&a?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Data Comparison"}),(0,r.jsx)("div",{className:"space-y-4",children:i.map(e=>{var t,s,l,o;return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-medium text-lg mb-2",children:e}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-2",children:[(0,r.jsx)("div",{className:"font-medium",children:"Field"}),(0,r.jsx)("div",{className:"font-medium",children:"Current"}),(0,r.jsx)("div",{className:"font-medium",children:"New"})]}),(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsx)(f,{label:"Patient Census",oldValue:null==a?void 0:null===(s=a.wards)||void 0===s?void 0:null===(t=s[e])||void 0===t?void 0:t.numberOfPatients,newValue:null==n?void 0:null===(o=n.wards)||void 0===o?void 0:null===(l=o[e])||void 0===l?void 0:l.numberOfPatients})})]},e)})}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,r.jsx)("button",{onClick:()=>l(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,r.jsx)("button",{onClick:o,className:"px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600",children:"Save Changes"})]})]})}):null};var h=a(4279),p=a(3979);let b=e=>{let{summaryData:t,setSummaryData:a}=e;return(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:(0,r.jsx)("div",{className:"grid grid-cols-1 gap-8",children:(0,r.jsxs)("div",{className:"bg-green-50/80 rounded-xl p-5 shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4 bg-white/50 py-2 px-4 rounded-lg text-center shadow-sm",children:"Supervisor Signature"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-green-700",children:"First Name"}),(0,r.jsx)("input",{type:"text",value:t.supervisorFirstName,onChange:e=>a(t=>({...t,supervisorFirstName:e.target.value})),className:"w-full text-black px-3 py-2 border border-green-200 rounded-lg focus:ring-2 focus:ring-green-300 focus:border-green-300 bg-white/70",placeholder:"ชื่อ"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-green-700",children:"Last Name"}),(0,r.jsx)("input",{type:"text",value:t.supervisorLastName,onChange:e=>a(t=>({...t,supervisorLastName:e.target.value})),className:"w-full text-black px-3 py-2 border border-green-200 rounded-lg focus:ring-2 focus:ring-green-300 focus:border-green-300 bg-white/70",placeholder:"นามสกุล"})]})]})]})})})},g=e=>{let{summaryData:t,setSummaryData:a}=e;return(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-center mb-6 text-indigo-800 bg-white/50 py-2 rounded-lg shadow-sm",children:"ข้อมูลสรุป 24 ชั่วโมง"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-pink-50 rounded-xl p-4 shadow-sm transition-all hover:shadow-md",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-pink-700 mb-2",children:"OPD 24hr"}),(0,r.jsx)("input",{type:"number",value:t.opdTotal24hr,onChange:e=>a(t=>({...t,opdTotal24hr:e.target.value})),className:"w-full text-black px-3 py-2 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-300 focus:border-pink-300 bg-white/70",placeholder:"0"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 shadow-sm transition-all hover:shadow-md",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Old Patient"}),(0,r.jsx)("input",{type:"number",value:t.existingPatients,onChange:e=>a(t=>({...t,existingPatients:e.target.value})),className:"w-full text-black px-3 py-2 border border-purple-200 rounded-lg focus:ring-2 focus:ring-purple-300 focus:border-purple-300 bg-white/70",placeholder:"0"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 shadow-sm transition-all hover:shadow-md",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"New Patient"}),(0,r.jsx)("input",{type:"number",value:t.newPatients,onChange:e=>a(t=>({...t,newPatients:e.target.value})),className:"w-full text-black px-3 py-2 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-300 focus:border-blue-300 bg-white/70",placeholder:"0"})]}),(0,r.jsxs)("div",{className:"bg-teal-50 rounded-xl p-4 shadow-sm transition-all hover:shadow-md",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-teal-700 mb-2",children:"Admit 24hr"}),(0,r.jsx)("input",{type:"number",value:t.admissions24hr,onChange:e=>a(t=>({...t,admissions24hr:e.target.value})),className:"w-full text-black px-3 py-2 border border-teal-200 rounded-lg focus:ring-2 focus:ring-teal-300 focus:border-teal-300 bg-white/70",placeholder:"0"})]})]})]})};var v=a(4822),w=a(5695);let N=e=>{var t,a,d;let{isApprovalMode:u=!1}=e,f=(0,w.useRouter)(),{user:N}=(0,c.A)(),[y,j]=(0,n.useState)(0),[C,D]=(0,n.useState)(!0),[B,S]=(0,n.useState)(!1),[k,O]=(0,n.useState)(!1),[I,M]=(0,n.useState)(new Date),[T,P]=(0,n.useState)([]),[L,W]=(0,n.useState)(""),[R,E]=(0,n.useState)(!1),[U,_]=(0,n.useState)({opdTotal24hr:"",existingPatients:"",newPatients:"",admissions24hr:"",supervisorFirstName:"",supervisorLastName:""}),[A,Y]=(0,n.useState)({date:"",shift:"",wards:{Ward6:{...o.N6},Ward7:{...o.N6},Ward8:{...o.N6},Ward9:{...o.N6},WardGI:{...o.N6},Ward10B:{...o.N6},Ward11:{...o.N6},Ward12:{...o.N6},ICU:{...o.N6},CCU:{...o.N6},LR:{...o.N6},NSY:{...o.N6}},totals:{...o.N6}}),[H,G]=(0,n.useState)(!1),[z,F]=(0,n.useState)(null),[V,J]=(0,n.useState)({initialLoading:!0,savingData:!1,checkingDuplicates:!1,fetchingDates:!1}),[X,q]=(0,n.useState)(""),[Q,K]=(0,n.useState)(!1),[$,Z]=(0,n.useState)(!1),[ee,et]=(0,n.useState)({});(0,n.useEffect)(()=>{let e=()=>window.innerWidth<768,t=()=>{Z(e())};return Z(e()),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),(0,n.useEffect)(()=>{setTimeout(()=>{D(!1)},1e3)},[]);let ea=async e=>{try{if(!e)return;let t=(0,h.Ol)(new Date(e)),a=(0,l.rJ)(s.db,"wardDailyRecords"),r={};for(let e of o.UX){let n=(0,l.P)(a,(0,l._M)("date","==",t),(0,l._M)("wardId","==",e)),s=await (0,l.GG)(n);if(s.empty)r[e]=null;else{let t=s.docs[0].data();r[e]=t.approvalStatus||"pending"}}et(r),console.log("Fetched approval statuses:",r)}catch(e){console.error("Error fetching approval statuses:",e)}};(0,n.useEffect)(()=>{console.log("ShiftForm running in ".concat(u?"approval":"normal"," mode")),u&&E(!0);{let e=new Date;M(e);let t=e.toISOString().split("T")[0],a=(0,p.Se)();Y(e=>({...e,date:t,shift:a})),W((0,h.mI)(e)),eo(t),ei(t),ey(),ea(t)}},[u]);let[er,en]=(0,n.useState)(!1),[es,el]=(0,n.useState)(!1),eo=async e=>{try{let t=(0,l.rJ)(s.db,"staffRecords"),a=(0,l.P)(t,(0,l._M)("date","==",e),(0,l._M)("shift","==","07:00-19:00")),r=!(await (0,l.GG)(a)).empty;return en(r),r}catch(e){return console.error("Error checking morning shift data:",e),en(!1),!1}},ei=async e=>{try{let t=(0,l.rJ)(s.db,"staffRecords"),a=new Date(e);a.setDate(a.getDate()-1);let r=a.toISOString().split("T")[0],n=(0,l.P)(t,(0,l._M)("date","==",r),(0,l._M)("shift","==","19:00-07:00")),o=!(await (0,l.GG)(n)).empty;return el(o),o}catch(e){return console.error("Error checking previous night shift data:",e),el(!1),!1}},ed=async e=>{try{let t=(0,l.rJ)(s.db,"staffRecords"),a=(0,l.P)(t,(0,l._M)("date","==",e)),r=await (0,l.GG)(a),n=new Set(r.docs.map(e=>e.data().shift));return{hasMorningShift:n.has("07:00-19:00"),hasNightShift:n.has("19:00-07:00")}}catch(e){return console.error("Error checking date shifts:",e),{hasMorningShift:!1,hasNightShift:!1}}},ec=(0,n.useMemo)(()=>Object.values(A.wards).reduce((e,t)=>({numberOfPatients:e.numberOfPatients+(Number(t.numberOfPatients)||0),nurseManager:e.nurseManager+(Number(t.nurseManager)||0),RN:e.RN+(Number(t.RN)||0),PN:e.PN+(Number(t.PN)||0),WC:e.WC+(Number(t.WC)||0),newAdmit:e.newAdmit+(Number(t.newAdmit)||0),transferIn:e.transferIn+(Number(t.transferIn)||0),referIn:e.referIn+(Number(t.referIn)||0),transferOut:e.transferOut+(Number(t.transferOut)||0),referOut:e.referOut+(Number(t.referOut)||0),discharge:e.discharge+(Number(t.discharge)||0),dead:e.dead+(Number(t.dead)||0),overallData:e.overallData+(Number(t.overallData)||0),availableBeds:e.availableBeds+(Number(t.availableBeds)||0),unavailable:e.unavailable+(Number(t.unavailable)||0),plannedDischarge:e.plannedDischarge+(Number(t.plannedDischarge)||0)}),{numberOfPatients:0,nurseManager:0,RN:0,PN:0,WC:0,newAdmit:0,transferIn:0,referIn:0,transferOut:0,referOut:0,discharge:0,dead:0,overallData:0,availableBeds:0,unavailable:0,plannedDischarge:0}),[A.wards]);(0,n.useEffect)(()=>{Y(e=>({...e,totals:ec}))},[ec]);let eu=(0,n.useCallback)(()=>{var e,t;if(!N||(null===(e=N.role)||void 0===e?void 0:e.toLowerCase())==="admin"||(null===(t=N.role)||void 0===t?void 0:t.toLowerCase())==="approver")return o.UX;let a=N.department;return a&&o.UX.includes(a)?[a]:o.UX},[N]),em=(0,n.useMemo)(()=>eu(),[eu]),ef=(0,n.useCallback)((e,t,a)=>{var r;if((null==N?void 0:null===(r=N.role)||void 0===r?void 0:r.toLowerCase())==="user"||R){console.log("View only mode: Changes are disabled");return}if(!t||!e){console.error("Missing ward or field type in handleInputChange");return}Y(r=>{let n={...r};if(n.wards[t]||(n.wards[t]={}),n.wards[t][e]=a,["newAdmit","transferIn","referIn","transferOut","referOut","discharge","dead"].includes(e)){let e=n.wards[t],a=Number(e.newAdmit||0),r=Number(e.transferIn||0),s=Number(e.referIn||0),l=Number(e.transferOut||0),o=Number(e.referOut||0),i=a+r+s-l-o-Number(e.discharge||0)-Number(e.dead||0);n.wards[t].numberOfPatients=String(i>=0?i:0),n.wards[t].overallData=String(i>=0?i:0)}return n})},[N,R,Y]),ex=async e=>{var t;if(e.preventDefault(),R){i.YU.fire({title:"โหมดดูข้อมูลเท่านั้น",text:"ข้อมูลอยู่ในโหมดดูอย่างเดียว ไม่สามารถบันทึกได้",icon:"info",confirmButtonColor:"#0ab4ab"});return}if((null==N?void 0:null===(t=N.role)||void 0===t?void 0:t.toLowerCase())==="user"){i.YU.fire({title:"โหมดดูข้อมูลเท่านั้น",text:"คุณไม่มีสิทธิ์บันทึกข้อมูล กรุณาติดต่อผู้ดูแลระบบ",icon:"info",confirmButtonColor:"#0ab4ab"});return}};(0,n.useCallback)(()=>{let e=new Date,t=new Date(I);return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},[I]);let eh=()=>{if(!A.date)return!1;let e=new Date(A.date),t=new Date;return t.setDate(t.getDate()+1),e.setHours(0,0,0,0),t.setHours(0,0,0,0),e>t};(0,n.useCallback)(()=>Object.values(A.wards).some(e=>Object.entries(e).some(e=>{let[t,a]=e;return"comment"!==t&&""!==a&&"0"!==a})),[A.wards]);let ep=(0,n.useCallback)(()=>{let e={staff:!1,movement:!1,additional:!1};return Object.values(A.wards).forEach(t=>{("0"!==t.nurseManager||"0"!==t.RN||"0"!==t.PN||"0"!==t.WC)&&(e.staff=!0),("0"!==t.newAdmit||"0"!==t.transferIn||"0"!==t.referIn||"0"!==t.transferOut||"0"!==t.referOut||"0"!==t.discharge||"0"!==t.dead)&&(e.movement=!0),("0"!==t.availableBeds||"0"!==t.unavailable||"0"!==t.plannedDischarge||""!==t.comment.trim())&&(e.additional=!0)}),e},[A.wards]),eb=(0,n.useCallback)(()=>{let e=ep(A);return e.staff||e.movement||e.additional},[A,ep]);(0,n.useEffect)(()=>{K(eb())},[A,U,eb]),(0,n.useEffect)(()=>{let e=e=>{Q&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[Q]),(0,n.useEffect)(()=>{var e;let t=async()=>{if(eb()&&!(await i.YU.fire({title:"แจ้งเตือนการออกจากหน้าบันทึกข้อมูล",html:'\n                        <div class="text-left">\n                            <p class="font-semibold">ท่านกำลังดำเนินการบันทึกข้อมูลอยู่</p>\n                            <div class="mt-4 space-y-2">\n                                <p class="text-gray-600">การออกจากหน้านี้จะส่งผลให้:</p>\n                                <ul class="list-disc pl-5 text-sm text-gray-600">\n                                    <li>ข้อมูลที่กำลังบันทึกจะถูกรีเซ็ตทั้งหมด</li>\n                                    <li>ท่านจะต้องเริ่มกรอกข้อมูลใหม่เมื่อกลับมาที่หน้านี้</li>\n                                </ul>\n                            </div>\n                            <p class="mt-4 text-sm font-medium text-gray-700">โปรดยืนยันการดำเนินการ</p>\n                        </div>\n                    ',icon:"warning",showCancelButton:!0,confirmButtonText:"ยืนยันการออกจากหน้านี้",cancelButtonText:"ยกเลิกและกลับไปบันทึกข้อมูล",confirmButtonColor:"#d33",cancelButtonColor:"#0ab4ab",reverseButtons:!0})).isConfirmed)throw"Route Cancelled"};return null===(e=f.events)||void 0===e||e.on("routeChangeStart",t),()=>{var e;null===(e=f.events)||void 0===e||e.off("routeChangeStart",t)}},[f,eb]),(0,n.useCallback)(async()=>{var e,t,a;console.log("Validating form data...",A);let r=new Date(new Date(A.date));r.setDate(r.getDate()-1);let n=r.toISOString().split("T")[0],s=await ed(n);if(!s.hasNightShift&&s.hasMorningShift)return await i.YU.fire({title:"ไม่สามารถบันทึกข้อมูลได้",html:"วันที่ ".concat((0,h.mI)(r)," ยังไม่ได้บันทึกข้อมูลกะดึก<br>กรุณาบันทึกข้อมูลกะดึกของวันที่ ").concat((0,h.mI)(r)," ก่อน"),icon:"error",confirmButtonColor:"#0ab4ab"}),!1;for(let r of[{condition:!A.date||""===A.date.trim(),message:"กรุณาเลือกวันที่ก่อนดำเนินการต่อ"},{condition:!A.shift||""===A.shift.trim(),message:"กรุณาเลือกกะการทำงาน"},{condition:eh(),message:"ไม่สามารถบันทึกข้อมูลล่วงหน้าเกิน 1 วันได้"},{condition:"19:00-07:00"===A.shift&&!er,message:"ไม่สามารถบันทึกข้อมูลกะดึกได้ เนื่องจากยังไม่มีการบันทึกข้อมูลกะเช้าก่อน"},{condition:(null==N?void 0:null===(e=N.role)||void 0===e?void 0:e.toLowerCase())==="admin"&&(!(null===(t=U.supervisorFirstName)||void 0===t?void 0:t.trim())||!(null===(a=U.supervisorLastName)||void 0===a?void 0:a.trim())),message:"กรุณากรอกชื่อและนามสกุลผู้ตรวจการ"}])if(r.condition)return console.log("Validation failed:",r.message),r.message&&alert(r.message),!1;return!0},[A,U,eh,er]);let eg=()=>{i.YU.fire({title:"ล้างข้อมูล?",text:"คุณต้องการล้างข้อมูลทั้งหมดใช่หรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0ab4ab",cancelButtonColor:"#d33",confirmButtonText:"ใช่, ล้างข้อมูล",cancelButtonText:"ยกเลิก"}).then(e=>{e.isConfirmed&&(Y(e=>{let t={};return Object.entries(e.wards).forEach(e=>{let[a,r]=e;t[a]={...r,nurseManager:"0",RN:"0",PN:"0",WC:"0",newAdmit:"0",transferIn:"0",referIn:"0",transferOut:"0",referOut:"0",discharge:"0",dead:"0",availableBeds:"0",unavailable:"0",plannedDischarge:"0",comment:""}}),{...e,wards:t}}),_({opdTotal24hr:"",existingPatients:"",newPatients:"",admissions24hr:"",supervisorFirstName:"",supervisorLastName:""}),K(!1),i.YU.fire({title:"ล้างข้อมูลสำเร็จ",text:"กรุณาเลือกวันที่อีกครั้ง หรือตรวจสอบข้อมูลโดยรวมในหน้า Dashboard",icon:"success",confirmButtonColor:"#0ab4ab"}))})},ev=async(e,t)=>{try{let a=(0,l.rJ)(s.db,"staffRecords"),r=(0,l.P)(a,(0,l._M)("date","==",e),(0,l._M)("shift","==",t));if(!(await (0,l.GG)(r)).empty)return await i.YU.fire({title:"แจ้งเตือน",html:"มีข้อมูลของวันที่ ".concat((0,h.mI)(e)," กะ ").concat(t," ในระบบแล้ว<br><br>หากต้องการแก้ไขข้อมูล กรุณาดำเนินการบันทึกข้อมูลใหม่"),icon:"info",confirmButtonColor:"#0ab4ab"}),!0;return!1}catch(e){return console.error("Error checking existing data:",e),!1}},ew=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];J(e=>({...e,savingData:!0})),q("กำลังบันทึกข้อมูล...");try{if(await eN(A.date))return i.YU.fire({title:"ไม่สามารถบันทึกข้อมูลได้",html:"พบข้อมูลของวันที่นี้ที่ยังรออนุมัติจาก Supervisor<br>กรุณารอการอนุมัติก่อนบันทึกข้อมูลใหม่",icon:"error",confirmButtonColor:"#0ab4ab"}),J(e=>({...e,savingData:!1})),!1;if("19:00-07:00"===A.shift&&!await eo(A.date))return i.YU.fire({title:"ไม่สามารถบันทึกข้อมูลได้",html:"ไม่พบข้อมูลกะเช้าของวันที่นี้<br>กรุณาบันทึกข้อมูลกะเช้าก่อน",icon:"error",confirmButtonColor:"#0ab4ab"}),J(e=>({...e,savingData:!1})),!1;let t=[];if(Object.entries(A.wards).forEach(e=>{let[a,r]=e;r.nurseManager&&"0"!==r.nurseManager||t.push("".concat(a,": Nurse Manager")),r.RN&&"0"!==r.RN||t.push("".concat(a,": RN")),r.PN&&"0"!==r.PN||t.push("".concat(a,": PN")),r.WC&&"0"!==r.WC||t.push("".concat(a,": WC")),r.newAdmit&&"0"!==r.newAdmit||t.push("".concat(a,": New Admit")),r.transferIn&&"0"!==r.transferIn||t.push("".concat(a,": Transfer In")),r.referIn&&"0"!==r.referIn||t.push("".concat(a,": Refer In")),r.transferOut&&"0"!==r.transferOut||t.push("".concat(a,": Transfer Out")),r.referOut&&"0"!==r.referOut||t.push("".concat(a,": Refer Out")),r.discharge&&"0"!==r.discharge||t.push("".concat(a,": Discharge")),r.dead&&"0"!==r.dead||t.push("".concat(a,": Dead")),r.plannedDischarge&&"0"!==r.plannedDischarge||t.push("".concat(a,": Planned Discharge")),r.availableBeds&&"0"!==r.availableBeds||t.push("".concat(a,": Available Beds")),r.unavailable&&"0"!==r.unavailable||t.push("".concat(a,": Unavailable"))}),t.length>0)return i.YU.fire({title:"กรุณากรอกข้อมูลให้ครบถ้วน",html:'พบข้อมูลที่ยังไม่ได้กรอก:<br><ul class="text-left mt-2">'.concat(t.map(e=>"<li>- ".concat(e,"</li>")).join(""),"</ul>"),icon:"warning",confirmButtonColor:"#0ab4ab"}),J(e=>({...e,savingData:!1})),!1;if(!(await i.YU.fire({title:"ยืนยันการบันทึกข้อมูล",text:"เมื่อบันทึกแล้ว ข้อมูลจะถูกส่งเพื่อรออนุมัติจาก Supervisor และไม่สามารถแก้ไขได้อีก ต้องการดำเนินการต่อหรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonText:"ใช่, บันทึกข้อมูล",cancelButtonText:"ยกเลิก",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})).isConfirmed)return J(e=>({...e,savingData:!1})),!1;let a=new Date().toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(":",""),r=A.date.replace(/-/g,""),n=e&&z?z.id:"data_".concat(a,"_").concat(r);console.log("Saving data with ID:",n);let o={date:A.date,shift:A.shift,wards:Object.fromEntries(Object.entries(A.wards).map(e=>{let[t,a]=e;return[t,{numberOfPatients:a.numberOfPatients||"0",nurseManager:a.nurseManager||"0",RN:a.RN||"0",PN:a.PN||"0",WC:a.WC||"0",newAdmit:a.newAdmit||"0",transferIn:a.transferIn||"0",referIn:a.referIn||"0",transferOut:a.transferOut||"0",referOut:a.referOut||"0",discharge:a.discharge||"0",dead:a.dead||"0",overallData:a.overallData||"0",availableBeds:a.availableBeds||"0",plannedDischarge:a.plannedDischarge||"0",unavailable:a.unavailable||"0",comment:a.comment||""}]})),summaryData:{opdTotal24hr:U.opdTotal24hr||"",existingPatients:U.existingPatients||"",newPatients:U.newPatients||"",admissions24hr:U.admissions24hr||"",supervisorFirstName:U.supervisorFirstName||"",supervisorLastName:U.supervisorLastName||""},timestamp:(0,l.O5)(),lastModified:(0,l.O5)(),approvalStatus:"pending",submittedBy:N?{uid:N.uid,displayName:N.displayName||"",email:N.email||""}:null};console.log("Saving sanitized data:",o),await (0,l.BN)((0,l.H9)(s.db,"staffRecords",n),o);let d=Object.entries(A.wards).map(async e=>{let[t,a]=e;if(Object.values(a).some(e=>"0"!==e&&""!==e)){let e=(0,l.H9)(s.db,"wardDailyRecords","".concat(A.date,"_").concat(t));try{await (0,l.BN)(e,{wardId:t,date:A.date,patientCensus:a.numberOfPatients||"0",overallData:a.overallData||"0",approvalStatus:"pending",lastUpdated:(0,l.O5)(),submittedBy:N?{uid:N.uid,displayName:N.displayName||"",email:N.email||""}:null,dateSubmitted:(0,l.O5)(),shifts:{[A.shift]:{nurseManager:a.nurseManager||"0",RN:a.RN||"0",PN:a.PN||"0",WC:a.WC||"0",newAdmit:a.newAdmit||"0",transferIn:a.transferIn||"0",referIn:a.referIn||"0",transferOut:a.transferOut||"0",referOut:a.referOut||"0",discharge:a.discharge||"0",dead:a.dead||"0",availableBeds:a.availableBeds||"0",unavailable:a.unavailable||"0",plannedDischarge:a.plannedDischarge||"0",comment:a.comment||""}}},{merge:!0})}catch(e){console.error("Error saving wardDailyRecord for ".concat(t,":"),e)}}});return await Promise.all(d),await ea(A.date),q("บันทึกข้อมูลสำเร็จ กำลังรีเซ็ตฟอร์ม..."),await new Promise(e=>setTimeout(e,1e3)),console.log("Data saved successfully"),eg(),i.YU.fire({title:"บันทึกข้อมูลสำเร็จ",html:'\n                    <div class="text-center">\n                        <p class="mb-2">ข้อมูลถูกบันทึกและส่งเพื่อรออนุมัติจาก Supervisor เรียบร้อยแล้ว</p>\n                        <p class="text-sm text-gray-600">คุณจะสามารถบันทึกข้อมูลกะต่อไปได้หลังจากข้อมูลนี้ได้รับการอนุมัติแล้ว</p>\n                    </div>\n                ',icon:"success",confirmButtonColor:"#0ab4ab"}).then(()=>{window.location.reload()}),!0}catch(e){return console.error("Error saving data:",e),i.YU.fire({title:"เกิดข้อผิดพลาด",text:"ไม่สามารถบันทึกข้อมูลได้ กรุณาลองอีกครั้ง",icon:"error",confirmButtonColor:"#0ab4ab"}),!1}finally{J(e=>({...e,savingData:!1}))}},eN=async e=>{try{let t=(0,l.rJ)(s.db,"wardDailyRecords"),a=(0,l.P)(t,(0,l._M)("date","==",e),(0,l._M)("approvalStatus","==","pending"));return!(await (0,l.GG)(a)).empty}catch(e){return console.error("Error checking pending approval:",e),!1}},ey=async()=>{try{let e=(0,l.rJ)(s.db,"staffRecords"),t=new Date(new Date().getFullYear(),0,1),a=new Date(new Date().getFullYear(),11,31),r=(0,l.P)(e,(0,l._M)("date",">=",(0,h.Ol)(t)),(0,l._M)("date","<=",(0,h.Ol)(a))),n=await (0,l.GG)(r),o={};n.docs.forEach(e=>{let t=e.data();o[t.date]||(o[t.date]=new Set),o[t.date].add(t.shift)});let i=Object.entries(o).map(e=>{let[t,a]=e;return{date:t,shifts:Array.from(a),isComplete:2===a.size}});P(i)}catch(e){console.error("Error fetching dates with data:",e),P([])}};(0,n.useEffect)(()=>{ey()},[]),(0,n.useEffect)(()=>()=>{D(!1),S(!1),O(!1)},[]);let ej=async e=>{if(await eN(A.date)){i.YU.fire({title:"ไม่สามารถเปลี่ยนกะได้",text:"ข้อมูลของวันนี้กำลังรออนุมัติจาก Supervisor ไม่สามารถเปลี่ยนกะได้",icon:"warning",confirmButtonColor:"#0ab4ab"});return}if("19:00-07:00"===e&&!await eo(A.date)){i.YU.fire({title:"ไม่สามารถเลือกกะดึกได้",html:"ไม่พบข้อมูลกะเช้าของวันที่นี้<br>กรุณาบันทึกข้อมูลกะเช้าก่อน",icon:"warning",confirmButtonColor:"#0ab4ab"});return}if(!Q||(await i.YU.fire({title:"มีข้อมูลที่ยังไม่ได้บันทึก",text:"การเปลี่ยนกะจะทำให้ข้อมูลที่กำลังป้อนหายไป คุณต้องการดำเนินการต่อหรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonText:"ใช่, เปลี่ยนกะ",cancelButtonText:"ไม่, ยกเลิก",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"})).isConfirmed){if(await ev(A.date,e)){let t=await i.YU.fire({title:"พบข้อมูลในระบบ",html:'\n                    <div class="text-left">\n                        <p>พบข้อมูลของวันที่ '.concat((0,h.mI)(new Date(A.date))," กะ ").concat(e,' ในระบบแล้ว</p>\n                        <p class="mt-2">คุณต้องการดำเนินการอย่างไร?</p>\n                    </div>\n                '),icon:"question",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"โหลดข้อมูลเดิม",denyButtonText:"สร้างข้อมูลใหม่",cancelButtonText:"ยกเลิก",confirmButtonColor:"#0ab4ab",denyButtonColor:"#d33",cancelButtonColor:"#6c757d"});if(t.isConfirmed)eg(),Y(t=>({...t,shift:e})),await eC(A.date,e);else{if(!t.isDenied)return;eg(),Y(t=>({...t,shift:e}))}}else eg(),Y(t=>({...t,shift:e}));K(!1)}},eC=async(e,t)=>{try{q("กำลังดึงข้อมูลจากระบบ");let a=(0,l.rJ)(s.db,"wardDailyRecords"),r=new Date(e),n="";"19:00-07:00"===t?(n="07:00-19:00",q("กำลังดึงข้อมูลจากกะเช้า-บ่าย (".concat(n,")"))):(r.setDate(r.getDate()-1),n="19:00-07:00",q("กำลังดึงข้อมูลจากกะดึกของวันก่อนหน้า (".concat(n,")")));let o=(0,h.Ol)(r),i=(0,h.mI)(r).replace("เพิ่มข้อมูล วันที่: ","");q("กำลังดึงข้อมูล Overall Data\nจากวันที่ ".concat(i,"\nกะ ").concat(n));let d=(0,l.P)(a,(0,l._M)("date","==",o)),c=await (0,l.GG)(d),u={...A.wards};if(c.empty){q("กำลังค้นหาข้อมูลล่าสุด...");let e=(0,l.P)(a,(0,l._M)("date","<=",o),(0,l.My)("date","desc"),(0,l.AB)(1)),t=await (0,l.GG)(e);if(t.empty)q("ไม่พบข้อมูลก่อนหน้า"),setTimeout(()=>q(""),2e3);else{let e=t.docs[0].data(),a=(0,h.mI)(new Date(e.date)).replace("เพิ่มข้อมูล วันที่: ","");q("พบข้อมูลล่าสุดจาก\nวันที่ ".concat(a)),Object.keys(A.wards).forEach(e=>{var t;let a=null===(t=c.docs.find(t=>t.data().wardId===e))||void 0===t?void 0:t.data();a&&(u[e]={...A.wards[e],numberOfPatients:a.overallData||"0",overallData:a.overallData||"0"})}),Y(e=>({...e,wards:u})),setTimeout(()=>q(""),2e3)}}else c.docs.forEach(e=>{let t=e.data(),a=t.wardId;t.shifts&&t.shifts[n]&&(t.shifts[n],u[a]={...A.wards[a],numberOfPatients:t.overallData||"0",overallData:t.overallData||"0"})}),Y(e=>({...e,wards:u})),q("ดึงข้อมูลสำเร็จ\nจากวันที่ ".concat(i,"\nกะ ").concat(n)),setTimeout(()=>q(""),2e3)}catch(e){console.error("Error fetching previous shift data:",e),q("เกิดข้อผิดพลาด: ".concat(e.message)),setTimeout(()=>q(""),3e3)}};(0,n.useEffect)(()=>{K(eb())},[A,U,eb]);let eD=async()=>{Q?(await i.YU.fire({title:"แจ้งเตือนการเปลี่ยนหน้า",html:'\n                    <div class="text-left">\n                        <p class="font-semibold text-red-600">ข้อควรระวัง: พบข้อมูลที่ยังไม่ได้บันทึก</p>\n                        <div className="mt-4 space-y-2">\n                            <p className="text-gray-700">การเปลี่ยนไปยังหน้า Dashboard จะส่งผลดังนี้:</p>\n                            <ul className="list-disc pl-5 space-y-1">\n                                <li class="text-gray-600">ข้อมูลที่ท่านกรอกจะไม่ถูกบันทึก</li>\n                                <li class="text-gray-600">ข้อมูลทั้งหมดในแบบฟอร์มจะถูกรีเซ็ต</li>\n                                <li class="text-gray-600">ท่านจะต้องเริ่มกรอกข้อมูลใหม่เมื่อกลับมายังหน้านี้</li>\n                            </ul>\n                            <div className="mt-4 p-2 bg-yellow-50 border border-yellow-200 rounded-lg">\n                                <p className="text-sm text-yellow-700">\n                                    <span class="font-medium">คำแนะนำ:</span> กรุณาบันทึกข้อมูลให้เรียบร้อยก่อนออกจากหน้านี้\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                ',icon:"warning",showCancelButton:!0,confirmButtonText:"ยืนยันการเปลี่ยนหน้า",cancelButtonText:"ยกเลิกและกลับไปบันทึกข้อมูล",confirmButtonColor:"#d33",cancelButtonColor:"#0ab4ab",reverseButtons:!0})).isConfirmed&&f.push("/dashboard"):f.push("/dashboard")};return(0,r.jsxs)("div",{className:"w-full px-2 py-2",children:[$&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-[#0ab4ab]/95 to-blue-600/95 backdrop-blur-md flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl text-center space-y-4",children:[(0,r.jsx)("img",{src:"/images/BPK.jpg",alt:"BPK Logo",className:"w-24 h-24 mx-auto mb-4 animate-pulse"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-[#0ab4ab]",children:"แจ้งเตือนการใช้งาน"}),(0,r.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,r.jsx)("p",{className:"font-medium",children:"ระบบอยู่ระหว่างการพัฒนาสำหรับอุปกรณ์มือถือ"}),(0,r.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-xl",children:[(0,r.jsx)("p",{className:"text-sm",children:"เพื่อประสิทธิภาพในการใช้งานสูงสุด กรุณาใช้งานผ่าน:"}),(0,r.jsxs)("ul",{className:"text-sm mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"• คอมพิวเตอร์ตั้งโต๊ะ (Desktop)"}),(0,r.jsx)("li",{children:"• คอมพิวเตอร์พกพา (Laptop)"})]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"หากมีข้อสงสัยกรุณาติดต่อผู้ดูแลระบบ"})]})]})}),(0,r.jsxs)("form",{onSubmit:ex,className:"w-full mx-auto",children:[C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-white flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("img",{src:"/images/BPK.jpg",alt:"BPK Loading",className:"w-32 h-32 mx-auto mb-4 animate-pulse"}),(0,r.jsx)("p",{className:"text-gray-600",children:"กำลังโหลด..."})]})}),(0,r.jsx)(x,{showDataComparison:H,existingData:z,formData:A,summaryData:U,setShowDataComparison:G,saveData:ew,WARD_ORDER:o.UX}),(0,r.jsx)(v.A,{showCalendar:k,setShowCalendar:O,selectedDate:I,setSelectedDate:M,formData:A,setFormData:Y,thaiDate:L,setThaiDate:W,fetchPreviousShiftData:eC,handleShiftChange:ej,datesWithData:T,checkExistingData:ev,setSummaryData:_}),(0,r.jsx)("div",{className:"hidden md:block w-full",children:(0,r.jsxs)("div",{className:"w-full mx-auto p-4 bg-white rounded-xl shadow-lg border border-gray-200",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-pink-400/20 to-white p-2 rounded-lg",children:(0,r.jsx)("h2",{className:"text-lg font-bold text-pink-600 text-center mb-1",children:"Form"})}),(0,r.jsx)(m,{WARD_ORDER:em,formData:A,handleInputChange:ef,displayValue:e=>null==e||""===e?"0":e,approvalStatuses:ee,selectedDate:I,readOnly:(null==N?void 0:null===(t=N.role)||void 0===t?void 0:t.toLowerCase())==="user"})]})}),(0,r.jsx)("div",{className:"hidden md:block mt-8",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-[#0ab4ab]/10 to-white rounded-xl shadow-lg p-6",children:(null==N?void 0:null===(a=N.role)||void 0===a?void 0:a.toLowerCase())==="admin"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{summaryData:U,setSummaryData:_}),(0,r.jsx)(b,{summaryData:U,setSummaryData:_})]})})}),(0,r.jsx)("div",{className:"mt-8 flex justify-center p-6 bg-gradient-to-r from-[#0ab4ab]/10 to-white rounded-xl shadow-lg",children:(null==N?void 0:null===(d=N.role)||void 0===d?void 0:d.toLowerCase())==="user"?(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center border border-gray-200",children:[(0,r.jsx)("div",{className:"text-gray-700 font-medium mb-2",children:"โหมดดูข้อมูลเท่านั้น"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"คุณสามารถดูข้อมูลได้ แต่ไม่สามารถแก้ไขหรือบันทึกข้อมูลได้"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"ข้อมูลที่แสดงเฉพาะ ward ของคุณเท่านั้น"})]}):(0,r.jsx)("button",{type:"submit",disabled:B||R,className:"px-12 py-4 bg-gradient-to-r from-[#0ab4ab] to-blue-400 text-white text-lg font-bold rounded-xl shadow-lg hover:from-[#0ab4ab] hover:to-blue-500 transition-all transform hover:scale-105 disabled:from-gray-400 disabled:to-gray-500 font-THSarabun",children:B?"Saving...":R?"View Only Mode":"Save Data"})}),(0,r.jsx)("button",{onClick:eD,className:"px-4 py-2 rounded-lg text-white hover:bg-[#0ab4ab]/80",children:"Dashboard"})]})]})}},3979:(e,t,a)=>{"use strict";a.d(t,{Se:()=>r});let r=()=>{let e=new Date().getHours();return e>=7&&e<19?"07:00-19:00":"19:00-07:00"}},4613:(e,t,a)=>{"use strict";a.d(t,{h:()=>r});let r="v.2.3.3.2025"},5279:()=>{},5653:(e,t,a)=>{"use strict";a.d(t,{N6:()=>s,UX:()=>n,XU:()=>r});let r={Ward6:"Ward 6",Ward7:"Ward 7",Ward8:"Ward 8",Ward9:"Ward 9",WardGI:"Ward GI",Ward10B:"Ward 10B",Ward11:"Ward 11",Ward12:"Ward 12",ICU:"ICU",CCU:"CCU",LR:"LR",NSY:"NSY"},n=["Ward6","Ward7","Ward8","Ward9","WardGI","Ward10B","Ward11","Ward12","ICU","CCU","LR","NSY"],s={numberOfPatients:"0",nurseManager:"0",RN:"0",PN:"0",WC:"0",newAdmit:"0",transferIn:"0",referIn:"0",transferOut:"0",referOut:"0",discharge:"0",dead:"0",overallData:"0",availableBeds:"0",plannedDischarge:"0",unavailable:"0",comment:""}},9092:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var r=a(5155),n=a(2115),s=a(5695),l=a(2808),o=a(7775),i=a(4776),d=a(4613),c=a(9770);function u(e){let{children:t,title:a,requiredRole:u="user",infoBox:m}=e,{user:f,loading:x,isAuthenticated:h}=(0,l.A)(),p=(0,s.useRouter)(),[b,g]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{x||h||p.push("/login"),f&&f.role&&("admin"===f.role.toLowerCase()?g(!0):"user"===u?g(!0):f.role.toLowerCase()===u.toLowerCase()?g(!0):(g(!1),(0,c.$s)("unauthorized_access_attempt",{userRole:f.role,requiredRole:u,page:a})))},[x,h,p,f,u,a]),x)?(0,r.jsx)(i.A,{}):h?b?(0,r.jsx)(o.A,{requiredRole:u,children:(0,r.jsxs)("div",{className:"min-h-screen pb-16 relative",children:[(0,r.jsxs)("main",{className:"container mx-auto px-4 pt-20",children:[a&&(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:a}),m&&(0,r.jsx)("div",{className:"mb-6",children:m}),t]}),(0,r.jsx)("div",{className:"fixed bottom-4 right-4 text-sm text-gray-500",children:d.h})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsx)("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"ไม่มีสิทธิ์เข้าถึง"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"คุณไม่มีสิทธิ์เพียงพอในการเข้าถึงหน้านี้ กรุณาติดต่อผู้ดูแลระบบหากคุณเชื่อว่านี่เป็นข้อผิดพลาด"}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>p.push("/"),children:"กลับไปยังหน้าหลัก"})})]})})}):null}}}]);