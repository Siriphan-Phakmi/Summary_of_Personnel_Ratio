"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_app_utils_firebase-index-manager_js"],{

/***/ "(app-pages-browser)/./app/utils/firebase-index-manager.js":
/*!*********************************************!*\
  !*** ./app/utils/firebase-index-manager.js ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleIndexError: () => (/* binding */ handleIndexError),\n/* harmony export */   safeQuery: () => (/* binding */ safeQuery),\n/* harmony export */   validateFirestoreIndex: () => (/* binding */ validateFirestoreIndex),\n/* harmony export */   validateRequiredIndexes: () => (/* binding */ validateRequiredIndexes)\n/* harmony export */ });\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/firebase */ \"(app-pages-browser)/./app/lib/firebase.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _alertService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./alertService */ \"(app-pages-browser)/./app/utils/alertService.js\");\n/* __next_internal_client_entry_do_not_use__ validateFirestoreIndex,handleIndexError,safeQuery,validateRequiredIndexes auto */ \n\n\n/**\r\n * ฟังก์ชันสำหรับตรวจสอบและจัดการ Firebase Index Error\r\n */ // เก็บประวัติ indexes ที่ได้รับการตรวจสอบแล้ว\nconst validatedIndexes = new Set();\n// ฟังก์ชันตรวจสอบ query ว่าต้องการ index หรือไม่โดยทำการทดสอบ query ขนาดเล็ก\nconst validateFirestoreIndex = async function(collectionPath, conditions) {\n    let orderByFields = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];\n    try {\n        // สร้างรหัสเฉพาะสำหรับ query นี้\n        const queryId = generateQueryId(collectionPath, conditions, orderByFields);\n        // ถ้าเคยตรวจสอบแล้ว ไม่ต้องตรวจสอบอีก\n        if (validatedIndexes.has(queryId)) {\n            return {\n                success: true,\n                validated: true\n            };\n        }\n        // สร้าง query ขนาดเล็กสำหรับทดสอบ\n        const testQuery = buildTestQuery(collectionPath, conditions, orderByFields);\n        // ทดลองดึงข้อมูล 1 รายการเพื่อตรวจสอบว่ามี index error หรือไม่\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(testQuery);\n        // ถ้าสำเร็จ เพิ่มเข้าไปในรายการที่ตรวจสอบแล้ว\n        validatedIndexes.add(queryId);\n        return {\n            success: true,\n            validated: true\n        };\n    } catch (error) {\n        console.error('Firebase Index Validation Error:', error);\n        // ตรวจสอบว่าเป็น index error หรือไม่\n        if (error.message && error.message.includes('requires an index')) {\n            // แยก URL สำหรับสร้าง index จาก error message\n            const indexUrl = extractIndexUrl(error.message);\n            return {\n                success: false,\n                isIndexError: true,\n                message: error.message,\n                indexUrl\n            };\n        }\n        // กรณีเป็น error อื่นๆ\n        return {\n            success: false,\n            isIndexError: false,\n            message: error.message\n        };\n    }\n};\n// สร้าง Query ID เพื่อใช้เป็น key ในการเก็บประวัติ\nconst generateQueryId = (collectionPath, conditions, orderByFields)=>{\n    const conditionsStr = conditions.map((c)=>\"\".concat(c.field, \"_\").concat(c.operator, \"_\").concat(c.value)).join('|');\n    const orderByStr = orderByFields.join('|');\n    return \"\".concat(collectionPath, \"_\").concat(conditionsStr, \"_\").concat(orderByStr);\n};\n// สร้าง test query สำหรับตรวจสอบ\nconst buildTestQuery = (collectionPath, conditions, orderByFields)=>{\n    let baseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_0__.db, collectionPath), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.limit)(1));\n    // เพิ่มเงื่อนไข where\n    conditions.forEach((condition)=>{\n        baseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(baseQuery, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(condition.field, condition.operator, condition.value));\n    });\n    // เพิ่ม orderBy ถ้ามี\n    if (orderByFields.length > 0) {\n        const { orderBy } = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/index.cjs.js\");\n        orderByFields.forEach((field)=>{\n            if (typeof field === 'object') {\n                baseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(baseQuery, orderBy(field.field, field.direction));\n            } else {\n                baseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(baseQuery, orderBy(field));\n            }\n        });\n    }\n    return baseQuery;\n};\n// แยก URL สำหรับสร้าง index จาก error message\nconst extractIndexUrl = (errorMessage)=>{\n    const urlMatch = errorMessage.match(/(https:\\/\\/console\\.firebase\\.google\\.com\\S+)/);\n    return urlMatch && urlMatch[1] ? urlMatch[1] : null;\n};\n// ฟังก์ชันช่วยแสดง dialog เมื่อพบ index error\nconst handleIndexError = async function(error) {\n    let autoOpen = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n    // ตรวจสอบว่าเป็น index error หรือไม่\n    if (error.message && error.message.includes('requires an index')) {\n        const indexUrl = extractIndexUrl(error.message);\n        if (indexUrl) {\n            // แสดง dialog พร้อมลิงก์ไปยังหน้าสร้าง index\n            const result = await _alertService__WEBPACK_IMPORTED_MODULE_2__.Swal.fire({\n                title: 'ต้องสร้าง Index ใน Firebase',\n                html: '\\n          <p>การค้นหาข้อมูลนี้ต้องการ index เพิ่มเติม</p>\\n          <p>คลิกปุ่ม \"สร้าง Index\" เพื่อสร้าง index ใน Firebase Console</p>\\n          <p>หลังจากสร้างแล้ว ให้กลับมารีเฟรชหน้านี้</p>\\n          <div class=\"mt-4\">\\n            <a href=\"'.concat(indexUrl, '\" target=\"_blank\" rel=\"noopener noreferrer\" \\n               class=\"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\">\\n              สร้าง Index\\n            </a>\\n          </div>\\n        '),\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonText: 'รีเฟรชหน้านี้',\n                cancelButtonText: 'ยกเลิก',\n                confirmButtonColor: '#0ab4ab'\n            });\n            // เปิด URL ในแท็บใหม่โดยอัตโนมัติถ้าต้องการ\n            if (autoOpen) {\n                window.open(indexUrl, '_blank');\n            }\n            // ถ้าผู้ใช้คลิก \"รีเฟรชหน้านี้\"\n            if (result.isConfirmed) {\n                window.location.reload();\n            }\n            return true;\n        }\n    }\n    return false;\n};\n// ฟังก์ชันสำหรับการ query ที่ปลอดภัย (มีการตรวจสอบ index ก่อน)\nconst safeQuery = async function(collectionPath, conditions) {\n    let orderByFields = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [], requireIndex = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : true;\n    try {\n        // ตรวจสอบ index ก่อนถ้าต้องการ\n        if (requireIndex) {\n            const validationResult = await validateFirestoreIndex(collectionPath, conditions, orderByFields);\n            if (!validationResult.success) {\n                // ถ้าเป็น index error แสดง dialog\n                if (validationResult.isIndexError) {\n                    await handleIndexError({\n                        message: validationResult.message\n                    });\n                }\n                return {\n                    success: false,\n                    error: validationResult.message\n                };\n            }\n        }\n        // สร้าง query ตามปกติ\n        const queryObj = buildTestQuery(collectionPath, conditions, orderByFields);\n        // ดึงข้อมูลตามปกติ\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(queryObj);\n        // แปลงข้อมูลและส่งกลับ\n        const results = [];\n        querySnapshot.forEach((doc)=>{\n            results.push({\n                id: doc.id,\n                ...doc.data()\n            });\n        });\n        return {\n            success: true,\n            data: results\n        };\n    } catch (error) {\n        console.error('Safe Query Error:', error);\n        // จัดการ index error ถ้าเกิดขึ้น\n        const isIndexError = await handleIndexError(error);\n        return {\n            success: false,\n            error: error.message,\n            isIndexError\n        };\n    }\n};\n// ฟังก์ชันสำหรับตรวจสอบและสร้าง indexes ทั้งหมดที่จำเป็นสำหรับแอพ\nconst validateRequiredIndexes = async ()=>{\n    const indexTests = [\n        // ตัวอย่าง query ที่ต้องการ index\n        {\n            collection: 'wardData',\n            conditions: [\n                {\n                    field: 'wardId',\n                    operator: '==',\n                    value: 'test'\n                },\n                {\n                    field: 'date',\n                    operator: '==',\n                    value: '2023-01-01'\n                },\n                {\n                    field: 'shift',\n                    operator: '==',\n                    value: 'เช้า'\n                }\n            ]\n        },\n        {\n            collection: 'wardDataHistory',\n            conditions: [\n                {\n                    field: 'wardId',\n                    operator: '==',\n                    value: 'test'\n                },\n                {\n                    field: 'date',\n                    operator: '==',\n                    value: '2023-01-01'\n                },\n                {\n                    field: 'shift',\n                    operator: '==',\n                    value: 'เช้า'\n                }\n            ],\n            orderBy: [\n                {\n                    field: 'timestamp',\n                    direction: 'desc'\n                }\n            ]\n        },\n        {\n            collection: 'wardDailyRecords',\n            conditions: [\n                {\n                    field: 'wardId',\n                    operator: '==',\n                    value: 'test'\n                },\n                {\n                    field: 'date',\n                    operator: '>=',\n                    value: '2023-01-01'\n                },\n                {\n                    field: 'date',\n                    operator: '<=',\n                    value: '2023-02-01'\n                }\n            ]\n        }\n    ];\n    const results = [];\n    // ทดสอบแต่ละ query\n    for (const test of indexTests){\n        try {\n            const result = await validateFirestoreIndex(test.collection, test.conditions, test.orderBy || []);\n            results.push({\n                collection: test.collection,\n                success: result.success,\n                ...result\n            });\n        } catch (error) {\n            results.push({\n                collection: test.collection,\n                success: false,\n                error: error.message\n            });\n        }\n    }\n    return results;\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC91dGlscy9maXJlYmFzZS1pbmRleC1tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7K0hBRXFDO0FBQ3lDO0FBQ3hDO0FBRXRDOztDQUVDLEdBRUQsOENBQThDO0FBQzlDLE1BQU1PLG1CQUFtQixJQUFJQztBQUU3Qiw2RUFBNkU7QUFDdEUsTUFBTUMseUJBQXlCLGVBQU9DLGdCQUFnQkM7UUFBWUMsaUZBQWdCLEVBQUU7SUFDekYsSUFBSTtRQUNGLGlDQUFpQztRQUNqQyxNQUFNQyxVQUFVQyxnQkFBZ0JKLGdCQUFnQkMsWUFBWUM7UUFFNUQsc0NBQXNDO1FBQ3RDLElBQUlMLGlCQUFpQlEsR0FBRyxDQUFDRixVQUFVO1lBQ2pDLE9BQU87Z0JBQUVHLFNBQVM7Z0JBQU1DLFdBQVc7WUFBSztRQUMxQztRQUVBLGtDQUFrQztRQUNsQyxNQUFNQyxZQUFZQyxlQUFlVCxnQkFBZ0JDLFlBQVlDO1FBRTdELCtEQUErRDtRQUMvRCxNQUFNVCwyREFBT0EsQ0FBQ2U7UUFFZCw4Q0FBOEM7UUFDOUNYLGlCQUFpQmEsR0FBRyxDQUFDUDtRQUVyQixPQUFPO1lBQUVHLFNBQVM7WUFBTUMsV0FBVztRQUFLO0lBQzFDLEVBQUUsT0FBT0ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsb0NBQW9DQTtRQUVsRCxxQ0FBcUM7UUFDckMsSUFBSUEsTUFBTUUsT0FBTyxJQUFJRixNQUFNRSxPQUFPLENBQUNDLFFBQVEsQ0FBQyxzQkFBc0I7WUFDaEUsOENBQThDO1lBQzlDLE1BQU1DLFdBQVdDLGdCQUFnQkwsTUFBTUUsT0FBTztZQUU5QyxPQUFPO2dCQUNMUCxTQUFTO2dCQUNUVyxjQUFjO2dCQUNkSixTQUFTRixNQUFNRSxPQUFPO2dCQUN0QkU7WUFDRjtRQUNGO1FBRUEsdUJBQXVCO1FBQ3ZCLE9BQU87WUFDTFQsU0FBUztZQUNUVyxjQUFjO1lBQ2RKLFNBQVNGLE1BQU1FLE9BQU87UUFDeEI7SUFDRjtBQUNGLEVBQUU7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O29CQUFFb0IsT0FBTztvQkFBVUMsVUFBVTtvQkFBTUMsT0FBTztnQkFBTztnQkFDakQ7b0JBQUVGLE9BQU87b0JBQVFDLFVBQVU7b0JBQU1DLE9BQU87Z0JBQWE7Z0JBQ3JEO29CQUFFRixPQUFPO29CQUFTQyxVQUFVO29CQUFNQyxPQUFPO2dCQUFPO2FBQ2pEO1lBQ0RPLFNBQVM7Z0JBQUM7b0JBQUVULE9BQU87b0JBQWFXLFdBQVc7Z0JBQU87YUFBRTtRQUN0RDtRQUNBO1lBQ0V4QyxZQUFZO1lBQ1pTLFlBQVk7Z0JBQ1Y7b0JBQUVvQixPQUFPO29CQUFVQyxVQUFVO29CQUFNQyxPQUFPO2dCQUFPO2dCQUNqRDtvQkFBRUYsT0FBTztvQkFBUUMsVUFBVTtvQkFBTUMsT0FBTztnQkFBYTtnQkFDckQ7b0JBQUVGLE9BQU87b0JBQVFDLFVBQVU7b0JBQU1DLE9BQU87Z0JBQWE7YUFDdEQ7UUFDSDtLQUVEO0lBRUQsTUFBTWtDLFVBQVUsRUFBRTtJQUVsQixtQkFBbUI7SUFDbkIsS0FBSyxNQUFNTyxRQUFRRCxXQUFZO1FBQzdCLElBQUk7WUFDRixNQUFNekIsU0FBUyxNQUFNdkMsdUJBQ25CaUUsS0FBS3hFLFVBQVUsRUFDZndFLEtBQUsvRCxVQUFVLEVBQ2YrRCxLQUFLbEMsT0FBTyxJQUFJLEVBQUU7WUFHcEIyQixRQUFRRSxJQUFJLENBQUM7Z0JBQ1huRSxZQUFZd0UsS0FBS3hFLFVBQVU7Z0JBQzNCYyxTQUFTZ0MsT0FBT2hDLE9BQU87Z0JBQ3ZCLEdBQUdnQyxNQUFNO1lBQ1g7UUFDRixFQUFFLE9BQU8zQixPQUFPO1lBQ2Q4QyxRQUFRRSxJQUFJLENBQUM7Z0JBQ1huRSxZQUFZd0UsS0FBS3hFLFVBQVU7Z0JBQzNCYyxTQUFTO2dCQUNUSyxPQUFPQSxNQUFNRSxPQUFPO1lBQ3RCO1FBQ0Y7SUFDRjtJQUVBLE9BQU80QztBQUNULEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQl9TSVJcXE9uZURyaXZlXFzguYDguJTguKrguIHguYzguJfguYfguK3guJtcXEFjdGl2ZSAxNC0zLTIwMjVcXFN1bW1hcnlfb2ZfUGVyc29ubmVsX1JhdGlvXFxhcHBcXHV0aWxzXFxmaXJlYmFzZS1pbmRleC1tYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vbGliL2ZpcmViYXNlJztcclxuaW1wb3J0IHsgcXVlcnksIGNvbGxlY3Rpb24sIGdldERvY3MsIHdoZXJlLCBsaW1pdCB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XHJcbmltcG9ydCB7IFN3YWwgfSBmcm9tICcuL2FsZXJ0U2VydmljZSc7XHJcblxyXG4vKipcclxuICog4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4Liq4Liz4Lir4Lij4Lix4Lia4LiV4Lij4Lin4LiI4Liq4Lit4Lia4LmB4Lil4Liw4LiI4Lix4LiU4LiB4Liy4LijIEZpcmViYXNlIEluZGV4IEVycm9yXHJcbiAqL1xyXG5cclxuLy8g4LmA4LiB4LmH4Lia4Lib4Lij4Liw4Lin4Lix4LiV4Li0IGluZGV4ZXMg4LiX4Li14LmI4LmE4LiU4LmJ4Lij4Lix4Lia4LiB4Liy4Lij4LiV4Lij4Lin4LiI4Liq4Lit4Lia4LmB4Lil4LmJ4LinXHJcbmNvbnN0IHZhbGlkYXRlZEluZGV4ZXMgPSBuZXcgU2V0KCk7XHJcblxyXG4vLyDguJ/guLHguIfguIHguYzguIrguLHguJnguJXguKPguKfguIjguKrguK3guJogcXVlcnkg4Lin4LmI4Liy4LiV4LmJ4Lit4LiH4LiB4Liy4LijIGluZGV4IOC4q+C4o+C4t+C4reC5hOC4oeC5iOC5guC4lOC4ouC4l+C4s+C4geC4suC4o+C4l+C4lOC4quC4reC4miBxdWVyeSDguILguJnguLLguJTguYDguKXguYfguIFcclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlRmlyZXN0b3JlSW5kZXggPSBhc3luYyAoY29sbGVjdGlvblBhdGgsIGNvbmRpdGlvbnMsIG9yZGVyQnlGaWVsZHMgPSBbXSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyDguKrguKPguYnguLLguIfguKPguKvguLHguKrguYDguInguJ7guLLguLDguKrguLPguKvguKPguLHguJogcXVlcnkg4LiZ4Li14LmJXHJcbiAgICBjb25zdCBxdWVyeUlkID0gZ2VuZXJhdGVRdWVyeUlkKGNvbGxlY3Rpb25QYXRoLCBjb25kaXRpb25zLCBvcmRlckJ5RmllbGRzKTtcclxuICAgIFxyXG4gICAgLy8g4LiW4LmJ4Liy4LmA4LiE4Lii4LiV4Lij4Lin4LiI4Liq4Lit4Lia4LmB4Lil4LmJ4LinIOC5hOC4oeC5iOC4leC5ieC4reC4h+C4leC4o+C4p+C4iOC4quC4reC4muC4reC4teC4gVxyXG4gICAgaWYgKHZhbGlkYXRlZEluZGV4ZXMuaGFzKHF1ZXJ5SWQpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHZhbGlkYXRlZDogdHJ1ZSB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDguKrguKPguYnguLLguIcgcXVlcnkg4LiC4LiZ4Liy4LiU4LmA4Lil4LmH4LiB4Liq4Liz4Lir4Lij4Lix4Lia4LiX4LiU4Liq4Lit4LiaXHJcbiAgICBjb25zdCB0ZXN0UXVlcnkgPSBidWlsZFRlc3RRdWVyeShjb2xsZWN0aW9uUGF0aCwgY29uZGl0aW9ucywgb3JkZXJCeUZpZWxkcyk7XHJcbiAgICBcclxuICAgIC8vIOC4l+C4lOC4peC4reC4h+C4lOC4tuC4h+C4guC5ieC4reC4oeC4ueC4pSAxIOC4o+C4suC4ouC4geC4suC4o+C5gOC4nuC4t+C5iOC4reC4leC4o+C4p+C4iOC4quC4reC4muC4p+C5iOC4suC4oeC4tSBpbmRleCBlcnJvciDguKvguKPguLfguK3guYTguKHguYhcclxuICAgIGF3YWl0IGdldERvY3ModGVzdFF1ZXJ5KTtcclxuICAgIFxyXG4gICAgLy8g4LiW4LmJ4Liy4Liq4Liz4LmA4Lij4LmH4LiIIOC5gOC4nuC4tOC5iOC4oeC5gOC4guC5ieC4suC5hOC4m+C5g+C4meC4o+C4suC4ouC4geC4suC4o+C4l+C4teC5iOC4leC4o+C4p+C4iOC4quC4reC4muC5geC4peC5ieC4p1xyXG4gICAgdmFsaWRhdGVkSW5kZXhlcy5hZGQocXVlcnlJZCk7XHJcbiAgICBcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHZhbGlkYXRlZDogdHJ1ZSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGaXJlYmFzZSBJbmRleCBWYWxpZGF0aW9uIEVycm9yOicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgLy8g4LiV4Lij4Lin4LiI4Liq4Lit4Lia4Lin4LmI4Liy4LmA4Lib4LmH4LiZIGluZGV4IGVycm9yIOC4q+C4o+C4t+C4reC5hOC4oeC5iFxyXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncmVxdWlyZXMgYW4gaW5kZXgnKSkge1xyXG4gICAgICAvLyDguYHguKLguIEgVVJMIOC4quC4s+C4q+C4o+C4seC4muC4quC4o+C5ieC4suC4hyBpbmRleCDguIjguLLguIEgZXJyb3IgbWVzc2FnZVxyXG4gICAgICBjb25zdCBpbmRleFVybCA9IGV4dHJhY3RJbmRleFVybChlcnJvci5tZXNzYWdlKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7IFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICBpc0luZGV4RXJyb3I6IHRydWUsIFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgaW5kZXhVcmwgXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOC4geC4o+C4k+C4teC5gOC4m+C5h+C4mSBlcnJvciDguK3guLfguYjguJnguYZcclxuICAgIHJldHVybiB7IFxyXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgIGlzSW5kZXhFcnJvcjogZmFsc2UsIFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIFxyXG4gICAgfTtcclxuICB9XHJcbn07XHJcblxyXG4vLyDguKrguKPguYnguLLguIcgUXVlcnkgSUQg4LmA4Lie4Li34LmI4Lit4LmD4LiK4LmJ4LmA4Lib4LmH4LiZIGtleSDguYPguJnguIHguLLguKPguYDguIHguYfguJrguJvguKPguLDguKfguLHguJXguLRcclxuY29uc3QgZ2VuZXJhdGVRdWVyeUlkID0gKGNvbGxlY3Rpb25QYXRoLCBjb25kaXRpb25zLCBvcmRlckJ5RmllbGRzKSA9PiB7XHJcbiAgY29uc3QgY29uZGl0aW9uc1N0ciA9IGNvbmRpdGlvbnMubWFwKGMgPT4gYCR7Yy5maWVsZH1fJHtjLm9wZXJhdG9yfV8ke2MudmFsdWV9YCkuam9pbignfCcpO1xyXG4gIGNvbnN0IG9yZGVyQnlTdHIgPSBvcmRlckJ5RmllbGRzLmpvaW4oJ3wnKTtcclxuICByZXR1cm4gYCR7Y29sbGVjdGlvblBhdGh9XyR7Y29uZGl0aW9uc1N0cn1fJHtvcmRlckJ5U3RyfWA7XHJcbn07XHJcblxyXG4vLyDguKrguKPguYnguLLguIcgdGVzdCBxdWVyeSDguKrguLPguKvguKPguLHguJrguJXguKPguKfguIjguKrguK3guJpcclxuY29uc3QgYnVpbGRUZXN0UXVlcnkgPSAoY29sbGVjdGlvblBhdGgsIGNvbmRpdGlvbnMsIG9yZGVyQnlGaWVsZHMpID0+IHtcclxuICBsZXQgYmFzZVF1ZXJ5ID0gcXVlcnkoXHJcbiAgICBjb2xsZWN0aW9uKGRiLCBjb2xsZWN0aW9uUGF0aCksXHJcbiAgICBsaW1pdCgxKVxyXG4gICk7XHJcbiAgXHJcbiAgLy8g4LmA4Lie4Li04LmI4Lih4LmA4LiH4Li34LmI4Lit4LiZ4LmE4LiCIHdoZXJlXHJcbiAgY29uZGl0aW9ucy5mb3JFYWNoKGNvbmRpdGlvbiA9PiB7XHJcbiAgICBiYXNlUXVlcnkgPSBxdWVyeShcclxuICAgICAgYmFzZVF1ZXJ5LFxyXG4gICAgICB3aGVyZShjb25kaXRpb24uZmllbGQsIGNvbmRpdGlvbi5vcGVyYXRvciwgY29uZGl0aW9uLnZhbHVlKVxyXG4gICAgKTtcclxuICB9KTtcclxuICBcclxuICAvLyDguYDguJ7guLTguYjguKEgb3JkZXJCeSDguJbguYnguLLguKHguLVcclxuICBpZiAob3JkZXJCeUZpZWxkcy5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCB7IG9yZGVyQnkgfSA9IHJlcXVpcmUoJ2ZpcmViYXNlL2ZpcmVzdG9yZScpO1xyXG4gICAgb3JkZXJCeUZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBiYXNlUXVlcnkgPSBxdWVyeShiYXNlUXVlcnksIG9yZGVyQnkoZmllbGQuZmllbGQsIGZpZWxkLmRpcmVjdGlvbikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJhc2VRdWVyeSA9IHF1ZXJ5KGJhc2VRdWVyeSwgb3JkZXJCeShmaWVsZCkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGJhc2VRdWVyeTtcclxufTtcclxuXHJcbi8vIOC5geC4ouC4gSBVUkwg4Liq4Liz4Lir4Lij4Lix4Lia4Liq4Lij4LmJ4Liy4LiHIGluZGV4IOC4iOC4suC4gSBlcnJvciBtZXNzYWdlXHJcbmNvbnN0IGV4dHJhY3RJbmRleFVybCA9IChlcnJvck1lc3NhZ2UpID0+IHtcclxuICBjb25zdCB1cmxNYXRjaCA9IGVycm9yTWVzc2FnZS5tYXRjaCgvKGh0dHBzOlxcL1xcL2NvbnNvbGVcXC5maXJlYmFzZVxcLmdvb2dsZVxcLmNvbVxcUyspLyk7XHJcbiAgcmV0dXJuIHVybE1hdGNoICYmIHVybE1hdGNoWzFdID8gdXJsTWF0Y2hbMV0gOiBudWxsO1xyXG59O1xyXG5cclxuLy8g4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4LiK4LmI4Lin4Lii4LmB4Liq4LiU4LiHIGRpYWxvZyDguYDguKHguLfguYjguK3guJ7guJogaW5kZXggZXJyb3JcclxuZXhwb3J0IGNvbnN0IGhhbmRsZUluZGV4RXJyb3IgPSBhc3luYyAoZXJyb3IsIGF1dG9PcGVuID0gZmFsc2UpID0+IHtcclxuICAvLyDguJXguKPguKfguIjguKrguK3guJrguKfguYjguLLguYDguJvguYfguJkgaW5kZXggZXJyb3Ig4Lir4Lij4Li34Lit4LmE4Lih4LmIXHJcbiAgaWYgKGVycm9yLm1lc3NhZ2UgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncmVxdWlyZXMgYW4gaW5kZXgnKSkge1xyXG4gICAgY29uc3QgaW5kZXhVcmwgPSBleHRyYWN0SW5kZXhVcmwoZXJyb3IubWVzc2FnZSk7XHJcbiAgICBcclxuICAgIGlmIChpbmRleFVybCkge1xyXG4gICAgICAvLyDguYHguKrguJTguIcgZGlhbG9nIOC4nuC4o+C5ieC4reC4oeC4peC4tOC4h+C4geC5jOC5hOC4m+C4ouC4seC4h+C4q+C4meC5ieC4suC4quC4o+C5ieC4suC4hyBpbmRleFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBTd2FsLmZpcmUoe1xyXG4gICAgICAgIHRpdGxlOiAn4LiV4LmJ4Lit4LiH4Liq4Lij4LmJ4Liy4LiHIEluZGV4IOC5g+C4mSBGaXJlYmFzZScsXHJcbiAgICAgICAgaHRtbDogYFxyXG4gICAgICAgICAgPHA+4LiB4Liy4Lij4LiE4LmJ4LiZ4Lir4Liy4LiC4LmJ4Lit4Lih4Li54Lil4LiZ4Li14LmJ4LiV4LmJ4Lit4LiH4LiB4Liy4LijIGluZGV4IOC5gOC4nuC4tOC5iOC4oeC5gOC4leC4tOC4oTwvcD5cclxuICAgICAgICAgIDxwPuC4hOC4peC4tOC4geC4m+C4uOC5iOC4oSBcIuC4quC4o+C5ieC4suC4hyBJbmRleFwiIOC5gOC4nuC4t+C5iOC4reC4quC4o+C5ieC4suC4hyBpbmRleCDguYPguJkgRmlyZWJhc2UgQ29uc29sZTwvcD5cclxuICAgICAgICAgIDxwPuC4q+C4peC4seC4h+C4iOC4suC4geC4quC4o+C5ieC4suC4h+C5geC4peC5ieC4pyDguYPguKvguYnguIHguKXguLHguJrguKHguLLguKPguLXguYDguJ/guKPguIrguKvguJnguYnguLLguJnguLXguYk8L3A+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibXQtNFwiPlxyXG4gICAgICAgICAgICA8YSBocmVmPVwiJHtpbmRleFVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgXHJcbiAgICAgICAgICAgICAgIGNsYXNzPVwicHgtNCBweS0yIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUgcm91bmRlZC1tZCBob3ZlcjpiZy1ibHVlLTYwMFwiPlxyXG4gICAgICAgICAgICAgIOC4quC4o+C5ieC4suC4hyBJbmRleFxyXG4gICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgLFxyXG4gICAgICAgIGljb246ICd3YXJuaW5nJyxcclxuICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn4Lij4Li14LmA4Lif4Lij4LiK4Lir4LiZ4LmJ4Liy4LiZ4Li14LmJJyxcclxuICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn4Lii4LiB4LmA4Lil4Li04LiBJyxcclxuICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICcjMGFiNGFiJ1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIOC5gOC4m+C4tOC4lCBVUkwg4LmD4LiZ4LmB4LiX4LmH4Lia4LmD4Lir4Lih4LmI4LmC4LiU4Lii4Lit4Lix4LiV4LmC4LiZ4Lih4Lix4LiV4Li04LiW4LmJ4Liy4LiV4LmJ4Lit4LiH4LiB4Liy4LijXHJcbiAgICAgIGlmIChhdXRvT3Blbikge1xyXG4gICAgICAgIHdpbmRvdy5vcGVuKGluZGV4VXJsLCAnX2JsYW5rJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOC4luC5ieC4suC4nOC4ueC5ieC5g+C4iuC5ieC4hOC4peC4tOC4gSBcIuC4o+C4teC5gOC4n+C4o+C4iuC4q+C4meC5ieC4suC4meC4teC5iVwiXHJcbiAgICAgIGlmIChyZXN1bHQuaXNDb25maXJtZWQpIHtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG4vLyDguJ/guLHguIfguIHguYzguIrguLHguJnguKrguLPguKvguKPguLHguJrguIHguLLguKMgcXVlcnkg4LiX4Li14LmI4Lib4Lil4Lit4LiU4Lig4Lix4LiiICjguKHguLXguIHguLLguKPguJXguKPguKfguIjguKrguK3guJogaW5kZXgg4LiB4LmI4Lit4LiZKVxyXG5leHBvcnQgY29uc3Qgc2FmZVF1ZXJ5ID0gYXN5bmMgKGNvbGxlY3Rpb25QYXRoLCBjb25kaXRpb25zLCBvcmRlckJ5RmllbGRzID0gW10sIHJlcXVpcmVJbmRleCA9IHRydWUpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8g4LiV4Lij4Lin4LiI4Liq4Lit4LiaIGluZGV4IOC4geC5iOC4reC4meC4luC5ieC4suC4leC5ieC4reC4h+C4geC4suC4o1xyXG4gICAgaWYgKHJlcXVpcmVJbmRleCkge1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgdmFsaWRhdGVGaXJlc3RvcmVJbmRleChjb2xsZWN0aW9uUGF0aCwgY29uZGl0aW9ucywgb3JkZXJCeUZpZWxkcyk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIC8vIOC4luC5ieC4suC5gOC4m+C5h+C4mSBpbmRleCBlcnJvciDguYHguKrguJTguIcgZGlhbG9nXHJcbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQuaXNJbmRleEVycm9yKSB7XHJcbiAgICAgICAgICBhd2FpdCBoYW5kbGVJbmRleEVycm9yKHsgbWVzc2FnZTogdmFsaWRhdGlvblJlc3VsdC5tZXNzYWdlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHZhbGlkYXRpb25SZXN1bHQubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOC4quC4o+C5ieC4suC4hyBxdWVyeSDguJXguLLguKHguJvguIHguJXguLRcclxuICAgIGNvbnN0IHF1ZXJ5T2JqID0gYnVpbGRUZXN0UXVlcnkoY29sbGVjdGlvblBhdGgsIGNvbmRpdGlvbnMsIG9yZGVyQnlGaWVsZHMpO1xyXG4gICAgXHJcbiAgICAvLyDguJTguLbguIfguILguYnguK3guKHguLnguKXguJXguLLguKHguJvguIHguJXguLRcclxuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHF1ZXJ5T2JqKTtcclxuICAgIFxyXG4gICAgLy8g4LmB4Lib4Lil4LiH4LiC4LmJ4Lit4Lih4Li54Lil4LmB4Lil4Liw4Liq4LmI4LiH4LiB4Lil4Lix4LiaXHJcbiAgICBjb25zdCByZXN1bHRzID0gW107XHJcbiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZG9jID0+IHtcclxuICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICBpZDogZG9jLmlkLFxyXG4gICAgICAgIC4uLmRvYy5kYXRhKClcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0cyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTYWZlIFF1ZXJ5IEVycm9yOicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgLy8g4LiI4Lix4LiU4LiB4Liy4LijIGluZGV4IGVycm9yIOC4luC5ieC4suC5gOC4geC4tOC4lOC4guC4tuC5ieC4mVxyXG4gICAgY29uc3QgaXNJbmRleEVycm9yID0gYXdhaXQgaGFuZGxlSW5kZXhFcnJvcihlcnJvcik7XHJcbiAgICBcclxuICAgIHJldHVybiB7IFxyXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICBpc0luZGV4RXJyb3IgXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8vIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC4quC4s+C4q+C4o+C4seC4muC4leC4o+C4p+C4iOC4quC4reC4muC5geC4peC4sOC4quC4o+C5ieC4suC4hyBpbmRleGVzIOC4l+C4seC5ieC4h+C4q+C4oeC4lOC4l+C4teC5iOC4iOC4s+C5gOC4m+C5h+C4meC4quC4s+C4q+C4o+C4seC4muC5geC4reC4nlxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVSZXF1aXJlZEluZGV4ZXMgPSBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgaW5kZXhUZXN0cyA9IFtcclxuICAgIC8vIOC4leC4seC4p+C4reC4ouC5iOC4suC4hyBxdWVyeSDguJfguLXguYjguJXguYnguK3guIfguIHguLLguKMgaW5kZXhcclxuICAgIHtcclxuICAgICAgY29sbGVjdGlvbjogJ3dhcmREYXRhJyxcclxuICAgICAgY29uZGl0aW9uczogW1xyXG4gICAgICAgIHsgZmllbGQ6ICd3YXJkSWQnLCBvcGVyYXRvcjogJz09JywgdmFsdWU6ICd0ZXN0JyB9LFxyXG4gICAgICAgIHsgZmllbGQ6ICdkYXRlJywgb3BlcmF0b3I6ICc9PScsIHZhbHVlOiAnMjAyMy0wMS0wMScgfSxcclxuICAgICAgICB7IGZpZWxkOiAnc2hpZnQnLCBvcGVyYXRvcjogJz09JywgdmFsdWU6ICfguYDguIrguYnguLInIH1cclxuICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgY29sbGVjdGlvbjogJ3dhcmREYXRhSGlzdG9yeScsXHJcbiAgICAgIGNvbmRpdGlvbnM6IFtcclxuICAgICAgICB7IGZpZWxkOiAnd2FyZElkJywgb3BlcmF0b3I6ICc9PScsIHZhbHVlOiAndGVzdCcgfSxcclxuICAgICAgICB7IGZpZWxkOiAnZGF0ZScsIG9wZXJhdG9yOiAnPT0nLCB2YWx1ZTogJzIwMjMtMDEtMDEnIH0sXHJcbiAgICAgICAgeyBmaWVsZDogJ3NoaWZ0Jywgb3BlcmF0b3I6ICc9PScsIHZhbHVlOiAn4LmA4LiK4LmJ4LiyJyB9XHJcbiAgICAgIF0sXHJcbiAgICAgIG9yZGVyQnk6IFt7IGZpZWxkOiAndGltZXN0YW1wJywgZGlyZWN0aW9uOiAnZGVzYycgfV1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGNvbGxlY3Rpb246ICd3YXJkRGFpbHlSZWNvcmRzJyxcclxuICAgICAgY29uZGl0aW9uczogW1xyXG4gICAgICAgIHsgZmllbGQ6ICd3YXJkSWQnLCBvcGVyYXRvcjogJz09JywgdmFsdWU6ICd0ZXN0JyB9LFxyXG4gICAgICAgIHsgZmllbGQ6ICdkYXRlJywgb3BlcmF0b3I6ICc+PScsIHZhbHVlOiAnMjAyMy0wMS0wMScgfSxcclxuICAgICAgICB7IGZpZWxkOiAnZGF0ZScsIG9wZXJhdG9yOiAnPD0nLCB2YWx1ZTogJzIwMjMtMDItMDEnIH1cclxuICAgICAgXVxyXG4gICAgfVxyXG4gICAgLy8g4LmA4Lie4Li04LmI4LihIHF1ZXJ5IOC4l+C4teC5iOC4leC5ieC4reC4h+C4geC4suC4oyBpbmRleCDguK3guLfguYjguJnguYYg4LiV4Liy4Lih4LiV4LmJ4Lit4LiH4LiB4Liy4LijXHJcbiAgXTtcclxuICBcclxuICBjb25zdCByZXN1bHRzID0gW107XHJcbiAgXHJcbiAgLy8g4LiX4LiU4Liq4Lit4Lia4LmB4LiV4LmI4Lil4LiwIHF1ZXJ5XHJcbiAgZm9yIChjb25zdCB0ZXN0IG9mIGluZGV4VGVzdHMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZhbGlkYXRlRmlyZXN0b3JlSW5kZXgoXHJcbiAgICAgICAgdGVzdC5jb2xsZWN0aW9uLCBcclxuICAgICAgICB0ZXN0LmNvbmRpdGlvbnMsIFxyXG4gICAgICAgIHRlc3Qub3JkZXJCeSB8fCBbXVxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICBjb2xsZWN0aW9uOiB0ZXN0LmNvbGxlY3Rpb24sXHJcbiAgICAgICAgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsXHJcbiAgICAgICAgLi4ucmVzdWx0XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICBjb2xsZWN0aW9uOiB0ZXN0LmNvbGxlY3Rpb24sXHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiByZXN1bHRzO1xyXG59OyAiXSwibmFtZXMiOlsiZGIiLCJxdWVyeSIsImNvbGxlY3Rpb24iLCJnZXREb2NzIiwid2hlcmUiLCJsaW1pdCIsIlN3YWwiLCJ2YWxpZGF0ZWRJbmRleGVzIiwiU2V0IiwidmFsaWRhdGVGaXJlc3RvcmVJbmRleCIsImNvbGxlY3Rpb25QYXRoIiwiY29uZGl0aW9ucyIsIm9yZGVyQnlGaWVsZHMiLCJxdWVyeUlkIiwiZ2VuZXJhdGVRdWVyeUlkIiwiaGFzIiwic3VjY2VzcyIsInZhbGlkYXRlZCIsInRlc3RRdWVyeSIsImJ1aWxkVGVzdFF1ZXJ5IiwiYWRkIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImluY2x1ZGVzIiwiaW5kZXhVcmwiLCJleHRyYWN0SW5kZXhVcmwiLCJpc0luZGV4RXJyb3IiLCJjb25kaXRpb25zU3RyIiwibWFwIiwiYyIsImZpZWxkIiwib3BlcmF0b3IiLCJ2YWx1ZSIsImpvaW4iLCJvcmRlckJ5U3RyIiwiYmFzZVF1ZXJ5IiwiZm9yRWFjaCIsImNvbmRpdGlvbiIsImxlbmd0aCIsIm9yZGVyQnkiLCJyZXF1aXJlIiwiZGlyZWN0aW9uIiwiZXJyb3JNZXNzYWdlIiwidXJsTWF0Y2giLCJtYXRjaCIsImhhbmRsZUluZGV4RXJyb3IiLCJhdXRvT3BlbiIsInJlc3VsdCIsImZpcmUiLCJ0aXRsZSIsImh0bWwiLCJpY29uIiwic2hvd0NhbmNlbEJ1dHRvbiIsImNvbmZpcm1CdXR0b25UZXh0IiwiY2FuY2VsQnV0dG9uVGV4dCIsImNvbmZpcm1CdXR0b25Db2xvciIsIndpbmRvdyIsIm9wZW4iLCJpc0NvbmZpcm1lZCIsImxvY2F0aW9uIiwicmVsb2FkIiwic2FmZVF1ZXJ5IiwicmVxdWlyZUluZGV4IiwidmFsaWRhdGlvblJlc3VsdCIsInF1ZXJ5T2JqIiwicXVlcnlTbmFwc2hvdCIsInJlc3VsdHMiLCJkb2MiLCJwdXNoIiwiaWQiLCJkYXRhIiwidmFsaWRhdGVSZXF1aXJlZEluZGV4ZXMiLCJpbmRleFRlc3RzIiwidGVzdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/utils/firebase-index-manager.js\n"));

/***/ })

}]);