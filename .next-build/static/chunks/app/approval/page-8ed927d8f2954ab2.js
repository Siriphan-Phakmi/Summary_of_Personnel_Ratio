(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{907:(e,t,r)=>{"use strict";r.d(t,{Sw:()=>c,YU:()=>l});var a=r(5155),n=r(2115);let s=(0,n.createContext)(null),i={fire:async e=>window.__alertService?window.__alertService.showAlert(e):(console.warn("AlertProvider is not found. Using fallback alert."),"error"===e.icon||"error"===e.type)?(alert(e.title?"".concat(e.title,": ").concat(e.text||""):e.text),{isConfirmed:!0}):"warning"===e.icon||"warning"===e.type?{isConfirmed:confirm(e.title?"".concat(e.title,": ").concat(e.text||""):e.text)}:(alert(e.title?"".concat(e.title,": ").concat(e.text||""):e.text),{isConfirmed:!0}),success:async(e,t)=>i.fire({title:e,text:t,icon:"success"}),error:async(e,t)=>i.fire({title:e,text:t,icon:"error"}),warning:async function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return i.fire({title:e,text:t,icon:"warning",showCancelButton:r})},info:async(e,t)=>i.fire({title:e,text:t,icon:"info"}),confirm:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ตกลง",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ยกเลิก";return i.fire({title:e,text:t,icon:"question",showCancelButton:!0,confirmButtonText:r,cancelButtonText:a})},showLoading:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"กำลังโหลด...";if(window.__alertService)return window.__alertService.showLoading(e);console.log("Loading:",e)},close:()=>{if(window.__alertService)return window.__alertService.closeAll();console.log("Closing alerts")}},l=i,o=e=>{let{id:t,isOpen:r,onClose:s,title:i,text:l,icon:o="info",type:c="info",confirmButtonText:d="ตกลง",cancelButtonText:u="ยกเลิก",onConfirm:m,onCancel:x,showCancelButton:h=!1,allowOutsideClick:p=!0,timer:g=0,html:f=null,customClass:b={}}=e,[v,w]=(0,n.useState)(r),[y,j]=(0,n.useState)(g>0?Math.floor(g/1e3):0),N=o||c;(0,n.useEffect)(()=>{if(!v)return;let e=e=>{"Escape"===e.key&&p&&C(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[v,p]),(0,n.useEffect)(()=>{if(!v||g<=0)return;let e=setInterval(()=>{j(t=>t<=1?(clearInterval(e),setTimeout(()=>C(!0),0),0):t-1)},1e3);return()=>clearInterval(e)},[v,g]);let C=e=>{w(!1),setTimeout(()=>{e?m&&m():x&&x(),s&&s(e)},300)};return r?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 transition-opacity duration-300 ".concat(v?"opacity-100":"opacity-0 pointer-events-none"," ").concat(p?"cursor-pointer":""),onClick:e=>{e.target===e.currentTarget&&p&&C(!1)},style:{backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(2px)"},children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full m-4 transform transition-all duration-300 ".concat(v?"scale-100 opacity-100":"scale-95 opacity-0"," cursor-default ").concat(b.container||""),children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center",children:["success"===N&&(0,a.jsx)("div",{className:"mx-auto bg-green-100 p-3 rounded-full w-fit mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),"error"===N&&(0,a.jsx)("div",{className:"mx-auto bg-red-100 p-3 rounded-full w-fit mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),"info"===N&&(0,a.jsx)("div",{className:"mx-auto bg-blue-100 p-3 rounded-full w-fit mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"warning"===N&&(0,a.jsx)("div",{className:"mx-auto bg-yellow-100 p-3 rounded-full w-fit mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),"question"===N&&(0,a.jsx)("div",{className:"mx-auto bg-purple-100 p-3 rounded-full w-fit mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"loading"===N&&(0,a.jsx)("div",{className:"mx-auto p-3 w-fit mb-4",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-t-[#0ab4ab] border-r-[#0ab4ab] border-b-gray-200 border-l-gray-200 rounded-full animate-spin"})}),i&&(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2 ".concat(b.title||""),children:i}),l&&(0,a.jsx)("p",{className:"text-gray-600 ".concat(b.text||""),children:l}),f&&(0,a.jsx)("div",{className:"mt-2 ".concat(b.htmlContainer||""),dangerouslySetInnerHTML:{__html:f}}),y>0&&(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-500",children:["ปิดอัตโนมัติใน ",y," วินาที"]})]}),"loading"!==N&&(0,a.jsxs)("div",{className:"flex justify-center gap-3 mt-6",children:[h&&(0,a.jsx)("button",{onClick:()=>C(!1),className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 ".concat(b.cancelButton||""),children:u}),(0,a.jsx)("button",{onClick:()=>C(!0),className:"px-5 py-2 bg-[#0ab4ab] text-white rounded-md hover:bg-[#099a92] ".concat(b.confirmButton||""),children:d})]})]})})}):null},c=e=>{let{children:t}=e,[r,i]=(0,n.useState)([]),[l,c]=(0,n.useState)(null),d=(0,n.useRef)(0),u=()=>(d.current+=1,"".concat(Date.now(),"-").concat(d.current,"-").concat(Math.random().toString(36).substr(2,5)));(0,n.useEffect)(()=>(window.__alertService={showAlert:m,showLoading:x,closeAll:p},()=>{delete window.__alertService}),[]);let m=e=>new Promise(t=>{let r=u(),a={id:r,isOpen:!0,...e,onClose:e=>{h(r),t({isConfirmed:e})}};i(e=>[...e,a])}),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"กำลังโหลด...";p();let t=u();return c({id:t,isOpen:!0,title:e,type:"loading",icon:"loading",allowOutsideClick:!1}),t},h=e=>{i(t=>t.map(t=>t.id===e?{...t,isOpen:!1}:t)),setTimeout(()=>{i(t=>t.filter(t=>t.id!==e))},300)},p=()=>{i(e=>e.map(e=>({...e,isOpen:!1}))),l&&(c({...l,isOpen:!1}),setTimeout(()=>{c(null)},300)),setTimeout(()=>{i([])},300)};return(0,a.jsxs)(s.Provider,{value:{showAlert:m,showLoading:x,closeAlert:h,closeAll:p},children:[t,r.map(e=>(0,a.jsx)(o,{...e},e.id)),l&&(0,a.jsx)(o,{...l},"loading-".concat(l.id))]})}},4279:(e,t,r)=>{"use strict";r.d(t,{Lg:()=>n,Ol:()=>s,RB:()=>o,S2:()=>l,bU:()=>i,mI:()=>a});let a=e=>{if(!e)return"คุณยังไม่ได้เลือกวันที่";let t=new Date(e),r=t.getDate(),a=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"][t.getMonth()],n=t.getFullYear()+543;return"".concat(r," ").concat(a," ").concat(n)},n=()=>a(new Date),s=e=>{let t=new Date(e);return"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"))},i=e=>{let t=new Date(e),r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(r,"-").concat(a,"-").concat(n)},l=()=>["January","February","March","April","May","June","July","August","September","October","November","December"],o=e=>{let t=[];for(let e=2e3;e<=4e3;e++)t.push(e);return t}},4776:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),n=r(2115),s=r(6766);let i=e=>{let{timeout:t=15e3,onTimeout:r,showRetry:i=!1}=e,[l,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=setTimeout(()=>{o(!0),r&&r()},t);return()=>clearTimeout(e)},[t,r]),(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-white via-blue-50 to-[#0ab4ab]/10 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white/80 p-8 rounded-2xl shadow-xl backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,a.jsx)(s.default,{src:"/images/BPK.jpg",alt:"BPK Loading",fill:!0,style:{objectFit:"contain"},className:"rounded-lg ".concat(l?"":"animate-pulse"),priority:!0})}),(0,a.jsx)("div",{className:"flex flex-col items-center",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-red-600 font-medium mb-2",children:"การโหลดข้อมูลใช้เวลานานเกินไป"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"กรุณาตรวจสอบการเชื่อมต่อและลองใหม่อีกครั้ง"}),i&&(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-[#0ab4ab] text-white rounded-lg hover:bg-[#098f88] transition-colors",children:"ลองใหม่"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0ab4ab] mb-3"}),(0,a.jsx)("p",{className:"text-gray-600 font-medium",children:"กำลังโหลดข้อมูล..."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"โปรดรอสักครู่"})]})})]})})})}},5653:(e,t,r)=>{"use strict";r.d(t,{N6:()=>s,UX:()=>n,XU:()=>a});let a={Ward6:"Ward 6",Ward7:"Ward 7",Ward8:"Ward 8",Ward9:"Ward 9",WardGI:"Ward GI",Ward10B:"Ward 10B",Ward11:"Ward 11",Ward12:"Ward 12",ICU:"ICU",CCU:"CCU",LR:"LR",NSY:"NSY"},n=["Ward6","Ward7","Ward8","Ward9","WardGI","Ward10B","Ward11","Ward12","ICU","CCU","LR","NSY"],s={numberOfPatients:"0",nurseManager:"0",RN:"0",PN:"0",WC:"0",newAdmit:"0",transferIn:"0",referIn:"0",transferOut:"0",referOut:"0",discharge:"0",dead:"0",overallData:"0",availableBeds:"0",plannedDischarge:"0",unavailable:"0",comment:""}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6011:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),n=r(2115),s=r(5695),i=r(4197),l=r(5112),o=r(4279),c=r(2808),d=r(907),u=r(4776),m=r(5653);let x=()=>{let[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[x,h]=(0,n.useState)("all"),{user:p}=(0,c.A)();(0,n.useEffect)(()=>{(async()=>{s(!0);try{let e=(0,l.rJ)(i.db,"wardDailyRecords"),r=(0,l.P)(e,(0,l._M)("approvalStatus","==","pending"),(0,l.My)("lastUpdated","desc"),(0,l.AB)(50)),a=await (0,l.GG)(r),n=[];a.forEach(e=>{var t,r;let a=e.data();n.push({id:e.id,...a,formType:"ward",dateSubmitted:(null===(t=a.dateSubmitted)||void 0===t?void 0:t.toDate())||new Date,lastUpdated:(null===(r=a.lastUpdated)||void 0===r?void 0:r.toDate())||new Date})}),t(n)}catch(e){console.error("Error fetching pending approvals:",e),d.YU.fire({title:"เกิดข้อผิดพลาด",text:"ไม่สามารถดึงข้อมูลรายการที่รออนุมัติได้",icon:"error"})}finally{s(!1)}})()},[x]);let g=async e=>{try{let t=e.wardId,r=e.date;if(!(await d.YU.fire({title:"ยืนยันการอนุมัติ",html:"คุณต้องการอนุมัติข้อมูล Ward ใช่หรือไม่?<br>\n               วันที่: ".concat((0,o.mI)(r),"<br>\n               วอร์ด: ").concat(m.XU[t]||t),icon:"question",showCancelButton:!0,confirmButtonText:"อนุมัติ",cancelButtonText:"ยกเลิก",confirmButtonColor:"#0ab4ab"})).isConfirmed)return;let a=(0,l.H9)(i.db,"wardDailyRecords",e.id);await (0,l.mZ)(a,{approvalStatus:"approved",approvedBy:{uid:p.uid,displayName:p.displayName||"",email:p.email||""},approvedAt:new Date}),d.YU.fire({title:"อนุมัติสำเร็จ",text:"ข้อมูล Ward ".concat(m.XU[t]||t," ได้รับการอนุมัติแล้ว"),icon:"success",confirmButtonColor:"#0ab4ab"}),fetchPendingApprovals()}catch(e){console.error("Error approving item:",e),d.YU.fire({title:"เกิดข้อผิดพลาด",text:"ไม่สามารถอนุมัติข้อมูลได้ กรุณาลองอีกครั้ง",icon:"error",confirmButtonColor:"#0ab4ab"})}},f=async e=>{try{let t=e.wardId,r=e.date,a=await d.YU.fire({title:"ปฏิเสธข้อมูล",html:'\n          <div class="text-left">\n            <p class="mb-2">กรุณาระบุเหตุผลในการปฏิเสธข้อมูลของ '.concat(m.XU[t]||t,'</p>\n            <p class="text-sm text-gray-600">วันที่: ').concat((0,o.mI)(r),'</p>\n            <textarea id="rejection-reason" class="w-full mt-3 px-3 py-2 border border-gray-300 rounded" rows="3" placeholder="ระบุเหตุผล..."></textarea>\n          </div>\n        '),icon:"warning",showCancelButton:!0,confirmButtonText:"ปฏิเสธ",cancelButtonText:"ยกเลิก",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",preConfirm:()=>{let e=document.getElementById("rejection-reason").value;return e.trim()||d.YU.showValidationMessage("กรุณาระบุเหตุผลในการปฏิเสธ"),e}});if(!a.isConfirmed)return;let n=a.value,s=(0,l.H9)(i.db,"wardDailyRecords",e.id);await (0,l.mZ)(s,{approvalStatus:"rejected",rejectedBy:{uid:p.uid,displayName:p.displayName||"",email:p.email||""},rejectedAt:new Date,rejectionReason:n}),d.YU.fire({title:"ปฏิเสธข้อมูลสำเร็จ",text:"ข้อมูล Ward ".concat(m.XU[t]||t," ถูกปฏิเสธเรียบร้อยแล้ว"),icon:"success",confirmButtonColor:"#0ab4ab"}),fetchPendingApprovals()}catch(e){console.error("Error rejecting item:",e),d.YU.fire({title:"เกิดข้อผิดพลาด",text:"ไม่สามารถปฏิเสธข้อมูลได้ กรุณาลองอีกครั้ง",icon:"error",confirmButtonColor:"#0ab4ab"})}},b=async e=>{var t;let r=e.wardId,a=e.date,n='\n      <div class="text-left">\n        <p class="font-medium mb-2">ข้อมูล Ward: '.concat(m.XU[r]||r,'</p>\n        <p class="text-sm">วันที่: ').concat((0,o.mI)(a),'</p>\n        \n        <div class="mt-4">\n          <p class="font-medium">ข้อมูลกะ:</p>\n          <ul class="text-sm mt-1 space-y-1">\n    ');e.shifts&&Object.entries(e.shifts).forEach(e=>{let[t,r]=e;n+='<li class="pl-2 border-l-2 border-gray-300">'.concat(t,"</li>")}),n+='\n          </ul>\n        </div>\n        \n        <div class="mt-4">\n          <p class="font-medium">ผู้บันทึกข้อมูล:</p>\n          <p class="text-sm">'.concat((null===(t=e.submittedBy)||void 0===t?void 0:t.displayName)||"-",'</p>\n        </div>\n        \n        <div class="mt-4">\n          <p class="font-medium">เวลาบันทึก:</p>\n          <p class="text-sm">').concat(e.dateSubmitted?new Date(e.dateSubmitted).toLocaleString("th-TH"):"-","</p>\n        </div>\n      </div>\n    "),await d.YU.fire({title:"รายละเอียดข้อมูล",html:n,confirmButtonText:"ปิด",confirmButtonColor:"#0ab4ab"})};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"รายการรออนุมัติ"}),r?(0,a.jsx)(u.A,{}):0===e.length?(0,a.jsx)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"ไม่มีรายการที่รออนุมัติ"})}):(0,a.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"วอร์ด"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"วันที่"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"กะ"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ผู้บันทึก"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"วันที่บันทึก"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"การดำเนินการ"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"font-medium text-gray-900",children:m.XU[e.wardId]||e.wardId})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.mI)(e.date)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.shifts?Object.keys(e.shifts).join(", "):"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(null===(t=e.submittedBy)||void 0===t?void 0:t.displayName)||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.dateSubmitted?new Date(e.dateSubmitted).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>b(e),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"ดูข้อมูล"}),(0,a.jsx)("button",{onClick:()=>g(e),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"อนุมัติ"}),(0,a.jsx)("button",{onClick:()=>f(e),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"ปฏิเสธ"})]})})]},e.id)})})]})})]})};var h=r(7775);function p(){let{user:e,loading:t,isAuthenticated:r}=(0,c.A)(),i=(0,s.useRouter)();return((0,n.useEffect)(()=>{t||r||i.push("/login")},[t,r,i]),t)?(0,a.jsx)(u.A,{}):r?(0,a.jsx)(h.A,{requiredRole:"supervisor",children:(0,a.jsxs)("div",{className:"min-h-screen pb-16 relative",children:[(0,a.jsxs)("main",{className:"container mx-auto px-4 pt-20",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 mb-6 rounded-lg border border-blue-200",children:[(0,a.jsx)("h2",{className:"font-medium text-blue-700 mb-2",children:"หน้าอนุมัติข้อมูล"}),(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"คุณสามารถตรวจสอบและอนุมัติข้อมูลที่ถูกส่งจากผู้ใช้งานได้ที่นี่ โดยแบ่งตามประเภทข้อมูล Ward และ Shift"})]}),(0,a.jsx)(x,{})]}),(0,a.jsx)("div",{className:"fixed bottom-4 right-4 text-sm text-gray-500",children:"v.2.3.3.2025"})]})}):null}},7665:(e,t,r)=>{Promise.resolve().then(r.bind(r,6011))},7775:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),n=r(2115),s=r(5695),i=r(2808),l=r(4776);function o(e){let{children:t,requiredRole:r=null}=e,{user:o,loading:c,isAuthenticated:d}=(0,i.A)(),u=(0,s.useRouter)(),[m,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!0),[g,f]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{p(!1);try{if(!c){var e;console.log("AuthGuard checking auth:",{isAuthenticated:d,user:o,requiredRole:r}),d?"admin"===r&&(null==o?void 0:null===(e=o.role)||void 0===e?void 0:e.toLowerCase())!=="admin"?(console.log("User does not have admin role"),f(!0),x(!1)):(console.log("User is authenticated and authorized"),x(!0),f(!1)):(console.log("Not authenticated, redirecting to login"),u.push("/login"))}}catch(e){console.error("Error in AuthGuard:",e),x(!1)}},[c,d,o,u,r]),h)?(0,a.jsx)("div",{className:"min-h-screen"}):g?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow p-8 text-center",children:[(0,a.jsx)("div",{className:"text-red-500 text-5xl mb-4",children:"⚠️"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"ไม่ได้เข้า"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["ไม่ได้เข้าหน้านี้ เนื่องจากต้องมีบทบาทเป็น ",r]}),(0,a.jsx)("button",{onClick:()=>u.push("/"),className:"px-4 py-2 bg-[#0ab4ab] text-white rounded-md hover:bg-[#0ab4ab]/90",children:"หน้าแรก"})]})}):c||!m?(console.log("Still loading or not authorized yet, showing LoadingScreen"),(0,a.jsx)(l.A,{})):(console.log("Rendering children - user authorized"),(0,a.jsx)(a.Fragment,{children:t}))}}},e=>{var t=t=>e(e.s=t);e.O(0,[445,766,808,315,358],()=>t(7665)),_N_E=e.O()}]);