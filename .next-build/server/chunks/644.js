"use strict";exports.id=644,exports.ids=[644],exports.modules={17383:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(60687);r(43210);let s=({status:e})=>{let{bg:t,text:r,border:s,label:n,icon:d}=(()=>{switch(e){case"approved":return{bg:"bg-green-100",text:"text-green-800",border:"border-green-200",label:"อนุมัติแล้ว",icon:"✅"};case"rejected":return{bg:"bg-red-100",text:"text-red-800",border:"border-red-200",label:"ไม่อนุมัติ",icon:"❌"};case"pending":return{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200",label:"รออนุมัติ",icon:"⏳"};default:return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200",label:"ไม่ระบุสถานะ",icon:"❓"}}})();return(0,a.jsxs)("div",{className:`${t} ${r} ${s} border px-4 py-3 rounded-lg`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[(0,a.jsx)("span",{children:d}),(0,a.jsxs)("span",{children:["สถานะ: ",n]})]}),(0,a.jsx)("div",{className:"mt-1 text-sm opacity-80",children:"pending"===e?"ข้อมูลนี้กำลังรอการอนุมัติจาก Supervisor":"approved"===e?"ข้อมูลนี้ได้รับการอนุมัติแล้ว ไม่สามารถแก้ไขได้อีก":"rejected"===e?"ข้อมูลนี้ไม่ได้รับการอนุมัติ กรุณาแก้ไขและบันทึกใหม่":"ไม่พบข้อมูลสถานะการอนุมัติ"})]})}},30771:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(60687),s=r(92282),n=r(37734),d=r(84623),i=r(54868),l=r(39245);let o=()=>{let e=new Date().getHours();return e>=7&&e<19?"07:00-19:00":"19:00-07:00"};var c=r(77841),u=r(75535),m=r(9141);let g={fire:async e=>(console.log("SweetAlert2 polyfill fire:",e),{isConfirmed:!0,isDismissed:!1,isDenied:!1,value:!0})};var f=r(43210);r(17383);let h=({isOpen:e,onClose:t,ward:r,date:s,shift:n})=>e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:t}),(0,a.jsx)("div",{className:"fixed inset-x-0 bottom-0 z-10 transform transition-transform duration-300 ease-in-out",children:(0,a.jsxs)("div",{className:"bg-white rounded-t-2xl shadow-xl max-h-[90vh] overflow-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white z-10 px-4 py-3 border-b flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"ประวัติการอนุมัติ"}),(0,a.jsx)("button",{onClick:t,className:"p-1 rounded-full hover:bg-gray-100",children:"✕"})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"แผนก:"})," ",r?.name||"-"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"วันที่:"})," ",s?.toLocaleDateString("th-TH")||"-"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"กะ:"})," ",n||"-"]})]}),(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"ไม่พบประวัติการอนุมัติ"})})]})]})})]}):null,x=({selectedWard:e,...t})=>{let{user:r}=(0,d.A)(),{theme:x}=(0,i.DP)(),[p,b]=(0,f.useState)(!0),[y,w]=(0,f.useState)(null),[v,N]=(0,f.useState)(!1),[j,D]=(0,f.useState)(new Date),[k,C]=(0,f.useState)(()=>{let e=o();return console.log("Initial shift set to:",e),e}),[S,$]=(0,f.useState)((0,l.Lg)()),[I,A]=(0,f.useState)(!1),[O,M]=(0,f.useState)([]),[B,E]=(0,f.useState)(null),[T,_]=(0,f.useState)(!1),[F,P]=(0,f.useState)(null),[R,W]=(0,f.useState)(null),[G,L]=(0,f.useState)(!1),[H,U]=(0,f.useState)(!1),[J,q]=(0,f.useState)(null),[z,K]=(0,f.useState)(!1),[Q,V]=(0,f.useState)(!1),[Y,X]=(0,f.useState)(!1),[Z,ee]=(0,f.useState)(null),[et,er]=(0,f.useState)({patientCensus:"",overallData:"",newAdmit:"",transferIn:"",referIn:"",transferOut:"",referOut:"",discharge:"",dead:"",rns:"",pns:"",nas:"",aides:"",studentNurses:"",notes:"",firstName:r?.firstName||"",lastName:r?.lastName||"",isDraft:!1}),[ea,es]=(0,f.useState)(!1);(0,f.useEffect)(()=>{let e=setTimeout(()=>{p&&(b(!1),w("การโหลดข้อมูลใช้เวลานานเกินไป กรุณาลองใหม่อีกครั้ง"))},15e3);return()=>clearTimeout(e)},[p]),(0,f.useEffect)(()=>{(async()=>{if(!e||!j){b(!1);return}b(!0),w(null);try{let t=await Promise.race([(0,s.Q$)(e),new Promise((e,t)=>setTimeout(()=>t(Error("Timeout")),1e4))]);M(t);let r=await (0,s.C9)(j,e);P(r),K("pending"===r),V("approved"===r);let a=await (0,s.rl)(j,e,k);a&&(er(a),ee(a),_(!1)),N(!0)}catch(e){console.error("Error initializing data:",e),w("Timeout"===e.message?"การโหลดข้อมูลใช้เวลานานเกินไป กรุณาลองใหม่อีกครั้ง":"เกิดข้อผิดพลาดในการโหลดข้อมูล กรุณาลองใหม่อีกครั้ง"),g.fire({title:"Error",text:"ไม่สามารถโหลดข้อมูลได้ กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonColor:"#0ab4ab",showConfirmButton:!0,confirmButtonText:"ลองใหม่"}).then(e=>{e.isConfirmed&&window.location.reload()})}finally{b(!1)}})()},[e,j,k,r]);let en=async t=>{try{b(!0),D(t),$((0,l.mI)(t));let a=await (0,s.C9)(t,e);P(a),K("pending"===a),V("approved"===a);let d=await (0,n.zO)(e,t),i=(0,c.A)(t,"yyyy-MM-dd"),f=(0,u.P)((0,u.rJ)(m.db,"wardDataFinal"),(0,u._M)("wardId","==",e),(0,u._M)("date","==",i)),h=await (0,u.GG)(f);if(h.empty){if(d){if(await ed()){if((await g.fire({title:"พบข้อมูลฉบับร่าง",html:`พบข้อมูลฉบับร่างของวันและ ward นี้<br>คุณต้องการดำเนินการอย่างไร?`,icon:"question",showDenyButton:!0,confirmButtonText:"ดึงข้อมูลฉบับร่าง",denyButtonText:"สร้างข้อมูลใหม่",confirmButtonColor:"#0ab4ab",denyButtonColor:"#d33"})).isConfirmed){let a=(0,c.A)(t,"yyyy-MM-dd"),s=k||o(),d=await (0,n.Bh)(r.uid,e,a,s);d&&(er(d),C(d.shift||o()),L(!0),X(!1),g.fire({title:"ดึงข้อมูลฉบับร่างสำเร็จ",text:"แสดงข้อมูลฉบับร่างล่าสุด คุณสามารถแก้ไขและบันทึกต่อได้",icon:"success",confirmButtonColor:"#0ab4ab"}))}else{let a=await (0,s.BL)(t,e);C(a?"19:00-07:00":o()),L(!1),X(!1),er({patientCensus:"",overallData:"",newAdmit:"",transferIn:"",referIn:"",transferOut:"",referOut:"",discharge:"",dead:"",rns:"",pns:"",nas:"",aides:"",studentNurses:"",notes:"",firstName:r?.firstName||"",lastName:r?.lastName||"",isDraft:!1})}}else{let a=await (0,s.BL)(t,e);C(a?"19:00-07:00":o()),X(!1),L(!1),er({patientCensus:"",overallData:"",newAdmit:"",transferIn:"",referIn:"",transferOut:"",referOut:"",discharge:"",dead:"",rns:"",pns:"",nas:"",aides:"",studentNurses:"",notes:"",firstName:r?.firstName||"",lastName:r?.lastName||"",isDraft:!1})}}}else{let a=await g.fire({title:"พบข้อมูลที่บันทึกไว้แล้ว",html:`มีข้อมูลของวันที่ ${(0,l.mI)(t)} ในระบบแล้ว<br>คุณต้องการดำเนินการอย่างไร?`,icon:"question",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"เรียกดูข้อมูลเดิม",denyButtonText:"บันทึกข้อมูลใหม่ทับ",cancelButtonText:"ยกเลิก",confirmButtonColor:"#0ab4ab",denyButtonColor:"#d33"});if(a.isConfirmed){let e=h.docs[0].data();er(e),C(e.shift||o());let t=["pending","rejected"].includes(e.approvalStatus);X(!t),g.fire({title:"ดึงข้อมูลสำเร็จ",text:t?"แสดงข้อมูลที่บันทึกไว้แล้ว คุณสามารถแก้ไขข้อมูลได้":"แสดงข้อมูลที่บันทึกไว้แล้ว (ข้อมูลนี้ถูกอนุมัติแล้ว ไม่สามารถแก้ไขได้)",icon:"success",confirmButtonColor:"#0ab4ab"})}else if(a.isDenied){let a=h.docs[0].data();if("approved"===a.approvalStatus){g.fire({title:"ไม่สามารถบันทึกทับได้",text:"ข้อมูลนี้ได้รับการอนุมัติแล้ว ไม่สามารถแก้ไขหรือบันทึกทับได้",icon:"error",confirmButtonColor:"#0ab4ab"}),X(!0),er(a),C(a.shift||o());return}er({patientCensus:"",overallData:"",newAdmit:"",transferIn:"",referIn:"",transferOut:"",referOut:"",discharge:"",dead:"",rns:"",pns:"",nas:"",aides:"",studentNurses:"",notes:"",firstName:r?.firstName||"",lastName:r?.lastName||"",isDraft:!1}),X(!1);let n=await (0,s.BL)(t,e);C(n?"19:00-07:00":o()),g.fire({title:"เริ่มต้นบันทึกข้อมูลใหม่",text:"คุณสามารถบันทึกข้อมูลใหม่เพื่อทับข้อมูลเดิมได้",icon:"info",confirmButtonColor:"#0ab4ab"})}}}catch(e){console.error("Error in handleLocalDateSelect:",e)}finally{b(!1)}},ed=async()=>{try{if(!r?.uid||!e)return!1;let t=(0,c.A)(j,"yyyy-MM-dd"),a=await (0,n.YB)(r.uid,e);return a&&a.some(e=>e.date===t&&(e.shift===k||!k))}catch(e){return console.error("Error checking drafts:",e),!1}},ei=async t=>{console.log(`Shift changed to ${t}`),C(t);try{let r=await (0,s.rl)(j,e,t);if(r){er(r);return}if("เช้า"===t){let r=await (0,s.hv)(e);if(r){let a={patientCensus:(0,s.fO)(r),rns:r.rns||"",pns:r.pns||"",nas:r.nas||"",aides:r.aides||"",studentNurses:r.studentNurses||"",newAdmit:"0",transferIn:"0",referIn:"0",transferOut:"0",referOut:"0",discharge:"0",dead:"0",notes:"",date:getUTCDateString(j),shift:t,wardId:e};er(a)}}else if("ดึก"===t){let r=await (0,s.rl)(j,e,"เช้า");if(r){let a={overallData:(0,s.fO)(r),rns:r.rns||"",pns:r.pns||"",nas:r.nas||"",aides:r.aides||"",studentNurses:r.studentNurses||"",newAdmit:"0",transferIn:"0",referIn:"0",transferOut:"0",referOut:"0",discharge:"0",dead:"0",notes:"",date:getUTCDateString(j),shift:t,wardId:e};er(a)}}}catch(e){console.error("Error in handleLocalShiftChange:",e)}},el=async()=>{try{let t=await (0,s.iu)(j,e,k);if(!t.canEdit){g.fire({icon:"error",title:"ไม่สามารถบันทึกได้",text:t.message});return}console.log("Submitting form:",et),r?.uid,new Date().toISOString(),g.fire({icon:"success",title:"บันทึกข้อมูลเรียบร้อย",text:"ข้อมูลได้รับการอนุมัติแล้ว"})}catch(e){console.error("Error submitting form:",e),g.fire({icon:"error",title:"เกิดข้อผิดพลาด",text:"ไม่สามารถบันทึกข้อมูลได้ กรุณาลองใหม่อีกครั้ง"})}};return y?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md w-full",children:[(0,a.jsx)("h2",{className:"text-red-700 text-xl font-semibold mb-3",children:"เกิดข้อผิดพลาด"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:y}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-md",children:"ลองใหม่อีกครั้ง"})]})}):(0,a.jsx)("div",{className:"w-full max-w-7xl mx-auto",children:p?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"w-10 h-10 border-t-2 border-b-2 border-blue-500 rounded-full animate-spin"})}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"กำลังโหลดข้อมูล..."})]}):(0,a.jsxs)("div",{className:"space-y-6 p-4",children:[console.log("Debug - States:",{showForm:v,selectedWard:e,selectedDate:j,selectedShift:k,isLoading:p,formData:et}),v&&(0,a.jsx)(s.vK,{isLoading:p,selectedDate:j,selectedShift:k,selectedWard:e,formData:et,setFormData:er,handleLocalDateSelect:en,handleShiftChange:ei,thaiDate:S,setThaiDate:$,showCalendar:I,setShowCalendar:A,datesWithData:O,theme:x,approvalStatus:F,setHasUnsavedChanges:_,onSaveDraft:()=>{console.log("Save Draft clicked"),g.fire({title:"บันทึกฉบับร่าง",text:"ระบบกำลังพัฒนา ยังไม่สามารถบันทึกฉบับร่างได้ในขณะนี้",icon:"info",confirmButtonColor:"#0ab4ab"})},onSubmit:el,isSubmitting:H,isDraftMode:G}),(0,a.jsx)(h,{isOpen:ea,onClose:()=>es(!1),wardId:e,date:j,shift:k}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Debug Info:"}),(0,a.jsxs)("p",{children:["showForm: ",v?"true":"false"]}),(0,a.jsxs)("p",{children:["selectedWard: ",e?JSON.stringify(e):"ไม่มี"]}),(0,a.jsxs)("p",{children:["selectedShift: ",k]}),(0,a.jsxs)("p",{children:["isLoading: ",p?"true":"false"]})]})]})})}},89259:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(60687);r(43210);let s=({selectedShift:e,onShiftChange:t,variant:r="form",theme:s="light"})=>{let n=e=>{"function"==typeof t?t(e):console.warn("onShiftChange is not a function in ShiftSelection")};return(0,a.jsx)("div",{className:`${"dark"===s?"bg-gray-800/60 shadow-gray-900 border border-gray-700":"bg-white/60 shadow-gray-200"} backdrop-blur-sm rounded-xl p-3 shadow-sm hover:shadow-md transition-all`,children:(0,a.jsx)("div",{className:"flex flex-col md:flex-row justify-center gap-4",children:("dashboard"===r?[{id:"all",label:"ทั้งวัน",value:"all"},{id:"morning",label:"กะเช้า",value:"07:00-19:00"},{id:"night",label:"กะดึก",value:"19:00-07:00"}]:[{id:"morning",label:"กะเช้า",value:"07:00-19:00"},{id:"night",label:"กะดึก",value:"19:00-07:00"}]).map(({id:t,label:r,value:d})=>(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("label",{className:"relative flex items-center gap-2 cursor-pointer group",children:[(0,a.jsx)("input",{type:"radio",name:"shift",value:d,checked:e===d,onChange:()=>n(d),className:"hidden"}),(0,a.jsx)("div",{className:`w-5 h-5 rounded-full border-2 transition-all ${e===d?"border-[#0ab4ab] bg-[#0ab4ab]":"dark"===s?"border-gray-500 group-hover:border-[#0ab4ab]/70":"border-gray-300 group-hover:border-[#0ab4ab]/50"}`,children:e===d&&(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full m-auto mt-0.5"})}),(0,a.jsxs)("span",{className:`text-sm transition-colors ${e===d?"text-[#0ab4ab] font-medium":"dark"===s?"text-gray-200":"text-gray-600"}`,children:[r,(0,a.jsxs)("span",{className:"dark"===s?"text-gray-400":"text-gray-500",children:["(",d,")"]})]})]})},t))})})}},92282:(e,t,r)=>{r.d(t,{vK:()=>C,fO:()=>f,C9:()=>c,iu:()=>x,BL:()=>m,Ay:()=>I.A,Q$:()=>l,hv:()=>h,rl:()=>u});var a=r(60687),s=r(75535),n=r(9141),d=r(39245);let i=new Map,l=async e=>{try{if(!e)return console.warn("fetchDatesWithData: selectedWard is undefined or null"),[];let t=(0,s.P)((0,s.rJ)(n.db,"wardDailyRecords"),(0,s._M)("wardId","==",e)),r=await (0,s.GG)(t),a=[];return r.forEach(e=>{let t=e.data();if(t.date){let e=new Date(t.date);isNaN(e.getTime())||a.push(e)}}),a}catch(e){return console.error("Error fetching dates with data:",e),[]}},o=async(e,t,r=null)=>{try{let a;if(!t)return console.warn("fetchApprovalData: targetWard is undefined or null"),null;let i=(0,d.Ol)(new Date(e));a=r?(0,s.P)((0,s.rJ)(n.db,"wardDailyRecords"),(0,s._M)("wardId","==",t),(0,s._M)("date","==",i),(0,s._M)("shift","==",r)):(0,s.P)((0,s.rJ)(n.db,"wardDailyRecords"),(0,s._M)("wardId","==",t),(0,s._M)("date","==",i));let l=await (0,s.GG)(a);if(l.empty)return null;if(r){if(!l.empty){let e=l.docs[0],t=e.data();return{id:e.id,recorded:!0,approved:t.isApproved||!1,approvedBy:t.approvedBy,approvedAt:t.approvedAt,isDraft:t.isDraft||!1}}return null}let o={};return l.forEach(e=>{let t=e.data();o[t.shift]={id:e.id,recorded:!0,approved:t.isApproved||!1,approvedBy:t.approvedBy,approvedAt:t.approvedAt,isDraft:t.isDraft||!1}}),o}catch(e){return console.error("Error fetching approval data:",e),null}},c=async(e,t,r=null)=>{try{let a=await o(e,t,r);if(!a)return{status:"not_recorded",message:"ยังไม่มีการบันทึกข้อมูล"};if(r){if(a.isDraft)return{status:"draft",message:"อยู่ในสถานะฉบับร่าง"};if(a.approved)return{status:"approved",message:"ได้รับการอนุมัติแล้ว",approvedBy:a.approvedBy,approvedAt:a.approvedAt};return{status:"pending_approval",message:"รอการอนุมัติ"}}let s={};return["เช้า","ดึก"].forEach(e=>{a[e]?a[e].isDraft?s[e]={status:"draft",message:"อยู่ในสถานะฉบับร่าง"}:a[e].approved?s[e]={status:"approved",message:"ได้รับการอนุมัติแล้ว",approvedBy:a[e].approvedBy,approvedAt:a[e].approvedAt}:s[e]={status:"pending_approval",message:"รอการอนุมัติ"}:s[e]={status:"not_recorded",message:"ยังไม่มีการบันทึกข้อมูล"}}),s}catch(e){return console.error("Error checking approval status:",e),{status:"error",message:"เกิดข้อผิดพลาดในการตรวจสอบสถานะ"}}},u=async(e,t,r)=>{console.log("fetchWardData called with:",{date:e,selectedWard:t,selectedShift:r});try{if(!e||!t||!r)return console.warn("fetchWardData: Missing required parameters",{date:e,selectedWard:t,selectedShift:r}),null;let a=new Date(e),l=(0,d.Ol)(a),o=`${l}_${t}_${r}`,c=i.get(o);if(c&&Date.now()-c.timestamp<6e4)return console.log("Returning cached data for:",o),c.data;console.log("Fetching ward data from Firestore:",{dateString:l,selectedWard:t,selectedShift:r});try{let e=(0,s.P)((0,s.rJ)(n.db,"wardDailyRecords"),(0,s._M)("date","==",l),(0,s._M)("wardId","==",t),(0,s._M)("shift","==",r)),a=await (0,s.GG)(e);if(a.empty)return console.log(`No data found for ${t} on ${l}, shift: ${r}`),null;let d=a.docs[0],c=d.data(),u={id:d.id,patientCensus:c.patientCensus||"",overallData:c.overallData||"",newAdmit:c.newAdmit||"",transferIn:c.transferIn||"",referIn:c.referIn||"",transferOut:c.transferOut||"",referOut:c.referOut||"",discharge:c.discharge||"",dead:c.dead||"",rns:c.rns||"",pns:c.pns||"",nas:c.nas||"",aides:c.aides||"",studentNurses:c.studentNurses||"",notes:c.notes||"",date:c.date,shift:c.shift,wardId:c.wardId,isApproved:c.isApproved||!1,approvedBy:c.approvedBy||null,approvalDate:c.approvalDate||null,firstName:c.firstName||"",lastName:c.lastName||"",isDraft:c.isDraft||!1};return i.set(o,{data:u,timestamp:Date.now()}),u}catch(e){if("failed-precondition"===e.code&&e.message&&e.message.includes("index")){console.warn("Index error encountered, trying alternative query...");try{return await g(l,t,r)}catch(e){return console.error("Fallback query also failed:",e),null}}throw e}}catch(e){return console.error("Error fetching ward data:",e),null}},m=async(e,t)=>{try{if(!e||!t)return console.error("checkMorningShiftDataExists: Missing required parameters",{date:e,wardId:t}),!1;let r=new Date(e),a=(0,d.Ol)(r),i=(0,s.P)((0,s.rJ)(n.db,"wardDailyRecords"),(0,s._M)("wardId","==",t),(0,s._M)("date","==",a),(0,s._M)("shift","==","เช้า"));return!(await (0,s.GG)(i)).empty}catch(e){return console.error("Error checking morning shift data:",e),!1}},g=async(e,t,r)=>{try{let a=(0,s.P)((0,s.rJ)(n.db,"wardDailyRecords"),(0,s._M)("wardId","==",t)),d=await (0,s.GG)(a);if(d.empty)return null;let i=null;if(d.forEach(t=>{let a=t.data();a.date===e&&a.shift===r&&(i={id:t.id,...a})}),!i)return null;return{id:i.id,patientCensus:i.patientCensus||"",overallData:i.overallData||"",newAdmit:i.newAdmit||"",transferIn:i.transferIn||"",referIn:i.referIn||"",transferOut:i.transferOut||"",referOut:i.referOut||"",discharge:i.discharge||"",dead:i.dead||"",rns:i.rns||"",pns:i.pns||"",nas:i.nas||"",aides:i.aides||"",studentNurses:i.studentNurses||"",notes:i.notes||"",date:i.date,shift:i.shift,wardId:i.wardId,isApproved:i.isApproved||!1,approvedBy:i.approvedBy||null,approvalDate:i.approvalDate||null,firstName:i.firstName||"",lastName:i.lastName||"",isDraft:i.isDraft||!1}}catch(e){return console.error("Error in safeFetchWardData:",e),null}},f=e=>{if(!e)return"0";let t=parseInt(e.newAdmit||"0"),r=parseInt(e.transferIn||"0"),a=parseInt(e.referIn||"0"),s=parseInt(e.transferOut||"0"),n=parseInt(e.referOut||"0");return String(t+r+a-(s+n+parseInt(e.discharge||"0")+parseInt(e.dead||"0")))},h=async e=>{try{if(!e)return null;let t=(0,s.P)((0,s.rJ)(n.db,"wardDailyRecords"),(0,s._M)("wardId","==",e)),r=await (0,s.GG)(t);if(r.empty)return null;let a=new Date;a.setDate(a.getDate()-7);let i=(0,d.Ol)(a),l=[];return r.forEach(e=>{let t=e.data();t.date>=i&&l.push({id:e.id,...t})}),l.sort((e,t)=>t.date.localeCompare(e.date)),l.length>0?l[0]:null}catch(e){return console.error("Error fetching last 7 days data:",e),null}},x=async(e,t,r)=>{try{let a=await checkApprovalStatus(e,t,r);if(a&&"approved"===a.status)return{canEdit:!1,message:"ข้อมูลนี้ได้รับการอนุมัติแล้ว ไม่สามารถแก้ไขได้"};return{canEdit:!0}}catch(e){return console.error("Error checking final approval status:",e),{canEdit:!0}}};var p=r(43210);r(1923);var b=r(36006),y=r(14188),w=r(89259);let v=({selectedDate:e,onDateSelect:t,onDateChange:r,datesWithData:s=[],showCalendar:n,setShowCalendar:d,thaiDate:i,selectedShift:l,onShiftChange:o,theme:c="light"})=>{let[u,m]=(0,p.useState)(new Date),[g,f]=(0,p.useState)(!1);(0,p.useEffect)(()=>{let e=setInterval(()=>{m(new Date)},1e3);return()=>clearInterval(e)},[]);let h="function"==typeof d?d:e=>{"function"==typeof d?d(e):(f(e),console.warn("Using local state for showCalendar in FormDateShiftSelector"))};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(y.A,{selectedDate:e,onDateSelect:e=>{"function"==typeof t?t(e):"function"==typeof r?(r(e),console.warn("Using onDateChange instead of onDateSelect in FormDateShiftSelector")):console.warn("Neither onDateSelect nor onDateChange is a function in FormDateShiftSelector")},datesWithData:s,showCalendar:void 0!==n?n:g,setShowCalendar:h,thaiDate:i,theme:c})}),(0,a.jsxs)("div",{className:`ml-4 p-3 rounded-lg ${"dark"===c?"bg-gray-800 text-white border border-gray-700":"bg-red-100 text-red-800 border border-red-200"}`,children:[(0,a.jsx)("div",{className:"text-center font-medium mb-1",children:"เวลาปัจจุบัน"}),(0,a.jsx)("div",{className:"text-xl font-bold",children:u.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),(0,a.jsx)("div",{className:"text-xs mt-1 opacity-80",children:u.getHours()>=7&&19>u.getHours()?"อยู่ในช่วงกะเช้า (07:00-19:00)":"อยู่ในช่วงกะดึก (19:00-07:00)"})]})]}),(0,a.jsxs)("div",{className:`${"dark"===c?"bg-gray-800/70 border border-gray-700 hover:bg-gray-700/80":"bg-white/60 hover:shadow-md"} backdrop-blur-sm rounded-xl p-4 shadow-sm transition-all`,children:[(0,a.jsxs)("div",{className:`mb-2 font-medium ${"dark"===c?"text-gray-100":"text-gray-700"}`,children:["กะทำงาน ",(0,a.jsx)("span",{className:"text-[#0ab4ab]",children:"*"})]}),(0,a.jsx)(w.A,{selectedShift:l,onShiftChange:e=>{"function"==typeof o?o(e):console.warn("onShiftChange is not a function in FormDateShiftSelector")},variant:"form",theme:c}),(0,a.jsx)("div",{className:`text-xs mt-2 ${"dark"===c?"text-gray-400":"text-gray-500"}`,children:"การเปลี่ยนกะจะทำให้ข้อมูลที่ยังไม่ได้บันทึกหายไป กรุณาบันทึกข้อมูลก่อนเปลี่ยนกะ"})]})]})};var N=r(17383);let j=({formData:e,setFormData:t,setHasUnsavedChanges:r,selectedShift:s,theme:n})=>{let d=e=>{if(!e)return"";let t=e=>{if(""===e||null==e)return 0;let t=parseInt(e,10);return isNaN(t)?0:t},r=t(e.newAdmit),a=t(e.transferIn),s=t(e.referIn),n=t(e.transferOut),d=t(e.referOut);return r+a+s-n-d-t(e.discharge)-t(e.dead)},i=e=>{let a=e.target.value.replace(/[^0-9]/g,""),s=e.target.name;t(e=>{let t={...e,[s]:a};if(["newAdmit","transferIn","referIn","transferOut","referOut","discharge","dead"].includes(s)){let e=d(t),r=parseInt(t.patientCensus)||0;t.overallData=(r+e).toString()}return t}),r&&r(!0)};return(0,p.useEffect)(()=>{if(e&&e.shift){let r=d(e);"เช้า"===e.shift?t(e=>({...e,patientCensus:r})):t(e=>({...e,overallData:r}))}},[e?.newAdmit,e?.transferIn,e?.referIn,e?.transferOut,e?.referOut,e?.discharge,e?.dead]),(0,a.jsxs)("div",{className:`mb-6 p-4 rounded-lg shadow-md ${"dark"===n?"bg-gray-700 text-white":"bg-primary-pastel"}`,children:[(0,a.jsx)("h2",{className:`text-xl font-semibold mb-4 ${"dark"===n?"text-white":"text-primary"}`,children:"Number of patients and movement"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:["Patient Census ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"patientCensus",value:e?.patientCensus||"",onChange:e=>{let a=e.target.value.replace(/[^0-9]/g,"");t(e=>({...e,patientCensus:a})),r&&r(!0)},className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-gray-100 border-primary-light text-gray-900"}`,readOnly:!0,inputMode:"numeric",pattern:"[0-9]*"}),"ดึก"===s&&(0,a.jsx)("p",{className:`text-xs mt-1 ${"dark"===n?"text-gray-300":"text-gray-500"}`,children:"*ค่านี้จะถูกคำนวณจากกะเช้าและไม่สามารถแก้ไขได้"}),"เช้า"===s&&(0,a.jsx)("p",{className:`text-xs mt-1 ${"dark"===n?"text-gray-300":"text-gray-500"}`,children:"*คำนวณอัตโนมัติจาก Overall Data ของกะดึกวันก่อนหน้า ไม่สามารถแก้ไขได้"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:["Overall Data ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"overallData",value:e?.overallData||"",className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-gray-100 border-primary-light text-gray-900"}`,readOnly:!0,inputMode:"numeric",pattern:"[0-9]*"}),(0,a.jsx)("p",{className:`text-xs mt-1 ${"dark"===n?"text-gray-300":"text-gray-500"}`,children:"*คำนวณตามสูตร: Patient Census + (New Admit + Transfer In + Refer In - Transfer Out - Refer Out - Discharge - Dead)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"New Admit"}),(0,a.jsx)("input",{type:"text",name:"newAdmit",value:e?.newAdmit||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Transfer In"}),(0,a.jsx)("input",{type:"text",name:"transferIn",value:e?.transferIn||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Refer In"}),(0,a.jsx)("input",{type:"text",name:"referIn",value:e?.referIn||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Transfer Out"}),(0,a.jsx)("input",{type:"text",name:"transferOut",value:e?.transferOut||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Refer Out"}),(0,a.jsx)("input",{type:"text",name:"referOut",value:e?.referOut||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Discharge"}),(0,a.jsx)("input",{type:"text",name:"discharge",value:e?.discharge||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Dead"}),(0,a.jsx)("input",{type:"text",name:"dead",value:e?.dead||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Available"}),(0,a.jsx)("input",{type:"text",name:"availableBeds",value:e?.availableBeds||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Unavailable"}),(0,a.jsx)("input",{type:"text",name:"unavailable",value:e?.unavailable||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===n?"text-gray-200":"text-gray-700"}`,children:"Planned Discharge"}),(0,a.jsx)("input",{type:"text",name:"plannedDischarge",value:e?.plannedDischarge||"",onChange:i,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===n?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]})]})]})},D=({formData:e,setFormData:t,setHasUnsavedChanges:r,theme:s})=>{let n=e=>{let a=e.target.value.replace(/[^0-9]/g,""),s=e.target.name;t(e=>({...e,[s]:a})),r&&r(!0)};return(0,a.jsxs)("div",{className:`mb-6 p-4 rounded-lg shadow-md ${"dark"===s?"bg-gray-700 text-white":"bg-white"}`,children:[(0,a.jsx)("h2",{className:`text-xl font-semibold mb-4 ${"dark"===s?"text-white":"text-primary"}`,children:"Number of Personnel"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===s?"text-gray-200":"text-gray-700"}`,children:"Nurse Manager"}),(0,a.jsx)("input",{type:"text",name:"nurseManager",value:e?.nurseManager||"",onChange:n,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===s?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===s?"text-gray-200":"text-gray-700"}`,children:"RN"}),(0,a.jsx)("input",{type:"text",name:"RN",value:e?.RN||"",onChange:n,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===s?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===s?"text-gray-200":"text-gray-700"}`,children:"PN"}),(0,a.jsx)("input",{type:"text",name:"PN",value:e?.PN||"",onChange:n,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===s?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===s?"text-gray-200":"text-gray-700"}`,children:"WC"}),(0,a.jsx)("input",{type:"text",name:"WC",value:e?.WC||"",onChange:n,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===s?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===s?"text-gray-200":"text-gray-700"}`,children:"NA"}),(0,a.jsx)("input",{type:"text",name:"NA",value:e?.NA||"",onChange:n,className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===s?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,pattern:"[0-9]*",inputMode:"numeric"})]})]})]})},k=({formData:e,setFormData:t,setHasUnsavedChanges:r,theme:s})=>(0,a.jsxs)("div",{className:`mb-6 p-4 rounded-lg shadow-md ${"dark"===s?"bg-gray-700 text-white":"bg-white"}`,children:[(0,a.jsx)("h2",{className:`text-xl font-semibold mb-4 ${"dark"===s?"text-white":"text-primary"}`,children:"Comment"}),(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{name:"comment",value:e?.comment||"",onChange:e=>{t(t=>({...t,comment:e.target.value})),r(!0)},className:`w-full p-2 border rounded focus:ring-2 focus:ring-primary focus:border-transparent ${"dark"===s?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,rows:"3",placeholder:"Add comment..."})})]}),C=({isLoading:e,selectedDate:t,selectedShift:r,selectedWard:s,formData:n,setFormData:d,handleLocalDateSelect:i,handleShiftChange:l,thaiDate:o,setThaiDate:c,showCalendar:u,setShowCalendar:m,datesWithData:g,theme:f,approvalStatus:h,setHasUnsavedChanges:x,onSaveDraft:p,onSubmit:y,isSubmitting:w,isDraftMode:C})=>(0,a.jsxs)("div",{className:"container mx-auto max-w-4xl p-4",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(v,{selectedDate:t,onDateSelect:i,thaiDate:o,setThaiDate:c,selectedShift:"เช้า"===r?"07:00-19:00":"19:00-07:00",onShiftChange:e=>{"function"==typeof l?l("07:00-19:00"===e?"เช้า":"ดึก"):console.warn("handleShiftChange is not a function in MainFormContent")},showCalendar:u,setShowCalendar:m,datesWithData:g,theme:f}),h&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(N.A,{status:h,theme:f})})]}),(0,a.jsx)("div",{className:"space-y-8",children:e?(0,a.jsx)(b.A,{}):t&&r?(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y()},className:"space-y-6",children:[C&&(0,a.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4 rounded-md",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,a.jsx)("span",{className:"font-medium",children:"โหมดฉบับร่าง:"})," คุณกำลังแก้ไขข้อมูลในโหมดฉบับร่าง กรุณาบันทึกข้อมูลฉบับสมบูรณ์เมื่อกรอกข้อมูลครบถ้วน"]})})]})}),(0,a.jsxs)("div",{className:`p-6 rounded-lg shadow-md border ${C?"bg-yellow-50 border-yellow-200":"dark"===f?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200"}`,children:[(0,a.jsx)(j,{formData:n,setFormData:d,setHasUnsavedChanges:x,selectedShift:r,theme:f}),(0,a.jsx)(D,{formData:n,setFormData:d,setHasUnsavedChanges:x,theme:f}),(0,a.jsx)(k,{formData:n,setFormData:d,setHasUnsavedChanges:x,theme:f}),(0,a.jsx)(S,{formData:n,setFormData:d,setHasUnsavedChanges:x,theme:f}),(0,a.jsx)($,{onSaveDraft:p,isSubmitting:w})]})]}):(0,a.jsxs)("div",{className:`flex flex-col items-center justify-center p-6 ${"dark"===f?"bg-gray-800 border-gray-700":"bg-gradient-to-r from-teal-50 to-blue-50 border-teal-100"} rounded-lg shadow-md border`,children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:`text-2xl font-bold mb-2 ${"dark"===f?"text-teal-300":"text-teal-700"}`,children:"กรุณาเลือกข้อมูลเริ่มต้น"}),(0,a.jsx)("p",{className:"dark"===f?"text-gray-300":"text-gray-600",children:"โปรดเลือกวันที่และกะก่อนเริ่มกรอกข้อมูล"})]}),(0,a.jsx)("div",{className:`w-full max-w-md p-6 rounded-xl shadow-lg border ${"dark"===f?"bg-gray-800 border-gray-700":"bg-white border-teal-200"}`,children:(0,a.jsx)(v,{selectedDate:t,onDateSelect:i,thaiDate:o,setThaiDate:c,selectedShift:"เช้า"===r?"07:00-19:00":"19:00-07:00",onShiftChange:e=>{"function"==typeof l?l("07:00-19:00"===e?"เช้า":"ดึก"):console.warn("handleShiftChange is not a function in MainFormContent")},showCalendar:u,setShowCalendar:m,datesWithData:g,theme:f})})]})})]}),S=({formData:e,setFormData:t,setHasUnsavedChanges:r,theme:s})=>(0,a.jsxs)("div",{className:`mb-6 p-4 rounded-lg shadow-md ${"dark"===s?"bg-gray-700 text-white":"bg-white"}`,children:[(0,a.jsxs)("h3",{className:`text-lg font-semibold mb-4 ${"dark"===s?"text-white":"text-gray-800"}`,children:["Recording Officer ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:`block text-sm font-medium mb-1 ${"dark"===s?"text-gray-200":"text-gray-700"}`,children:["first name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"firstName",value:e.firstName||"",onChange:e=>{t(t=>({...t,firstName:e.target.value})),r(!0)},className:`w-full p-2 border rounded-md ${"dark"===s?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:`block text-sm font-medium mb-1 ${"dark"===s?"text-gray-200":"text-gray-700"}`,children:["last name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"lastName",value:e.lastName||"",onChange:e=>{t(t=>({...t,lastName:e.target.value})),r(!0)},className:`w-full p-2 border rounded-md ${"dark"===s?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]})]})]}),$=({onSaveDraft:e,isSubmitting:t})=>(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[(0,a.jsx)("button",{type:"button",onClick:e,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition",disabled:t,children:t?"กำลังบันทึก...":"Save Draft"}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition",disabled:t,children:t?"กำลังบันทึก...":"Save Final"})]});var I=r(30771)}};