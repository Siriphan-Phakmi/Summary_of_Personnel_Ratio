(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{439:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(5155),a=t(2115),n=t(5695),i=t(936),l=t(2808);function o(){let{user:e,loading:s,isAuthenticated:t}=(0,l.A)(),o=(0,n.useRouter)();return(0,a.useEffect)(()=>{if(s||t){if(!s&&t&&e){var r;let s=(null===(r=e.role)||void 0===r?void 0:r.toLowerCase())||"user";"admin"===s||"approver"===s?(console.log("Redirecting admin/approver to approval page..."),o.push("/page/approval/")):(console.log("Redirecting user to ward-form page..."),o.push("/page/ward-form/"))}}else o.push("/page/login/")},[s,t,o,e]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(i.A,{})})}t(9092)},936:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var r=t(5155),a=t(8637),n=t.n(a);let i=e=>{let{fullScreen:s=!1}=e,t=(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0ab4ab]"}),(0,r.jsx)("p",{className:"text-gray-600",children:"กำลังโหลดข้อมูล..."})]});return s?(0,r.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-80 z-50 flex items-center justify-center",children:t}):(0,r.jsx)("div",{className:"flex items-center justify-center p-8",children:t})};i.propTypes={fullScreen:n().bool};let l=i},2948:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4613:(e,s,t)=>{"use strict";t.d(s,{h:()=>r});let r="v.2.3.3.2025"},4776:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(5155);t(2115);var a=t(6766);let n=()=>(0,r.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-white via-blue-50 to-[#0ab4ab]/10 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white/80 p-8 rounded-2xl shadow-xl backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,r.jsx)(a.default,{src:"/images/BPK.jpg",alt:"BPK Loading",fill:!0,style:{objectFit:"contain"},className:"animate-pulse rounded-lg",priority:!0})}),(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0ab4ab] mb-3"}),(0,r.jsx)("p",{className:"text-gray-600 font-medium",children:"กำลังโหลดข้อมูล..."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"โปรดรอสักครู่"})]})]})})})},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},7587:(e,s,t)=>{Promise.resolve().then(t.bind(t,439))},8637:(e,s,t)=>{e.exports=t(9399)()},9092:(e,s,t)=>{"use strict";t.d(s,{A:()=>u});var r=t(5155),a=t(2115),n=t(5695),i=t(2808),l=t(7775),o=t(4776),c=t(4613),d=t(9770);function u(e){let{children:s,title:t,requiredRole:u="user",infoBox:m}=e,{user:p,loading:x,isAuthenticated:h}=(0,i.A)(),f=(0,n.useRouter)(),[b,g]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{x||h||f.push("/login"),p&&p.role&&("admin"===p.role.toLowerCase()?g(!0):"user"===u?g(!0):p.role.toLowerCase()===u.toLowerCase()?g(!0):(g(!1),(0,d.$s)("unauthorized_access_attempt",{userRole:p.role,requiredRole:u,page:t})))},[x,h,f,p,u,t]),x)?(0,r.jsx)(o.A,{}):h?b?(0,r.jsx)(l.A,{requiredRole:u,children:(0,r.jsxs)("div",{className:"min-h-screen pb-16 relative",children:[(0,r.jsxs)("main",{className:"container mx-auto px-4 pt-20",children:[t&&(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:t}),m&&(0,r.jsx)("div",{className:"mb-6",children:m}),s]}),(0,r.jsx)("div",{className:"fixed bottom-4 right-4 text-sm text-gray-500",children:c.h})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsx)("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"ไม่มีสิทธิ์เข้าถึง"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"คุณไม่มีสิทธิ์เพียงพอในการเข้าถึงหน้านี้ กรุณาติดต่อผู้ดูแลระบบหากคุณเชื่อว่านี่เป็นข้อผิดพลาด"}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>f.push("/"),children:"กลับไปยังหน้าหลัก"})})]})})}):null}},9399:(e,s,t)=>{"use strict";var r=t(2948);function a(){}function n(){}n.resetWarningCache=a,e.exports=function(){function e(e,s,t,a,n,i){if(i!==r){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function s(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:a};return t.PropTypes=t,t}}},e=>{var s=s=>e(e.s=s);e.O(0,[932,766,775,315,358],()=>s(7587)),_N_E=e.O()}]);