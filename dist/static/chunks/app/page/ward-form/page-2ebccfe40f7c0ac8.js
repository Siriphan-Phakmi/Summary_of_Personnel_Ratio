(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{3979:(e,r,t)=>{"use strict";t.d(r,{Se:()=>a});let a=()=>{let e=new Date().getHours();return e>=7&&e<19?"07:00-19:00":"19:00-07:00"}},4822:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var a=t(5155),s=t(6660),n=t(8382);let i=e=>{let{selectedDate:r,onDateSelect:t,datesWithData:i=[],showCalendar:l,setShowCalendar:d,thaiDate:o,variant:u="form"}=e;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-3 shadow-sm hover:shadow-md transition-all",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>d(!l),className:"w-full md:w-auto px-4 py-2 bg-gradient-to-r from-[#0ab4ab] to-blue-500 text-white rounded-lg hover:from-[#0ab4ab]/90 hover:to-blue-600 transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-[#0ab4ab] focus:ring-opacity-50 shadow-md text-sm",children:l?"ซ่อนปฏิทิน":"เลือกวันที่"}),(0,a.jsxs)("div",{className:"text-gray-700 space-y-0.5 text-center md:text-left text-sm",children:[(0,a.jsxs)("div",{className:"font-medium text-[#0ab4ab]",children:["วันที่ปัจจุบัน : ",(0,s.mI)(new Date)]}),(0,a.jsxs)("div",{className:"text-blue-600",children:["วันที่เลือก : ",o]})]})]})}),l&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"relative bg-white rounded-2xl shadow-2xl transform transition-all",children:(0,a.jsx)(n.A,{selectedDate:r,onDateSelect:t,onClickOutside:()=>d(!1),datesWithData:i,variant:u})})})]})}},4875:(e,r,t)=>{"use strict";t(5155)},6701:(e,r,t)=>{Promise.resolve().then(t.bind(t,8644))},8644:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>k});var a=t(5155),s=t(2115),n=t(4197),i=t(5112),l=t(4776),d=t(650),o=t(6660),u=t(3979);t(8382),t(4822),t(4875);var c=t(2808);t(9770);var m=t(3932);let f=async e=>{try{if(!e)return console.warn("fetchDatesWithData: selectedWard is undefined or null"),[];let r=(0,i.P)((0,i.rJ)(n.db,"wardDailyRecords"),(0,i._M)("wardId","==",e)),t=await (0,i.GG)(r),a=[];return t.forEach(e=>{let r=e.data();if(r.date){let e=new Date(r.date);isNaN(e.getTime())||a.push(e)}}),a}catch(e){return console.error("Error fetching dates with data:",e),[]}},p=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let a;if(!r)return console.warn("fetchApprovalData: targetWard is undefined or null"),null;let s=(0,o.Ol)(new Date(e));a=t?(0,i.P)((0,i.rJ)(n.db,"wardDailyRecords"),(0,i._M)("wardId","==",r),(0,i._M)("date","==",s),(0,i._M)("shift","==",t)):(0,i.P)((0,i.rJ)(n.db,"wardDailyRecords"),(0,i._M)("wardId","==",r),(0,i._M)("date","==",s));let l=await (0,i.GG)(a);if(l.empty)return null;if(t){if(!l.empty){let e=l.docs[0],r=e.data();return{id:e.id,recorded:!0,approved:r.isApproved||!1,approvedBy:r.approvedBy,approvedAt:r.approvedAt,isDraft:r.isDraft||!1}}return null}let d={};return l.forEach(e=>{let r=e.data();d[r.shift]={id:e.id,recorded:!0,approved:r.isApproved||!1,approvedBy:r.approvedBy,approvedAt:r.approvedAt,isDraft:r.isDraft||!1}}),d}catch(e){return console.error("Error fetching approval data:",e),null}},g=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let a=await p(e,r,t);if(!a)return{status:"not_recorded",message:"ยังไม่มีการบันทึกข้อมูล"};if(t){if(a.isDraft)return{status:"draft",message:"อยู่ในสถานะฉบับร่าง"};if(a.approved)return{status:"approved",message:"ได้รับการอนุมัติแล้ว",approvedBy:a.approvedBy,approvedAt:a.approvedAt};return{status:"pending_approval",message:"รอการอนุมัติ"}}let s={};return["เช้า","ดึก"].forEach(e=>{a[e]?a[e].isDraft?s[e]={status:"draft",message:"อยู่ในสถานะฉบับร่าง"}:a[e].approved?s[e]={status:"approved",message:"ได้รับการอนุมัติแล้ว",approvedBy:a[e].approvedBy,approvedAt:a[e].approvedAt}:s[e]={status:"pending_approval",message:"รอการอนุมัติ"}:s[e]={status:"not_recorded",message:"ยังไม่มีการบันทึกข้อมูล"}}),s}catch(e){return console.error("Error checking approval status:",e),{status:"error",message:"เกิดข้อผิดพลาดในการตรวจสอบสถานะ"}}},h=async(e,r,t)=>{if(!e)return console.error("fetchWardData: date is required but got:",e),null;if(!r||""===r.trim())return console.error("fetchWardData: selectedWard is required but got:",r),null;if(!t||""===t.trim())return console.error("fetchWardData: selectedShift is required but got:",t),null;try{let a=(0,o.Ol)(new Date(e));console.log("Fetching ward data with query params:",{wardId:r,date:a,shift:t});let s=(0,i.P)((0,i.rJ)(n.db,"wardDailyRecords"),(0,i._M)("wardId","==",r),(0,i._M)("date","==",a),(0,i._M)("shift","==",t)),l=await (0,i.GG)(s);if(!l.empty){let e=l.docs[0],r=e.data();return{id:e.id,...r}}return null}catch(e){return console.error("Error fetching ward data:",e),null}},b=e=>{if(""===e||null==e)return"0";let r=parseInt(e,10);return isNaN(r)?"0":r.toString()},x=e=>{if(!e)return"0";let r=0,t=parseInt(e.patientCensus||"0",10),a=parseInt(e.newAdmit||"0",10),s=parseInt(e.transferIn||"0",10),n=parseInt(e.referIn||"0",10),i=parseInt(e.transferOut||"0",10),l=parseInt(e.referOut||"0",10),d=parseInt(e.discharge||"0",10),o=parseInt(e.dead||"0",10);return isNaN(t)||(r+=t),isNaN(a),isNaN(s),isNaN(n),isNaN(i),isNaN(l),isNaN(d),isNaN(o),r.toString()},v=async function(e,r,t,a,s,l){let d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"final";e&&e.preventDefault();try{let e=(0,o.Ol)(new Date(a)),u=x(r);if(!r.firstName||!r.lastName)return{success:!1,error:"กรุณากรอกชื่อและนามสกุลผู้บันทึกข้อมูล"};let c={wardId:t,date:e,shift:s,patientCensus:r.patientCensus||"0",overallData:r.overallData||"0",nurseManager:r.nurseManager||"0",RN:r.RN||"0",PN:r.PN||"0",WC:r.WC||"0",rns:r.rns||"0",pns:r.pns||"0",nas:r.nas||"0",aides:r.aides||"0",studentNurses:r.studentNurses||"0",newAdmit:r.newAdmit||"0",transferIn:r.transferIn||"0",referIn:r.referIn||"0",transferOut:r.transferOut||"0",referOut:r.referOut||"0",discharge:r.discharge||"0",dead:r.dead||"0",admissions:r.admissions||"0",discharges:r.discharges||"0",transfers:r.transfers||"0",deaths:r.deaths||"0",availableBeds:r.availableBeds||"0",unavailable:r.unavailable||"0",plannedDischarge:r.plannedDischarge||"0",notes:r.notes||"",comment:r.comment||"",firstName:r.firstName,lastName:r.lastName,createdBy:(null==l?void 0:l.displayName)||"Unknown",createdById:(null==l?void 0:l.uid)||"Unknown",department:(null==l?void 0:l.department)||"Unknown",timestamp:(0,i.O5)(),total:u,isDraft:"draft"===d,isApproved:!1,approvedBy:null,approvedAt:null,lastUpdatedAt:(0,i.O5)(),lastUpdatedBy:(null==l?void 0:l.displayName)||"Unknown",lastUpdatedById:(null==l?void 0:l.uid)||"Unknown"};if(r.id){let e=(0,i.H9)(n.db,"wardDailyRecords",r.id);if("final"===d){let r=await (0,i.x7)(e);if(r.exists()&&!r.data().isDraft&&r.data().isApproved)return{success:!1,error:"ไม่สามารถแก้ไขข้อมูลได้เนื่องจากมีการอนุมัติข้อมูลแล้ว"}}return await (0,i.mZ)(e,c),{success:!0,operation:"update",id:r.id}}{let e=await (0,i.gS)((0,i.rJ)(n.db,"wardDailyRecords"),c);return{success:!0,operation:"create",id:e.id}}}catch(e){return console.error("Error saving data:",e),{success:!1,error:e.message}}},N=(e,r,t,a)=>{let{name:s,value:n}=e.target,i="notes"!==s?b(n):n;t(e=>({...e,[s]:i})),a(!0)},y=e=>{let{formData:r,setFormData:t,setHasUnsavedChanges:s}=e;return(0,a.jsxs)("div",{className:"mb-6 p-4 bg-primary-pastel rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-primary",children:"จำนวนผู้ป่วย"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"จำนวนผู้ป่วยทั้งหมด"}),(0,a.jsx)("input",{type:"number",name:"patientCensus",value:r.patientCensus,onChange:e=>N(e,r,t,s),className:"w-full p-2 bg-white border border-primary-light rounded focus:ring-2 focus:ring-primary focus:border-transparent"})]})})]})},w=e=>{let{formData:r,setFormData:t,setHasUnsavedChanges:s}=e;return(0,a.jsxs)("div",{className:"mb-6 p-4 bg-info-pastel rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-primary",children:"การเคลื่อนไหวของผู้ป่วย"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"รับใหม่"}),(0,a.jsx)("input",{type:"number",name:"admissions",value:r.admissions,onChange:e=>N(e,r,t,s),className:"w-full p-2 bg-white border border-info-light rounded focus:ring-2 focus:ring-info focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"จำหน่าย"}),(0,a.jsx)("input",{type:"number",name:"discharges",value:r.discharges,onChange:e=>N(e,r,t,s),className:"w-full p-2 bg-white border border-info-light rounded focus:ring-2 focus:ring-info focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ย้ายแผนก"}),(0,a.jsx)("input",{type:"number",name:"transfers",value:r.transfers,onChange:e=>N(e,r,t,s),className:"w-full p-2 bg-white border border-info-light rounded focus:ring-2 focus:ring-info focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"เสียชีวิต"}),(0,a.jsx)("input",{type:"number",name:"deaths",value:r.deaths,onChange:e=>N(e,r,t,s),className:"w-full p-2 bg-white border border-info-light rounded focus:ring-2 focus:ring-info focus:border-transparent"})]})]})]})},j=e=>{let{formData:r,setFormData:t,setHasUnsavedChanges:s}=e;return(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-primary",children:"จำนวนบุคลากร"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RN"}),(0,a.jsx)("input",{type:"number",name:"rns",value:r.rns,onChange:e=>N(e,r,t,s),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PN"}),(0,a.jsx)("input",{type:"number",name:"pns",value:r.pns,onChange:e=>N(e,r,t,s),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NA"}),(0,a.jsx)("input",{type:"number",name:"nas",value:r.nas,onChange:e=>N(e,r,t,s),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ผู้ช่วย"}),(0,a.jsx)("input",{type:"number",name:"aides",value:r.aides,onChange:e=>N(e,r,t,s),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"นักศึกษาพยาบาล"}),(0,a.jsx)("input",{type:"number",name:"studentNurses",value:r.studentNurses,onChange:e=>N(e,r,t,s),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"})]})]})]})},D=e=>{let{formData:r,setFormData:t,setHasUnsavedChanges:s}=e;return(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-primary",children:"บันทึกเพิ่มเติม"}),(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{name:"notes",value:r.notes,onChange:e=>N(e,r,t,s),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent",rows:"3",placeholder:"บันทึกเพิ่มเติม..."})})]})},I=async(e,r,t)=>{if(!e||!r||"string"!=typeof r||""===r.trim()||!t)return console.error("safeFetchWardData: Invalid parameters",{date:e,ward:r,shift:t}),null;try{return await h(e,r,t)}catch(e){return console.error("Error in safeFetchWardData:",e),null}},C=e=>{let{shift:r}=e;return"เช้า"===r?(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1 mb-2 bg-gray-100 p-2 rounded",children:[(0,a.jsx)("p",{children:"สูตรคำนวณกะเช้า: ข้อมูล Overall Data จากวันก่อนหน้า (จากกะดึก) เป็นค่า Patient Census"}),(0,a.jsx)("p",{children:"หมายเหตุ: หากไม่มีข้อมูลวันก่อนหน้า ให้กรอกข้อมูลด้วยตนเอง"})]}):"ดึก"===r?(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1 mb-2 bg-gray-100 p-2 rounded",children:[(0,a.jsx)("p",{children:"สูตรคำนวณกะดึก: newAdmit + transferIn + referIn - transferOut + referOut + discharge + dead = Overall Data"}),(0,a.jsx)("p",{children:"หมายเหตุ: Overall Data จะถูกใช้เป็น Patient Census ในวันถัดไป (กะเช้า)"})]}):null},A=e=>{let r=parseInt(e.newAdmit)||0,t=parseInt(e.transferIn)||0,a=parseInt(e.referIn)||0,s=parseInt(e.transferOut)||0,n=parseInt(e.referOut)||0;return r+t+a-s+n+(parseInt(e.discharge)||0)+(parseInt(e.dead)||0)},O=e=>{let{wardId:r}=e,{user:t}=(0,c.A)(),{theme:n}=(0,m.D)(),[i,l]=(0,s.useState)(!0),p=(0,s.useMemo)(()=>r&&""!==r.trim()?r:(null==t?void 0:t.department)&&""!==t.department.trim()?t.department:"",[r,t]),[h,b]=(0,s.useState)(p),[x,O]=(0,s.useState)(new Date),[S,k]=(0,s.useState)((0,u.Se)()),[B,E]=(0,s.useState)((0,o.Lg)()),[U,_]=(0,s.useState)(!1),[R,W]=(0,s.useState)([]),[M,P]=(0,s.useState)(null),[Y,q]=(0,s.useState)(!1),[G,J]=(0,s.useState)(null),[z,F]=(0,s.useState)(null),[Z,H]=(0,s.useState)(!1),[V,L]=(0,s.useState)({patientCensus:"",overallData:"",newAdmit:"",transferIn:"",referIn:"",transferOut:"",referOut:"",discharge:"",dead:"",rns:"",pns:"",nas:"",aides:"",studentNurses:"",notes:"",firstName:(null==t?void 0:t.firstName)||"",lastName:(null==t?void 0:t.lastName)||"",isDraft:!1}),[T,$]=(0,s.useState)(null),[K,Q]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(h)try{let e=await checkPast30DaysRecords(h);Q(e),e.noRecentRecords&&d.YU.fire({title:"เริ่มบันทึกใหม่",text:e.message,icon:"info",confirmButtonColor:"#0ab4ab"})}catch(e){console.error("Error checking past 30 days records:",e)}})()},[h]);let X=async()=>{try{if(!x||!h)return null;let e=new Date(x);e.setDate(e.getDate()-1);let r=(0,o.Ol)(e),t=await g(r,h,"ดึก");if("approved"===t.status){let e=await I(r,h,"ดึก");if(e)return $(e),e.overallData||"0"}else if(null==K?void 0:K.noRecentRecords)return"0";return"ยังไม่มีข้อมูลจากวันที่ผ่านมา"}catch(e){return console.error("Error fetching previous day data:",e),"เกิดข้อผิดพลาดในการดึงข้อมูล"}};(0,s.useEffect)(()=>{let e=!1;(async()=>{if(!e){e=!0;try{let e=""!==V.newAdmit||""!==V.transferIn||""!==V.referIn||""!==V.transferOut||""!==V.referOut||""!==V.discharge||""!==V.dead;if("เช้า"===S){if(!V.patientCensus||"ยังไม่มีข้อมูลจากวันที่ผ่านมา"===V.patientCensus){let e=await X();L(r=>({...r,patientCensus:e}))}if(e){let e=A(V);L(r=>({...r,overallData:e.toString()}))}else L(e=>({...e,overallData:"รอผลข้อมูลวันนี้"}))}else if("ดึก"===S){if(e){let e=A(V);L(r=>({...r,overallData:e.toString()}))}else L(e=>({...e,overallData:"รอผลข้อมูลวันนี้"}))}}finally{e=!1}}})()},[V.newAdmit,V.transferIn,V.referIn,V.transferOut,V.referOut,V.discharge,V.dead,S,x,h]);let ee=e=>{let r=e.target,t=r.value;/^[ก-๙a-zA-Z\s]*$/.test(t)?r.setCustomValidity(""):r.setCustomValidity("กรุณากรอกเฉพาะตัวอักษรเท่านั้น")},er=e=>{N(e,V,L,q)},et=async e=>{if(e&&e.preventDefault(),!x||!S){d.YU.fire({title:"ไม่สามารถบันทึกได้",text:"กรุณาเลือกวันที่และกะก่อนบันทึกข้อมูล",icon:"warning",confirmButtonColor:"#0ab4ab"});return}if(!V.firstName||!V.lastName){d.YU.fire({title:"ไม่สามารถบันทึกได้",text:"กรุณากรอกชื่อ-นามสกุลผู้บันทึกข้อมูล",icon:"warning",confirmButtonColor:"#0ab4ab"});return}try{setIsSubmitting(!0);let e={...V};"เช้า"===S?(e.patientCensus&&"ยังไม่มีข้อมูลจากวันที่ผ่านมา"!==e.patientCensus||(e.patientCensus=await X()),(e.newAdmit||e.transferIn||e.referIn||e.transferOut||e.referOut||e.discharge||e.dead)&&(e.overallData=A(e).toString())):"ดึก"===S&&(e.newAdmit||e.transferIn||e.referIn||e.transferOut||e.referOut||e.discharge||e.dead)&&(e.overallData=A(e).toString()),e.isDraft=!0,await v(x,h,S,e,t,!0)&&(L(e),H(!0),q(!1),d.YU.fire({title:"บันทึกสำเร็จ",text:"บันทึกข้อมูลเป็นฉบับร่างเรียบร้อยแล้ว",icon:"success",confirmButtonColor:"#0ab4ab"}))}catch(e){console.error("Error saving draft:",e),d.YU.fire({title:"Error",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล",icon:"error",confirmButtonColor:"#0ab4ab"})}finally{setIsSubmitting(!1)}},ea=async e=>{if(e&&e.preventDefault(),!x||!S){d.YU.fire({title:"ไม่สามารถบันทึกได้",text:"กรุณาเลือกวันที่และกะก่อนบันทึกข้อมูล",icon:"warning",confirmButtonColor:"#0ab4ab"});return}if(!V.firstName||!V.lastName){d.YU.fire({title:"ไม่สามารถบันทึกได้",text:"กรุณากรอกชื่อ-นามสกุลผู้บันทึกข้อมูล",icon:"warning",confirmButtonColor:"#0ab4ab"});return}if(!(V.patientCensus||V.overallData||V.newAdmit||V.transferIn||V.referIn||V.transferOut||V.referOut||V.discharge||V.dead||V.rns||V.pns||V.nas||V.aides||V.studentNurses)){d.YU.fire({title:"ไม่สามารถบันทึกได้",text:"กรุณากรอกข้อมูลอย่างน้อย 1 ฟิลด์",icon:"warning",confirmButtonColor:"#0ab4ab"});return}try{setIsSubmitting(!0);let e={...V};"เช้า"===S?(e.patientCensus&&"ยังไม่มีข้อมูลจากวันที่ผ่านมา"!==e.patientCensus||(e.patientCensus=await X()),(e.newAdmit||e.transferIn||e.referIn||e.transferOut||e.referOut||e.discharge||e.dead)&&(e.overallData=A(e).toString())):"ดึก"===S&&(e.newAdmit||e.transferIn||e.referIn||e.transferOut||e.referOut||e.discharge||e.dead)&&(e.overallData=A(e).toString()),e.isDraft=!1,await v(x,h,S,e,t,!1)&&(L(e),H(!1),q(!1),d.YU.fire({title:"บันทึกสำเร็จ",text:"บันทึกข้อมูลเรียบร้อยแล้ว ข้อมูลจะถูกส่งไปยังหน้าอนุมัติ",icon:"success",confirmButtonColor:"#0ab4ab"}).then(()=>{f(h),g(x,h).then(e=>{J(e)})}))}catch(e){console.error("Error submitting form:",e),d.YU.fire({title:"Error",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล",icon:"error",confirmButtonColor:"#0ab4ab"})}finally{setIsSubmitting(!1)}};return(0,a.jsxs)("div",{className:"p-4 max-w-6xl mx-auto",children:[(null==K?void 0:K.noRecentRecords)&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded-md",children:[(0,a.jsx)("p",{className:"font-semibold",children:"ข้อมูลย้อนหลัง 30 วัน:"}),(0,a.jsx)("p",{children:K.message})]}),(0,a.jsx)(C,{shift:S}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(y,{formData:V,onInputChange:er}),(0,a.jsx)(w,{formData:V,onInputChange:er}),(0,a.jsx)(j,{formData:V,onInputChange:er}),(0,a.jsx)(D,{formData:V,setFormData:L,setHasUnsavedChanges:q}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ผู้บันทึกข้อมูล"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("label",{className:"block text-gray-700 mb-1",children:["ชื่อ ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"firstName",value:V.firstName,onChange:er,onInput:ee,className:"border rounded p-2 w-full",pattern:"[ก-๙a-zA-Z\\s]*",title:"กรุณากรอกเฉพาะตัวอักษรเท่านั้น",required:!0})]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("label",{className:"block text-gray-700 mb-1",children:["นามสกุล ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"lastName",value:V.lastName,onChange:er,onInput:ee,className:"border rounded p-2 w-full",pattern:"[ก-๙a-zA-Z\\s]*",title:"กรุณากรอกเฉพาะตัวอักษรเท่านั้น",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,a.jsx)("button",{onClick:et,disabled:isSubmitting,className:"bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600 transition-colors",children:isSubmitting?"กำลังบันทึก...":"บันทึกฉบับร่าง"}),(0,a.jsx)("button",{onClick:ea,disabled:isSubmitting,className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition-colors",children:isSubmitting?"กำลังบันทึก...":"บันทึกข้อมูล"})]})]})]})};var S=t(9092);function k(){let{user:e,loading:r}=(0,c.A)(),[t,n]=(0,s.useState)(null),[i,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{r||((null==e?void 0:e.department)?n(e.department):n(""),d(!0))},[e,r]),(0,a.jsx)(S.A,{title:"แบบฟอร์มบันทึกข้อมูล Ward",children:i?(0,a.jsx)(O,{wardId:t}):(0,a.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,a.jsx)(l.A,{})})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[932,766,653,775,505,696,315,358],()=>r(6701)),_N_E=e.O()}]);