(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{5700:(e,t,a)=>{Promise.resolve().then(a.bind(a,2718))},2718:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(5155),s=a(2115),r=a(6046),l=a(5071),c=a(1340),o=a(4898),d=a(3693);function i(){let{user:e,loading:t,isAuthenticated:a}=(0,c.A)(),i=(0,r.useRouter)();return((0,s.useEffect)(()=>{t||a||i.push("/login")},[t,a,i]),t)?(0,n.jsx)(d.A,{}):a?(0,n.jsx)(o.A,{requiredRole:"user",children:(0,n.jsxs)("div",{className:"min-h-screen pb-16 relative",children:[(0,n.jsx)("main",{className:"container mx-auto px-4 pt-20",children:(0,n.jsx)(l.A,{})}),(0,n.jsx)("div",{className:"fixed bottom-4 right-4 text-sm text-gray-500",children:"v.2.3.3.2025"})]})}):null}},2577:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(5155),s=a(2115),r=a(3665),l=a(7949),c=a(9194);let o=e=>{let t,{selectedDate:a,onDateSelect:o,onClickOutside:d,datesWithData:i=[],variant:u="form"}=e,[g,m]=(0,s.useState)(a||new Date),[h,x]=(0,s.useState)(a||new Date),v=(0,s.useRef)(null);(0,s.useEffect)(()=>{if("form"===u){let e=new Date;x(e),m(e)}},[u]),(0,s.useEffect)(()=>{a&&(m(a),"form"!==u&&x(a))},[a,u]),(0,s.useEffect)(()=>{let e=e=>{v.current&&!v.current.contains(e.target)&&d&&d()},t=e=>{e.preventDefault(),e.stopPropagation()},a=window.innerWidth-document.documentElement.clientWidth,n={overflow:window.getComputedStyle(document.body).overflow,paddingRight:window.getComputedStyle(document.body).paddingRight};return document.addEventListener("mousedown",e),document.addEventListener("wheel",t,{passive:!1}),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("scroll",t,{passive:!1}),document.body.style.overflow="hidden",document.body.style.paddingRight="".concat(a,"px"),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("wheel",t),document.removeEventListener("touchmove",t),document.removeEventListener("scroll",t),document.body.style.overflow=n.overflow,document.body.style.paddingRight=n.paddingRight}},[d]);let p=(0,r.S2)(),f=new Date().getFullYear(),w=(0,r.RB)(f),b=(e,t)=>{if(!t)return;let a=new Date(h.getFullYear(),h.getMonth(),e);m(a),o(a),d&&d()};new Date().setHours(0,0,0,0);let D=e=>{let t=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0],a=i.find(e=>e.date===t);return a?{hasData:!0,isComplete:a.isComplete,shifts:a.shifts}:{hasData:!1,isComplete:!1,shifts:[]}},j=e=>{let{hasData:t,isComplete:n,shifts:s}=D(e),r=e.toDateString()===new Date().toDateString(),l=a&&e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear(),c="hover:bg-gray-100",o="text-gray-700",d="";return r&&(c="bg-[#0ab4ab]",o="text-white"),t&&(n?(c="bg-[#0ab4ab]/10 hover:bg-[#0ab4ab]/20",d="absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-[#0ab4ab]"):(c="bg-orange-100 hover:bg-orange-200",d="absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-orange-500")),l&&!r&&(c+=" ring-2 ring-[#0ab4ab]"),!(e<new Date(new Date().setHours(0,0,0,0)))||r||l||(o="text-gray-400"),{cellClass:"p-1 text-center",dayClass:"".concat("relative w-10 h-10 flex items-center justify-center rounded-full transition-all duration-200"," ").concat(c," ").concat(o," font-medium cursor-pointer"),dotClass:d}};return(0,n.jsx)("div",{ref:v,className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 z-[9999]",onTouchMove:e=>e.preventDefault(),onScroll:e=>e.preventDefault(),children:(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"text-center mb-4",children:[(0,n.jsx)("div",{className:"text-lg font-medium mb-2",children:"เลือกวันที่"}),(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:["วันที่ปัจจุบัน: ",(t=new Date,(0,l.GP)(t,"dd MMMM yyyy",{locale:c.th}))]})]}),(0,n.jsxs)("div",{className:"flex justify-center gap-4 mb-4",children:[(0,n.jsx)("select",{value:h.getMonth(),onChange:e=>{let t=new Date(h);if(t.setMonth(parseInt(e.target.value)),x(t),"form"===u){let e=new Date;t.setDate(e.getDate()),x(t)}},className:"px-3 py-1 border rounded-lg text-gray-700",children:p.map((e,t)=>(0,n.jsx)("option",{value:t,children:e},e))}),(0,n.jsx)("select",{value:h.getFullYear(),onChange:e=>{let t=new Date(h);if(t.setFullYear(parseInt(e.target.value)),x(t),"form"===u){let e=new Date;t.setDate(e.getDate()),x(t)}},className:"px-3 py-1 border rounded-lg text-gray-700",children:w.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:["อา","จ","อ","พ","พฤ","ศ","ส"].map(e=>(0,n.jsx)("div",{className:"text-sm font-medium text-gray-600",children:e},e))}),(0,n.jsx)("table",{className:"w-full",children:(0,n.jsx)("tbody",{children:(()=>{let e=h.getFullYear(),t=h.getMonth(),a=new Date(e,t,1),s=new Date(e,t+1,0).getDate(),r=a.getDay(),l=new Date(e,t,0).getDate(),c=[],o=[];for(let a=0;a<r;a++){let s=l-r+a+1,{cellClass:c,dayClass:d,dotClass:i}=j(new Date(e,t-1,s));o.push((0,n.jsx)("td",{className:c,children:(0,n.jsxs)("div",{onClick:()=>b(s,!1),className:"".concat(d," opacity-50"),children:[s,i&&(0,n.jsx)("div",{className:i})]})},"prev-".concat(s)))}for(let a=1;a<=s;a++){let{cellClass:s,dayClass:r,dotClass:l}=j(new Date(e,t,a));o.push((0,n.jsx)("td",{className:s,children:(0,n.jsxs)("div",{onClick:()=>b(a,!0),className:r,children:[a,l&&(0,n.jsx)("div",{className:l})]})},a)),7===o.length&&(c.push((0,n.jsx)("tr",{children:o},"week-".concat(c.length))),o=[])}if(o.length>0){let a=1;for(;o.length<7;){let{cellClass:s,dayClass:r,dotClass:l}=j(new Date(e,t+1,a));o.push((0,n.jsx)("td",{className:s,children:(0,n.jsxs)("div",{onClick:()=>b(a,!1),className:"".concat(r," opacity-50"),children:[a,l&&(0,n.jsx)("div",{className:l})]})},"next-".concat(a))),a++}c.push((0,n.jsx)("tr",{children:o},"week-".concat(c.length)))}return c})()})}),(0,n.jsxs)("div",{className:"mt-4 flex justify-center gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#0ab4ab]"}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:"วันที่ปัจจุบัน"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-300"}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:"บันทึกครบ 2 กะ"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-300"}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:"บันทึกไม่ครบ"})]})]})]})})}},3665:(e,t,a)=>{"use strict";a.d(t,{Lg:()=>s,Ol:()=>r,RB:()=>o,S2:()=>c,bU:()=>l,mI:()=>n});let n=e=>{if(!e)return"คุณยังไม่ได้เลือกวันที่";let t=new Date(e),a=t.getDate(),n=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"][t.getMonth()],s=t.getFullYear()+543;return"".concat(a," ").concat(n," ").concat(s)},s=()=>n(new Date),r=e=>{let t=new Date(e);return"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"))},l=e=>{let t=new Date(e),a=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(n,"-").concat(s)},c=()=>["January","February","March","April","May","June","July","August","September","October","November","December"],o=e=>{let t=[];for(let e=2e3;e<=4e3;e++)t.push(e);return t}}},e=>{var t=t=>e(e.s=t);e.O(0,[302,992,888,320,118,738,262,898,71,441,517,358],()=>t(5700)),_N_E=e.O()}]);