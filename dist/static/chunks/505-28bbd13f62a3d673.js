"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[505],{4613:(e,t,a)=>{a.d(t,{h:()=>s});let s="v.2.3.3.2025"},4776:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(5155);a(2115);var n=a(6766);let r=()=>(0,s.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-white via-blue-50 to-[#0ab4ab]/10 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white/80 p-8 rounded-2xl shadow-xl backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,s.jsx)(n.default,{src:"/images/BPK.jpg",alt:"BPK Loading",fill:!0,style:{objectFit:"contain"},className:"animate-pulse rounded-lg",priority:!0})}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0ab4ab] mb-3"}),(0,s.jsx)("p",{className:"text-gray-600 font-medium",children:"กำลังโหลดข้อมูล..."}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"โปรดรอสักครู่"})]})]})})})},6660:(e,t,a)=>{a.d(t,{Lg:()=>n,Ol:()=>r,RB:()=>o,S2:()=>i,bU:()=>l,mI:()=>s});let s=e=>{if(!e)return"คุณยังไม่ได้เลือกวันที่";let t=new Date(e),a=t.getDate(),s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"][t.getMonth()],n=t.getFullYear()+543;return"".concat(a," ").concat(s," ").concat(n)},n=()=>s(new Date),r=e=>{let t=new Date(e);return"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"))},l=e=>{let t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(n)},i=()=>["January","February","March","April","May","June","July","August","September","October","November","December"],o=e=>{let t=[];for(let e=2e3;e<=4e3;e++)t.push(e);return t}},8382:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(5155),n=a(2115),r=a(6660),l=a(4008),i=a(8066);let o=e=>{let t,{selectedDate:a,onDateSelect:o,onClickOutside:c,datesWithData:d=[],variant:m="form"}=e,[u,h]=(0,n.useState)(a||new Date),[g,x]=(0,n.useState)(a||new Date),f=(0,n.useRef)(null);(0,n.useEffect)(()=>{if("form"===m){let e=new Date;x(e),h(e)}},[m]),(0,n.useEffect)(()=>{a&&(h(a),"form"!==m&&x(a))},[a,m]),(0,n.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&c&&c()},t=e=>{e.preventDefault(),e.stopPropagation()},a=window.innerWidth-document.documentElement.clientWidth,s={overflow:window.getComputedStyle(document.body).overflow,paddingRight:window.getComputedStyle(document.body).paddingRight};return document.addEventListener("mousedown",e),document.addEventListener("wheel",t,{passive:!1}),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("scroll",t,{passive:!1}),document.body.style.overflow="hidden",document.body.style.paddingRight="".concat(a,"px"),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("wheel",t),document.removeEventListener("touchmove",t),document.removeEventListener("scroll",t),document.body.style.overflow=s.overflow,document.body.style.paddingRight=s.paddingRight}},[c]);let p=(0,r.S2)(),v=new Date().getFullYear(),b=(0,r.RB)(v),w=(e,t)=>{if(!t)return;let a=new Date(g.getFullYear(),g.getMonth(),e);h(a),o(a),c&&c()};new Date().setHours(0,0,0,0);let j=e=>{let t=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0],a=d.find(e=>e.date===t);return a?{hasData:!0,isComplete:a.isComplete,shifts:a.shifts}:{hasData:!1,isComplete:!1,shifts:[]}},y=e=>{let{hasData:t,isComplete:s,shifts:n}=j(e),r=e.toDateString()===new Date().toDateString(),l=a&&e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear(),i="hover:bg-gray-100",o="text-gray-700",c="";return r&&(i="bg-[#0ab4ab]",o="text-white"),t&&(s?(i="bg-[#0ab4ab]/10 hover:bg-[#0ab4ab]/20",c="absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-[#0ab4ab]"):(i="bg-orange-100 hover:bg-orange-200",c="absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-orange-500")),l&&!r&&(i+=" ring-2 ring-[#0ab4ab]"),!(e<new Date(new Date().setHours(0,0,0,0)))||r||l||(o="text-gray-400"),{cellClass:"p-1 text-center",dayClass:"".concat("relative w-10 h-10 flex items-center justify-center rounded-full transition-all duration-200"," ").concat(i," ").concat(o," font-medium cursor-pointer"),dotClass:c}};return(0,s.jsx)("div",{ref:f,className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 z-[9999]",onTouchMove:e=>e.preventDefault(),onScroll:e=>e.preventDefault(),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("div",{className:"text-lg font-medium mb-2",children:"เลือกวันที่"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["วันที่ปัจจุบัน: ",(t=new Date,(0,l.GP)(t,"dd MMMM yyyy",{locale:i.th}))]})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 mb-4",children:[(0,s.jsx)("select",{value:g.getMonth(),onChange:e=>{let t=new Date(g);if(t.setMonth(parseInt(e.target.value)),x(t),"form"===m){let e=new Date;t.setDate(e.getDate()),x(t)}},className:"px-3 py-1 border rounded-lg text-gray-700",children:p.map((e,t)=>(0,s.jsx)("option",{value:t,children:e},e))}),(0,s.jsx)("select",{value:g.getFullYear(),onChange:e=>{let t=new Date(g);if(t.setFullYear(parseInt(e.target.value)),x(t),"form"===m){let e=new Date;t.setDate(e.getDate()),x(t)}},className:"px-3 py-1 border rounded-lg text-gray-700",children:b.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:["อา","จ","อ","พ","พฤ","ศ","ส"].map(e=>(0,s.jsx)("div",{className:"text-sm font-medium text-gray-600",children:e},e))}),(0,s.jsx)("table",{className:"w-full",children:(0,s.jsx)("tbody",{children:(()=>{let e=g.getFullYear(),t=g.getMonth(),a=new Date(e,t,1),n=new Date(e,t+1,0).getDate(),r=a.getDay(),l=new Date(e,t,0).getDate(),i=[],o=[];for(let a=0;a<r;a++){let n=l-r+a+1,{cellClass:i,dayClass:c,dotClass:d}=y(new Date(e,t-1,n));o.push((0,s.jsx)("td",{className:i,children:(0,s.jsxs)("div",{onClick:()=>w(n,!1),className:"".concat(c," opacity-50"),children:[n,d&&(0,s.jsx)("div",{className:d})]})},"prev-".concat(n)))}for(let a=1;a<=n;a++){let{cellClass:n,dayClass:r,dotClass:l}=y(new Date(e,t,a));o.push((0,s.jsx)("td",{className:n,children:(0,s.jsxs)("div",{onClick:()=>w(a,!0),className:r,children:[a,l&&(0,s.jsx)("div",{className:l})]})},a)),7===o.length&&(i.push((0,s.jsx)("tr",{children:o},"week-".concat(i.length))),o=[])}if(o.length>0){let a=1;for(;o.length<7;){let{cellClass:n,dayClass:r,dotClass:l}=y(new Date(e,t+1,a));o.push((0,s.jsx)("td",{className:n,children:(0,s.jsxs)("div",{onClick:()=>w(a,!1),className:"".concat(r," opacity-50"),children:[a,l&&(0,s.jsx)("div",{className:l})]})},"next-".concat(a))),a++}i.push((0,s.jsx)("tr",{children:o},"week-".concat(i.length)))}return i})()})}),(0,s.jsxs)("div",{className:"mt-4 flex justify-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#0ab4ab]"}),(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"วันที่ปัจจุบัน"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-300"}),(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"บันทึกครบ 2 กะ"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-300"}),(0,s.jsx)("span",{className:"text-xs text-gray-600",children:"บันทึกไม่ครบ"})]})]})]})})}},9092:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(5155),n=a(2115),r=a(5695),l=a(2808),i=a(7775),o=a(4776),c=a(4613),d=a(9770);function m(e){let{children:t,title:a,requiredRole:m="user",infoBox:u}=e,{user:h,loading:g,isAuthenticated:x}=(0,l.A)(),f=(0,r.useRouter)(),[p,v]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{g||x||f.push("/login"),h&&h.role&&("admin"===h.role.toLowerCase()?v(!0):"user"===m?v(!0):h.role.toLowerCase()===m.toLowerCase()?v(!0):(v(!1),(0,d.$s)("unauthorized_access_attempt",{userRole:h.role,requiredRole:m,page:a})))},[g,x,f,h,m,a]),g)?(0,s.jsx)(o.A,{}):x?p?(0,s.jsx)(i.A,{requiredRole:m,children:(0,s.jsxs)("div",{className:"min-h-screen pb-16 relative",children:[(0,s.jsxs)("main",{className:"container mx-auto px-4 pt-20",children:[a&&(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:a}),u&&(0,s.jsx)("div",{className:"mb-6",children:u}),t]}),(0,s.jsx)("div",{className:"fixed bottom-4 right-4 text-sm text-gray-500",children:c.h})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,s.jsx)("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"ไม่มีสิทธิ์เข้าถึง"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"คุณไม่มีสิทธิ์เพียงพอในการเข้าถึงหน้านี้ กรุณาติดต่อผู้ดูแลระบบหากคุณเชื่อว่านี่เป็นข้อผิดพลาด"}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>f.push("/"),children:"กลับไปยังหน้าหลัก"})})]})})}):null}}}]);